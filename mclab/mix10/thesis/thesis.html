<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>MiX10: A MATLAB TO X10 COMPILER FOR HIGH PERFORMANCE</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="thesis.tex"> 
<meta name="date" content="2014-04-23 20:24:00"> 
<link rel="stylesheet" type="text/css" href="thesis.css"> 
</head><body 
>
   <div class="maketitle">
                                                                                   

                                                                                   

<h2 class="titleHead">MIX10: A MATLAB TO X10 COMPILER FOR HIGH PERFORMANCE</h2><br /><br />
<span 
class="ptmri8t-x-x-120">by</span><br />
<div class="author" ><span 
class="ptmri8t-x-x-120">Vineet Kumar</span></div><br /><br />
School of Computer Science<br />
McGill University, Montréal<br /><br />
Monday, April 14th 2014
<span 
class="ptmrc8t-x-x-109"><span 
class="small-caps">A</span> <span 
class="small-caps">T</span><span 
class="small-caps">H</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span><span 
class="small-caps">I</span><span 
class="small-caps">S</span> <span 
class="small-caps">S</span><span 
class="small-caps">U</span><span 
class="small-caps">B</span><span 
class="small-caps">M</span><span 
class="small-caps">I</span><span 
class="small-caps">T</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span><span 
class="small-caps">D</span> <span 
class="small-caps">T</span><span 
class="small-caps">O</span> <span 
class="small-caps">T</span><span 
class="small-caps">H</span><span 
class="small-caps">E</span> F<span 
class="small-caps">A</span><span 
class="small-caps">C</span><span 
class="small-caps">U</span><span 
class="small-caps">L</span><span 
class="small-caps">T</span><span 
class="small-caps">Y</span> <span 
class="small-caps">O</span><span 
class="small-caps">F</span> G<span 
class="small-caps">R</span><span 
class="small-caps">A</span><span 
class="small-caps">D</span><span 
class="small-caps">U</span><span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span> S<span 
class="small-caps">T</span><span 
class="small-caps">U</span><span 
class="small-caps">D</span><span 
class="small-caps">I</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span> <span 
class="small-caps">A</span><span 
class="small-caps">N</span><span 
class="small-caps">D</span> R<span 
class="small-caps">E</span><span 
class="small-caps">S</span><span 
class="small-caps">E</span><span 
class="small-caps">A</span><span 
class="small-caps">R</span><span 
class="small-caps">C</span><span 
class="small-caps">H</span></span><br />
<span 
class="ptmrc8t-x-x-109"><span 
class="small-caps">I</span><span 
class="small-caps">N</span> <span 
class="small-caps">P</span><span 
class="small-caps">A</span><span 
class="small-caps">R</span><span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">A</span><span 
class="small-caps">L</span> <span 
class="small-caps">F</span><span 
class="small-caps">U</span><span 
class="small-caps">L</span><span 
class="small-caps">fi</span><span 
class="small-caps">L</span><span 
class="small-caps">L</span><span 
class="small-caps">M</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">T</span> <span 
class="small-caps">O</span><span 
class="small-caps">F</span> <span 
class="small-caps">T</span><span 
class="small-caps">H</span><span 
class="small-caps">E</span> <span 
class="small-caps">R</span><span 
class="small-caps">E</span><span 
class="small-caps">Q</span><span 
class="small-caps">U</span><span 
class="small-caps">I</span><span 
class="small-caps">R</span><span 
class="small-caps">E</span><span 
class="small-caps">M</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">T</span><span 
class="small-caps">S</span> <span 
class="small-caps">F</span><span 
class="small-caps">O</span><span 
class="small-caps">R</span> <span 
class="small-caps">T</span><span 
class="small-caps">H</span><span 
class="small-caps">E</span> <span 
class="small-caps">D</span><span 
class="small-caps">E</span><span 
class="small-caps">G</span><span 
class="small-caps">R</span><span 
class="small-caps">E</span><span 
class="small-caps">E</span> <span 
class="small-caps">O</span><span 
class="small-caps">F</span></span><br />
<span 
class="ptmrc8t-x-x-109">M<span 
class="small-caps">A</span><span 
class="small-caps">S</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span><span 
class="small-caps">R</span> <span 
class="small-caps">O</span><span 
class="small-caps">F</span> S<span 
class="small-caps">C</span><span 
class="small-caps">I</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">C</span><span 
class="small-caps">E</span></span>
                                                                                   

                                                                                   
Copyright <span 
class="ptmr8c-x-x-120">©</span>&#x00A0;2014 Vineet Kumar
                                                                                   

                                                                                   
   </div>
                                                                                   

                                                                                   
                                                                                   

                                                                                   
                                                                                   

                                                                                   
<!--l. 330--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-2r1"></a>
<a 
 id="Q1-1-1"></a>
<!--l. 330--><p class="noindent" ><span 
class="phvb8t-x-x-197">Abstract</span>
<!--l. 1--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is a popular dynamic array-based language commonly used by students, scientists
and engineers who appreciate the interactive development style, the rich set of array operators, the
extensive builtin library, and the fact that they do not have to declare static types. Even though
these users like to program in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, their computations are often very compute-intensive
and are better suited for emerging high performance computing systems. This thesis
reports on <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>, a source-to-source compiler that automatically translates <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
programs to <span 
class="ptmrc8t-x-x-120">X10</span>, a language designed for &#8220;Performance and Productivity at Scale";
thus, helping scientific programmers make better use of high performance computing
systems.
<!--l. 13--><p class="indent" >   There is a large semantic gap between the array-based dynamically-typed nature of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
and the object-oriented, statically-typed, and high-level array abstractions of <span 
class="ptmrc8t-x-x-120">X10</span>. This thesis
addresses the major challenges that must be overcome to produce sequential <span 
class="ptmrc8t-x-x-120">X10 </span>code that is
competitive with state-of-the-art static compilers for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>which target more conventional
imperative languages such as C and Fortran. Given that efficient basis, the thesis then provides a
translation for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>construct that leverages the powerful concurrency
constructs in <span 
class="ptmrc8t-x-x-120">X10</span>.
<!--l. 23--><p class="indent" >   The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler has been implemented using the McLab compiler tools, is
open source, and is available both for compiler researchers and end-user <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
programmers. We have used the implementation to perform many empirical measurements on
a set of 17 <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>benchmarks. We show that our best <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>-generated code is
significantly faster than the de facto Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>system, and that our results are
competitive with state-of-the-art static compilers that target C and Fortran. We also show
                                                                                   

                                                                                   
the importance of finding the correct approach to representing the arrays in <span 
class="ptmrc8t-x-x-120">X10</span>, and
the necessity of an <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis that determines which double variables can
be safely represented as integers. Finally, we show that our <span 
class="ptmrc8t-x-x-120">X10</span>-based handling of
the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>greatly outperforms the de facto <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>implementation.
                                                                                   

                                                                                   
<a 
 id="x1-3r2"></a>
<a 
 id="Q1-1-2"></a>
<!--l. 334--><p class="noindent" ><span 
class="phvb8t-x-x-197">R</span><span 
class="phvb8t-x-x-197">ésum</span><span 
class="phvb8t-x-x-197">é</span>
<!--l. 2--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>est un langage de programmation dynamique, orienté-tableaux communément
utilisé par les étudiants, les scientifiques et les ingénieurs qui apprécient son style de
développement interactif, la richesse de ses opérateurs sur les tableaux, sa librairie
impressionnante de fonctions de base et le fait qu&#8217;on aie pas à déclarer statiquement le type des
variables. Bien que ces usagers apprécient <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, leurs programmes nécessitent souvent des
ressources de calcul importantes qui sont offertes par les nouveaux systèmes de haute
performance. Cette thèse fait le rapport de <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>, un compilateur source-à-source qui fait la
traduction automatique de programmes <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>à <span 
class="ptmrc8t-x-x-120">X10</span>, un langage construit pour "la
performance et la productivité à grande échelle." Ainsi, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>aide les programmeurs
scientifiques à faire un meilleur usage des ressources des systèmes de calcul de haute
performance.
<!--l. 17--><p class="indent" >   Il y a un écart sémantique important entre le typage dynamique et le focus sur les tableaux de
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>et l&#8217;approche orientée-objet, le typage statique et les abstractions de haut niveau sur les
tableaux de <span 
class="ptmrc8t-x-x-120">X10</span>. Cette thèse discute des défis principaux qui doivent être surmontés afin de
produire du code <span 
class="ptmrc8t-x-x-120">X10 </span>séquentiel compétitif avec les meilleurs compilateurs statiques pour
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>qui traduisent vers des langages impératifs plus conventionnels, tels que C et Fortran.
Fort de cette fondation efficace, cette thèse décrit ensuite la traduction de l&#8217;instruction <span 
class="pcrr8t-x-x-120">parfor</span>
de <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>afin d&#8217;utiliser les opérations sophistiquées de traitement concurrent de
<span 
class="ptmrc8t-x-x-120">X10</span>.
<!--l. 28--><p class="indent" >   Le compilateur <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>a été implémenté à l&#8217;aide de la suite d&#8217;outils de McLab, un projet
libre de droits, disponible à la communauté de recherche ainsi qu&#8217;aux utilisateurs de <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>.
Nous avons utilisé notre implémentation afin d&#8217;effectuer des mesures empiriques de performance
                                                                                   

                                                                                   
sur un jeu de 17 programmes <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. Nous démontrons que le code généré par <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>est
considérablement plus rapide que le système <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>de Mathworks et que nos résultats sont
compétitifs avec les meilleurs compilateurs statiques qui produisent du code C et Fortran.
Nous montrons également l&#8217;importance d&#8217;une représentation appropriée des tableaux
en <span 
class="ptmrc8t-x-x-120">X10 </span>et la nécessité d&#8217;une analyse <span 
class="ptmri8t-x-x-120">IntegerOkay </span>qui permet de déterminer quelles
variables de type réel (double) peuvent être correctement représentées par des entiers (int).
Finalement, nous montrons que notre traitement de l&#8217;instruction <span 
class="pcrr8t-x-x-120">parfor </span>en <span 
class="ptmrc8t-x-x-120">X10 </span>nous
permet d&#8217;atteindre des vitesses d&#8217;exécution considérablement meilleures que dans
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>.
                                                                                   

                                                                                   
<a 
 id="x1-4r3"></a>
<a 
 id="Q1-1-3"></a>
<!--l. 338--><p class="noindent" ><span 
class="phvb8t-x-x-197">Acknowledgements</span>
<!--l. 1--><p class="indent" >   I am thankful to my supervisor, Laurie Hendren, whose constant encouragement and guidance
not only helped me to understand compilers better, but also helped me become a better writer and
a better presenter.
<!--l. 5--><p class="indent" >   I would like to give a special thanks to David Grove for suggesting this line of research and in
helping us understand key parts of the <span 
class="ptmrc8t-x-x-120">X10 </span>language and implementation.
<!--l. 9--><p class="indent" >   I am also thankful to the <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>team for building an amazing framework for compiler
research on <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. In particular, I am thankful to Anton Dubrau (M.Sc.) for helping me
understand the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>S<span 
class="small-caps">A</span><span 
class="small-caps">F</span> </span>and Tamer frameworks, and Xu Li (M.Sc.) for all the interesting
discussions on how to statically compile <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>.
<!--l. 15--><p class="indent" >   Finally, I would like to thank my parents and my brother, who made it possible for me to
pursue my M.Sc. degree.
<!--l. 18--><p class="indent" >   Apart from all the wonderful people around me, I am thankful to my computers, <span 
class="ptmri8t-x-x-120">Antriksh</span>,
<span 
class="ptmri8t-x-x-120">Heisenberg</span>, and <span 
class="ptmri8t-x-x-120">cougar.cs.mcgill.ca </span>for tirelessly and reliably crunching numbers day in and day
out.
<!--l. 22--><p class="indent" >   This work was supported, in part, by the Natural Sciences and Engineering Research Council
of Canada (NSERC).
                                                                                   

                                                                                   
<!--l. 352--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-5r4"></a>
<a 
 id="Q1-1-4"></a>
<!--l. 352--><p class="noindent" ><span 
class="phvb8t-x-x-197">Table of Contents</span>
   <div class="tableofcontents">
   <span class="chapterToc" > <a 
href="#Q1-1-1">Abstract</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-2">Abstract</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-3">Acknowledgements</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-4">Table of Contents</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-5">List of Figures</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-6">List of Tables</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-7">1   Introduction</a></span>
<br />   &#x00A0;<span class="sectionToc" >1.1 <a 
href="#x1-10001" id="QQ2-1-8">Contributions</a></span>
<br />   &#x00A0;<span class="sectionToc" >1.2 <a 
href="#x1-20002" id="QQ2-1-9">Thesis Outline</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-10">2   Introduction to the <span 
class="ptmrc8t-x-x-120">X10 </span>Programming Language</a></span>
<br />   &#x00A0;<span class="sectionToc" >2.1 <a 
href="#x1-30001" id="QQ2-1-11">Overview of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s Key Sequential Features</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.1.1 <a 
href="#x1-40001" id="QQ2-1-13">Object-oriented Features</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.1.2 <a 
href="#x1-50002" id="QQ2-1-14">Statements</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.1.3 <a 
href="#x1-60003" id="QQ2-1-18">Arrays</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.1.4 <a 
href="#x1-70004" id="QQ2-1-19">Types</a></span>
<br />   &#x00A0;<span class="sectionToc" >2.2 <a 
href="#x1-80002" id="QQ2-1-20">Overview of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s Concurrency Features</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.2.1 <a 
href="#x1-90001" id="QQ2-1-21">Async</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.2.2 <a 
href="#x1-100002" id="QQ2-1-22">Finish</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.2.3 <a 
href="#x1-110003" id="QQ2-1-24">Atomic</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.2.4 <a 
href="#x1-120004" id="QQ2-1-26">At</a></span>
<br />   &#x00A0;<span class="sectionToc" >2.3 <a 
href="#x1-130003" id="QQ2-1-27">Overview of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s Implementation and Runtime</a></span>
                                                                                   

                                                                                   
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.3.1 <a 
href="#x1-140001" id="QQ2-1-28"><span 
class="ptmrc8t-x-x-120">X10 </span>Implementation</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.3.2 <a 
href="#x1-150002" id="QQ2-1-30"><span 
class="ptmrc8t-x-x-120">X10 </span>Runtime</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-32">3   Background and High-level Design of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span></a></span>
<br />   &#x00A0;<span class="sectionToc" >3.1 <a 
href="#x1-160001" id="QQ2-1-33">Background</a></span>
<br />   &#x00A0;<span class="sectionToc" >3.2 <a 
href="#x1-170002" id="QQ2-1-35">High-level Design of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Compiler</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.2.1 <a 
href="#x1-180001" id="QQ2-1-37">The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Intermediate Representation</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-38">4   Techniques for Efficient Compilation of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>Arrays</a></span>
<br />   &#x00A0;<span class="sectionToc" >4.1 <a 
href="#x1-190001" id="QQ2-1-39">Simple Arrays or Region Arrays</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.1.1 <a 
href="#x1-200001" id="QQ2-1-40">Compilation to Simple Arrays</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.1.2 <a 
href="#x1-230002" id="QQ2-1-43">Compilation to Region Arrays</a></span>
<br />   &#x00A0;<span class="sectionToc" >4.2 <a 
href="#x1-270002" id="QQ2-1-47">Handling the Colon Expression</a></span>
<br />   &#x00A0;<span class="sectionToc" >4.3 <a 
href="#x1-280003" id="QQ2-1-48">Array Growth</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-49">5   Handling <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>Builtins</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.0.1 <a 
href="#x1-290001" id="QQ2-1-50"> The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Builtin Support Framework</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-51">6   Code Generation for the Sequential Core</a></span>
<br />   &#x00A0;<span class="sectionToc" >6.1 <a 
href="#x1-300001" id="QQ2-1-52">Methods</a></span>
<br />   &#x00A0;<span class="sectionToc" >6.2 <a 
href="#x1-310002" id="QQ2-1-53">Types, Assignments and Declarations</a></span>
<br />   &#x00A0;<span class="sectionToc" >6.3 <a 
href="#x1-320003" id="QQ2-1-54">Loops</a></span>
<br />   &#x00A0;<span class="sectionToc" >6.4 <a 
href="#x1-330004" id="QQ2-1-55">Conditionals</a></span>
<br />   &#x00A0;<span class="sectionToc" >6.5 <a 
href="#x1-340005" id="QQ2-1-56">Function Calls</a></span>
<br />   &#x00A0;<span class="sectionToc" >6.6 <a 
href="#x1-350006" id="QQ2-1-57">Cell Arrays</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-58">7   Code Generation for Concurrency in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span></a></span>
<br />   &#x00A0;<span class="sectionToc" >7.1 <a 
href="#x1-360001" id="QQ2-1-59">Code Generation for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>Loop Construct</a></span>
<br />   &#x00A0;<span class="sectionToc" >7.2 <a 
href="#x1-370002" id="QQ2-1-61">Introducing Concurrency Controls in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span></a></span>
<br />   &#x00A0;<span class="sectionToc" >7.3 <a 
href="#x1-380003" id="QQ2-1-63">Parallelizing Vectorized Instructions</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-64">8   The <span 
class="ptmri8t-x-x-120">IntegerOkay </span>Analysis</a></span>
<br />   &#x00A0;<span class="sectionToc" >8.1 <a 
href="#x1-390001" id="QQ2-1-65">Need for Declaring Variables to be of Integer Type</a></span>
<br />   &#x00A0;<span class="sectionToc" >8.2 <a 
href="#x1-400002" id="QQ2-1-66">Effect on Performance</a></span>
<br />   &#x00A0;<span class="sectionToc" >8.3 <a 
href="#x1-410003" id="QQ2-1-70">An Overview of the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>Analysis</a></span>
<br />   &#x00A0;<span class="sectionToc" >8.4 <a 
href="#x1-420004" id="QQ2-1-71">The Analysis Algorithm</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >8.4.1 <a 
href="#x1-430001" id="QQ2-1-72">STEP 1 : Initialization</a></span>
                                                                                   

                                                                                   
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >8.4.2 <a 
href="#x1-440002" id="QQ2-1-75">STEP 2: The Fixed Point Solver</a></span>
<br />   &#x00A0;<span class="sectionToc" >8.5 <a 
href="#x1-450005" id="QQ2-1-77">An Example</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-78">9   Evaluation</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.1 <a 
href="#x1-460001" id="QQ2-1-79">Benchmarks</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.2 <a 
href="#x1-470002" id="QQ2-1-81">Experimental Setup</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.3 <a 
href="#x1-480003" id="QQ2-1-82"><span 
class="ptmrc8t-x-x-120">X10 </span>Compiler Variations</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.4 <a 
href="#x1-490004" id="QQ2-1-83">Overall <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Performance</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.5 <a 
href="#x1-500005" id="QQ2-1-85"><span 
class="ptmrc8t-x-x-120">X10 </span>C++ Backend vs. <span 
class="ptmrc8t-x-x-120">X10 </span>Java Backend</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >9.5.1 <a 
href="#x1-510001" id="QQ2-1-87">When Not to Use the <span 
class="ptmrc8t-x-x-120">X10 </span><span 
class="pcrr8t-x-x-120">-O</span></a></span>
<br />   &#x00A0;<span class="sectionToc" >9.6 <a 
href="#x1-520006" id="QQ2-1-88">Simple vs. Region Arrays</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.7 <a 
href="#x1-530007" id="QQ2-1-90">Effect of the IntegerOkay Analysis</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.8 <a 
href="#x1-540008" id="QQ2-1-92"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>parfor vs. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Parallel Code</a></span>
<br />   &#x00A0;<span class="sectionToc" >9.9 <a 
href="#x1-550009" id="QQ2-1-94">Summary</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-95">10 Related Work</a></span>
<br />   &#x00A0;<span class="sectionToc" >10.1 <a 
href="#x1-560001" id="QQ2-1-96">Alternatives to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span></a></span>
<br />   &#x00A0;<span class="sectionToc" >10.2 <a 
href="#x1-570002" id="QQ2-1-97">Other <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>Compilers</a></span>
<br />   &#x00A0;<span class="sectionToc" >10.3 <a 
href="#x1-580003" id="QQ2-1-98">Compilers Targeting <span 
class="ptmrc8t-x-x-120">X10</span></a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-99">11 Conclusions and Future Work</a></span>
<br />   &#x00A0;<span class="sectionToc" >11.1 <a 
href="#x1-590001" id="QQ2-1-100">Conclusions</a></span>
<br />   &#x00A0;<span class="sectionToc" >11.2 <a 
href="#x1-600002" id="QQ2-1-101">Future Work</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-102">Bibliography</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-103">A  XML structure for builtin framework</a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-104">B  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR Grammar</a></span>
   </div>
                                                                                   

                                                                                   
                                                                                   

                                                                                   
<a 
 id="x1-6r5"></a>
<a 
 id="Q1-1-5"></a>
<!--l. 353--><p class="noindent" ><span 
class="phvb8t-x-x-197">List of Figures</span>
   <div class="tableofcontents"><span class="lofToc" >2.1&#x00A0;<a 
href="#x1-14001r1">Architecture of the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler</a></span><br /><span class="lofToc" >2.2&#x00A0;<a 
href="#x1-15001r2">Architecture of the <span 
class="ptmrc8t-x-x-120">X10</span>
runtime</a></span><br /><span class="lofToc" >3.1&#x00A0;<a 
href="#x1-16001r1">Overview of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>structure</a></span><br /><span class="lofToc" >3.2&#x00A0;<a 
href="#x1-17001r2">Structure of the MiX10 code
generator</a></span><br /><span class="lofToc" >7.1&#x00A0;<a 
href="#x1-36038r1">Example of <span 
class="pcrr8t-x-x-120">parfor</span>, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>with <span 
class="pcrr8t-x-x-120">parfor </span>on the left,
generated <span 
class="ptmrc8t-x-x-120">X10 </span>on the right.</a></span><br /><span class="lofToc" >7.2&#x00A0;<a 
href="#x1-37027r2">Example of introduced concurrency controls,
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>with introduced concurrency on the left, generated <span 
class="ptmrc8t-x-x-120">X10 </span>on the
right.</a></span><br /><span class="lofToc" >9.1&#x00A0;<a 
href="#x1-49001r1">Performance of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>vs other state-of-the-art static compilers,
reported as speedups relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better.</a></span><br />
   </div>
                                                                                   

                                                                                   
                                                                                   

                                                                                   
<a 
 id="x1-7r6"></a>
<a 
 id="Q1-1-6"></a>
<!--l. 354--><p class="noindent" ><span 
class="phvb8t-x-x-197">List of Tables</span>
   <div class="tableofcontents"><span class="lotToc" >8.1&#x00A0;<a 
href="#x1-40024r1">Running times (in seconds) for listings <span 
class="ptmb8t-x-x-120">??</span> and <span 
class="ptmb8t-x-x-120">??</span>, smaller is
better</a></span><br /><span class="lotToc" >8.2&#x00A0;<a 
href="#x1-44001r2">Definition of the <img 
src="thesis0x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" > merge operator</a></span><br /><span class="lotToc" >9.1&#x00A0;<a 
href="#x1-46004r1">Benchmarks</a></span><br /><span class="lotToc" >9.2&#x00A0;<a 
href="#x1-50001r2"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
performance comparison : <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend vs. <span 
class="ptmrc8t-x-x-120">X10 </span>Java backend,
speedups relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better</a></span><br /><span class="lotToc" >9.3&#x00A0;<a 
href="#x1-52001r3"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
performance comparison : Simple arrays vs. Region arrays vs. Specialized
region arrays, speedup relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is
better</a></span><br /><span class="lotToc" >9.4&#x00A0;<a 
href="#x1-53001r4">Performance evaluation for the IntegerOkay analysis, speedups
relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better</a></span><br /><span class="lotToc" >9.5&#x00A0;<a 
href="#x1-54001r5">Performance evaluation
for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>generated parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor</span>
construct, speedups relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better</a></span><br />
   </div>
                                                                                   

                                                                                   
                                                                                   

                                                                                   
                                                                                   

                                                                                   
                                                                                   

                                                                                   
<!--l. 385--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-8r1"></a>
<a 
 id="Q1-1-7"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;1</span>
<!--l. 385--><p class="noindent" ><span 
class="phvb8t-x-x-197">Introduction</span>
<!--l. 385--><p class="noindent" >___________________________________________________________________________________
<!--l. 1--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is a popular numeric programming language, used by millions of scientists,
engineers as well as students worldwide<span class="cite">[<a 
href="#XMatlabGrowth">Mol</a>]</span>. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programmers appreciate the high-level
matrix operators, the fact that variables and types do not need to be declared, the large number of
library and builtin functions available, and the interactive style of program development available
through the IDE and the interpreter-style read-eval-print loop. However, even though <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
programmers appreciate all of the features that enable rapid prototyping, their applications are
often quite compute intensive and time consuming. These applications could perform
much more efficiently if they could be easily ported to a high performance computing
system.
<!--l. 12--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">X10 </span><span class="cite">[<a 
href="#Xx10">IBM12</a>]</span>, on the other hand, is an object-oriented and statically-typed language which
uses cilk-style arrays indexed by <span 
class="ptmri8t-x-x-120">Point </span>objects and rail-backed multidimensional arrays, and has
been designed with well-defined semantics and high performance computing in mind. The <span 
class="ptmrc8t-x-x-120">X10</span>
compiler can generate C++ or Java code and supports various communication interfaces
including sockets and MPI for communication between nodes on a parallel computing
system.
<!--l. 20--><p class="indent" >   In this thesis we present MIX10, a source-to-source compiler that helps to bridge the gap
between MATLAB, a language familiar to scientists, and X10, a language designed for high
                                                                                   

                                                                                   
performance computing systems. MIX10 statically compiles MATLAB programs to X10 and thus
allows scientists and engineers to write programs in MATLAB (or use old programs already
written in MATLAB) and still get the benefits of high performance computing without having to
learn a new language.Also, systems that use MATLAB for prototyping and C++ or Java for
production, can benefit from MIX10 by quickly convert- ing MATLAB prototypes to C++ or Java
programs via X10
<!--l. 30--><p class="indent" >   On one hand, all the aforementioned characteristics of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>make it a very user-friendly
and thus a popular application to develop software among a non-programmer community.
On the other hand, these same characteristics make <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>a difficult language to
compile statically. Even the de facto standard, Mathworks&#8217; implementation of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is
essentially an interpreter with a <span 
class="ptmri8t-x-x-120">JIT accelarator</span><span class="cite">[<a 
href="#Xmatlabjit">The02</a>]</span> which is generally slower than
statically compiled languages. GNU Octave, which is a popular open source alternative to
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>and is mostly compatible with <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, introduced JIT compilation only in
its most recent release 3.8 in March 2014. Before that it was implemented only as an
interpreter<span class="cite">[<a 
href="#XOctave">Oct</a>]</span>. Lack of formal language specification, unconventional semantics and closed
source make it even harder to write a compiler for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. These are some of the
challenges that <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>shares with other static compilers which convert <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
to C or Fortran. However, targeting <span 
class="ptmrc8t-x-x-120">X10 </span>raises some significant new challenges. For
example, <span 
class="ptmrc8t-x-x-120">X10 </span>is an object-oriented, heap-based, language with varying levels of high-level
abstractions for arrays and iterators of arrays. An open question was whether or not it was
possible to generate <span 
class="ptmrc8t-x-x-120">X10 </span>code that both maintains the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>semantics, but also
leads to code that is as efficient as state-of-the-art translators that target C and Fortran.
Finding an effective and efficient translation from <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to <span 
class="ptmrc8t-x-x-120">X10 </span>was not obvious,
and this thesis reports on the key problems we encountered and the solutions that we
designed and implemented in our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>system. By demonstrating that we can generate
sequential <span 
class="ptmrc8t-x-x-120">X10 </span>code that is as efficient as generated C or Fortran code, we then enabled the
possibility of leveraging the high performance nature of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s parallel constructs. To
demonstrate this, we exposed scalable concurrency in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>via <span 
class="ptmrc8t-x-x-120">X10 </span>and examined
how to use <span 
class="ptmrc8t-x-x-120">X10 </span>features to provide a good implementation for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s <span 
class="pcrr8t-x-x-120">parfor</span>
construct.
<!--l. 64--><p class="indent" >   Built on top of <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>static analysis framework<span class="cite">[<a 
href="#XJesseThesis">Doh11</a>,&#x00A0;<a 
href="#XTamerPaper">DH12b</a>]</span>, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>, together with its
                                                                                   

                                                                                   
set of reusable static analyses for performance optimization and extended support for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
features, ultimately aims to provide <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s ease of use, sequential performance comparable to
that provided by state-of-the art compilers targetting C and Fortran, to support parallel constructs
like <span 
class="pcrr8t-x-x-120">parfor </span>and to expose scalable concurrency.
<a 
 id="x1-9r1"></a>
<h3 class="sectionHead"><span class="titlemark">1.1    </span> <a 
 id="x1-10001"></a>Contributions</h3>
<!--l. 81--><p class="noindent" >The major contributions of this thesis are as follows:
      <dl class="description"><dt class="description">
<span 
class="ptmb8t-x-x-120">Identifying key challenges:</span> </dt><dd 
class="description">We  have  identified  the  key  challenges  in  performing  a
      semantics-preserving efficient translation of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to <span 
class="ptmrc8t-x-x-120">X10</span>.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Overall design of </span><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span><span 
class="ptmb8t-x-x-120">:</span> </dt><dd 
class="description">Building upon the <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>frontend and analysis framework,
      we  provide  the  design  of  the  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10  </span>source-to-source  translator  that  includes  a
      low-level <span 
class="ptmrc8t-x-x-120">X10 </span>IR and a template-based specialization framework for handling builtin
      operations.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Techniques for efficient compilation of </span><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="ptmb8t-x-x-120">arrays:</span> </dt><dd 
class="description">
      Arrays are the core of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. All data, including scalar values are represented as
      arrays in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. Efficient compilation of arrays is the key for good performance.
      <span 
class="ptmrc8t-x-x-120">X10  </span>provides  two  types  of  array  representations  for  multidimensional  arrays:  (1)
      Cilk-styled, region-based arrays and (2) rail-backed <span 
class="ptmri8t-x-x-120">simple </span>arrays. We compare and
      contrast these two array forms for a high performance computing language in context
      of being used as a target language and provide techniques to compile <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>arrays
      to two different representations of arrays provided by <span 
class="ptmrc8t-x-x-120">X10</span>.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Builtin handling framework:</span> </dt><dd 
class="description">We  have  designed  and  implemented  a  template-based
      system that allows us to generate specialized <span 
class="ptmrc8t-x-x-120">X10 </span>code for a collection of important
      <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>builtin operations.
                                                                                   

                                                                                   
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Code generation strategies for the sequential core:</span> </dt><dd 
class="description">There   are   some   very   significant
      differences between the semantics of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>and <span 
class="ptmrc8t-x-x-120">X10</span>. A key difference is that
      <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is dynamically-typed, whereas <span 
class="ptmrc8t-x-x-120">X10 </span>is statically-typed. Furthermore, the
      type rules are quite different, which means that the generated <span 
class="ptmrc8t-x-x-120">X10 </span>code must include
      the appropriate explicit type conversion rules, so as to match the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>semantics.
      Other  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>features,  such  as  multiple  returns  from  functions,  a  non-standard
      semantics for <span 
class="pcrr8t-x-x-120">for </span>loops, and a very general range operator, must also be handled
      correctly.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Code generation for concurrency in </span><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span><span 
class="ptmb8t-x-x-120">:</span> </dt><dd 
class="description"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10  </span>not  only  supports  all  the  key
      sequential  constructs  but  also  supports  concurrency  constructs  like  <span 
class="pcrr8t-x-x-120">parfor </span>and
      can handle vectorized instructions in a concurrent fashion. We have also introduced
      <span 
class="ptmrc8t-x-x-120">X10</span>-like concurrency constructs in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>via structured comments.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Safe use of integer variables:</span> </dt><dd 
class="description">Even after determining the correct use of <span 
class="ptmrc8t-x-x-120">X10 </span>arrays, we
      were still faced with a performance gap between the code generated by the C/Fortran
      systems, and the generated <span 
class="ptmrc8t-x-x-120">X10 </span>code generated by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>. Furthermore, we found
      that the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>system using the <span 
class="ptmrc8t-x-x-120">X10 </span>Java backend was often generating better code
      than with the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend, which was counter-intuitive.
      <!--l. 133--><p class="noindent" >We determined that a key remaining problem was overhead due to casting doubles to
      integers. This casting overhead was quite high, and was substantially higher for the
      C++ back-end than for the Java back-end (since the casting instructions are handled
      efficiently by the Java VM). This casting problem arises because the default data type
      for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>variables is double - even variables used to iterate through arrays, and
      to index into arrays typically have double type, even though they hold integral values.
      To tackle this issue we developed an <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis which determines which
      double variables can be safely converted to integer variables in the generated <span 
class="ptmrc8t-x-x-120">X10</span>
      code, hence greatly reducing the number of casting operations needed.
                                                                                   

                                                                                   
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Open implementation:</span> </dt><dd 
class="description">We   have   implemented   the   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10   </span>compiler   over   various
      <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>compiler  tools  provided  by  the  <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>toolkit.  In  the  process  we  also
      implemented  some  enhancements  to  these  existing  tools.  Our  implementation  is
      extensible and allows for others to make further improvements to the generated <span 
class="ptmrc8t-x-x-120">X10</span>
      code, or to reuse the analyses to generate code for other target languages.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Experimental evaluation:</span> </dt><dd 
class="description">We  have  experimented  with  our  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10  </span>implementation  on
      a  set  of  benchmarks.  Our  results  show  that  our  generated  code  is  almost  an
      order  of  magnitude  faster  than  the  Mathworks&#8217;  standard  JIT-based  system,  and
      is  competitive  with  other  state-of-the-art  tools  that  generate  C/Fortran.  Our  more
      detailed results show the importance of using our customized and optimized <span 
class="ptmrc8t-x-x-120">X10</span>
      array  representations,  and  we  demonstrate  the  effectiveness  of  the  <span 
class="ptmri8t-x-x-120">IntegerOkay</span>
      analysis. Finally, we show that our <span 
class="ptmrc8t-x-x-120">X10</span>-based treatment of <span 
class="pcrr8t-x-x-120">parfor </span>significantly
      outperforms <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>on our benchmarks.
      </dd></dl>
<a 
 id="x1-1001r8"></a>
<h3 class="sectionHead"><span class="titlemark">1.2    </span> <a 
 id="x1-20002"></a>Thesis Outline</h3>
<!--l. 167--><p class="noindent" >This thesis is divided into <a 
href="#x1-58001r11">11<!--tex4ht:ref: chap:Conclusions --></a> chapters, including this one and is structured as follows.
<!--l. 170--><p class="indent" >   <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-2001r2"><span 
class="ptmri8t-x-x-120">2</span><!--tex4ht:ref: chap:Xten --></a> provides an introduction to the <span 
class="ptmrc8t-x-x-120">X10 </span>language and describes how it compares to
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>from the point of view of language design. <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-15002r3"><span 
class="ptmri8t-x-x-120">3</span><!--tex4ht:ref: chap:Design --></a> gives a description of various
existing <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compiler tools upon which <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>is implemented, presents a high-level
design of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>, and explains the design and need of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR. In <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-18001r4"><span 
class="ptmri8t-x-x-120">4</span><!--tex4ht:ref: chap:Arrays --></a> we compare the
two kinds of arrays provided by <span 
class="ptmrc8t-x-x-120">X10</span>, identify when each of them must be used in the generated
code, identify and address challenges involved in efficient compilation of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>arrays.
<span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-28013r5"><span 
class="ptmri8t-x-x-120">5</span><!--tex4ht:ref: chap:Builtins --></a> describes the builtin handling framework used by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>to generate specialized code
for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>builtins used in the source program. <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-29031r6"><span 
class="ptmri8t-x-x-120">6</span><!--tex4ht:ref: chap:CodegenSeq --></a> gives a description of
efficient and effective code generation strategies for the core sequential constructs of
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. A description of code generation for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>construct is
                                                                                   

                                                                                   
provided in <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-35029r7"><span 
class="ptmri8t-x-x-120">7</span><!--tex4ht:ref: chap:CodegenCon --></a>, which also describes our strategy to introduce concurrency
constructs in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. In <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-38002r8"><span 
class="ptmri8t-x-x-120">8</span><!--tex4ht:ref: chap:Analyses --></a> we provide a description of the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis
to identify variables that are safe to be declared as <span 
class="pcrr8t-x-x-120">Long </span>type. <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-45001r9"><span 
class="ptmri8t-x-x-120">9</span><!--tex4ht:ref: chap:Evaluation --></a> provides
performance results for code generated using <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>for a suite of benchmarks. It
gives a comparison between performance achieved by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>generated code and
that generated by the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder and <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>compilers. <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-55001r10"><span 
class="ptmri8t-x-x-120">10</span><!--tex4ht:ref: chap:Related --></a> provides
an overview of related work and <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-58001r11"><span 
class="ptmri8t-x-x-120">11</span><!--tex4ht:ref: chap:Conclusions --></a> concludes and outlines possible future
work.
                                                                                   

                                                                                   
<a 
 id="x1-2001r2"></a>
<a 
 id="Q1-1-10"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;2</span>
<!--l. 389--><p class="noindent" ><span 
class="phvb8t-x-x-197">Introduction to the </span><span 
class="ptmrc8t-x-x-207">X10 </span><span 
class="phvb8t-x-x-197">Programming</span>
<span 
class="phvb8t-x-x-197">Language</span>
<!--l. 389--><p class="noindent" >___________________________________________________________________________________
<!--l. 10--><p class="indent" >   In this chapter, we describe key <span 
class="ptmrc8t-x-x-120">X10 </span>semantics and features to help
readers unfamiliar with <span 
class="ptmrc8t-x-x-120">X10 </span>to have a better understanding of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
compiler.<span class="footnote-mark"><a 
href="thesis2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-2002f1"></a> 
<!--l. 16--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">X10 </span>is an award winning open-source programming language being developed by IBM
Research. The goal of the <span 
class="ptmrc8t-x-x-120">X10 </span>project is to provide a productive and scalable programming
model for the new-age high performance computing architectures ranging from multi-core
processors to clusters and supercomputers&#x00A0;<span class="cite">[<a 
href="#Xx10">IBM12</a>]</span>.
<!--l. 22--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">X10</span>, like Java, is a class-based, strongly-typed, garbage-collected and object-oriented
language. It uses Asynchronous Partitioned Global Address Space (APGAS) model to support
concurrency and distribution&#x00A0;<span class="cite">[<a 
href="#Xspecs">SBP<sup><span 
class="zptmcm7t-x-x-90">+</span></sup>12</a>]</span>. The <span 
class="ptmrc8t-x-x-120">X10 </span>compiler has a <span 
class="ptmri8t-x-x-120">native backend </span>that
compiles <span 
class="ptmrc8t-x-x-120">X10 </span>programs to C++ and a <span 
class="ptmri8t-x-x-120">managed backend </span>that compiles <span 
class="ptmrc8t-x-x-120">X10 </span>programs to
Java.
<a 
 id="x1-2003r9"></a>
                                                                                   

                                                                                   
<h3 class="sectionHead"><span class="titlemark">2.1    </span> <a 
 id="x1-30001"></a>Overview of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s Key Sequential Features</h3>
<!--l. 39--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s sequential core is a container-based object-oriented language that is very similar to that of
Java or C++&#x00A0;<span class="cite">[<a 
href="#Xspecs">SBP<sup><span 
class="zptmcm7t-x-x-90">+</span></sup>12</a>]</span>. An <span 
class="ptmrc8t-x-x-120">X10 </span>program consists of a collection of classes, structs or interfaces,
which are the top-level compilation units. <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s sequential constructs like <span 
class="pcrr8t-x-x-120">if</span>-<span 
class="pcrr8t-x-x-120">else </span>statements,
<span 
class="pcrr8t-x-x-120">for </span>loops, <span 
class="pcrr8t-x-x-120">while </span>loops, <span 
class="pcrr8t-x-x-120">switch </span>statements, and exception handling constructs <span 
class="pcrr8t-x-x-120">throw </span>and
<span 
class="pcrr8t-x-x-120">try</span>&#x2026;<span 
class="pcrr8t-x-x-120">catch </span>are also same as those in Java. <span 
class="ptmrc8t-x-x-120">X10 </span>provides both, implicit coercions and explicit
conversions on types, and both can be defined on user-defined types. The <span 
class="pcrr8t-x-x-120">as </span>operator is used to
perform explicit type conversions; for example, <span 
class="pcrr8t-x-x-120">x as Long{self != 0} </span>converts <span 
class="pcrr8t-x-x-120">x </span>to type
<span 
class="pcrr8t-x-x-120">Long </span>and throws a runtime exception if its value is zero. Multi-dimensional arrays in <span 
class="ptmrc8t-x-x-120">X10</span>
are provided as user-defined abstractions on top of <span 
class="pcrr8t-x-x-120">x10.lang.Rail</span>, an intrinsic
one-dimensional array analogous to one-dimensional arrays in languages like C or Java. Two
families of multi-dimensional array abstractions are provided: <span 
class="ptmri8t-x-x-120">simple arrays</span>, which
provide a restricted but efficient implementation, and <span 
class="ptmri8t-x-x-120">region arrays </span>which provide a
flexible and dynamic implementation but are not as efficient as <span 
class="ptmri8t-x-x-120">simple arrays</span>. Listing <a 
href="#x1-3002r1">2.1<!--tex4ht:ref: lst:x10simple --></a>
shows a sequential <span 
class="ptmrc8t-x-x-120">X10 </span>program that calculates the value of <span 
class="zptmcm7m-x-x-120">&#x03C0; </span>using the Monte Carlo
method.<span class="footnote-mark"><a 
href="thesis3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-3001f2"></a> 
It highlights important sequential and object-oriented features of <span 
class="ptmrc8t-x-x-120">X10 </span>detailed in the following
subsections. It reads an argument from the console in an intrinsic 1 dimensions array(<span 
class="pcrr8t-x-x-120">Rail</span>) of
<span 
class="pcrr8t-x-x-120">String </span>and converts it to a <span 
class="pcrr8t-x-x-120">Long </span>value <span 
class="pcrr8t-x-x-120">N</span>. It then generates two random numbers and performs
computations on them in a loop from 1 to <span 
class="pcrr8t-x-x-120">N</span>. Finally, it calculates the value of <span 
class="zptmcm7m-x-x-120">&#x03C0; </span>and displays the
result on the console.
<!--l. 69--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s syntax is similar to that of Java. The object-oriented semantics are also similar to that
of Java. Mutable and immutable variables are denoted by keywords <span 
class="pcrr8t-x-x-120">var </span>and <span 
class="pcrr8t-x-x-120">val</span>
respectively. <span 
class="pcrr8t-x-x-120">for </span>loops can iterate over a <span 
class="ptmri8t-x-x-120">range </span>of values. For e.g. in listing <a 
href="#x1-3002r1">2.1<!--tex4ht:ref: lst:x10simple --></a>, the <span 
class="pcrr8t-x-x-120">for </span>loop
iterates over a <span 
class="pcrr8t-x-x-120">LongRange </span>of <span 
class="pcrr8t-x-x-120">1 </span>to <span 
class="pcrr8t-x-x-120">N</span>. A <span 
class="pcrr8t-x-x-120">LongRange </span>represents a range of <span 
class="pcrr8t-x-x-120">Long </span>type
integers.
   <!--l. 78-->
                                                                                   

                                                                                   
<a 
 id="x1-3002r1"></a>
<a 
 id="x1-3003"></a>
<div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-3004r1"></a></span><span 
class="pcrb8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">Random</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3005r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3006r3"></a></span><span 
class="pcrb8t-">public</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">SeqPi</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3007r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">public</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">main</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">args</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Rail</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">])</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3008r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">N</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">parse</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">args</span><span 
class="pcrr8t-">(0)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3009r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3010r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">rand</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Random</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3011r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">(1..</span><span 
class="pcrr8t-">N</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3012r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">rand</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">nextDouble</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3013r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">rand</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">nextDouble</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3014r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">if</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">++;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3015r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3016r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">pi</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">4*</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">N</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3017r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Console</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">OUT</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">println</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">~</span><span 
class="pcrr8t-">The</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">value</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">of</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">pi</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">is</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">~</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">pi</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3018r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-3019r16"></a></span><span 
class="pcrr8t-">}</span>
<br />
    <div class="caption" 
><span class="id">Listing&#x00A0;2.1:
    </span><span  
class="content">Sequential
    <span 
class="ptmrc8t-x-x-120">X10</span>
    program
    to
    calculate
    value
    of
    <span 
class="zptmcm7m-x-x-120">&#x03C0;</span>
    using
    Monte
    Carlo
    method</span></div><!--tex4ht:label?: x1-3000 -->
   </div>
<a 
 id="x1-3022r1"></a>
<h4 class="subsectionHead"><span class="titlemark">2.1.1    </span> <a 
 id="x1-40001"></a>Object-oriented Features</h4>
<!--l. 103--><p class="noindent" >A program consists of a collection of <span 
class="ptmri8t-x-x-120">top-level units</span>, where a unit is either a <span 
class="ptmri8t-x-x-120">class</span>, a <span 
class="ptmri8t-x-x-120">struct </span>or an
<span 
class="ptmri8t-x-x-120">interface</span>. A program can contain multiple units, however only one unit can be made <span 
class="pcrr8t-x-x-120">public </span>and
its name must be same as that of the program file. Similar to Java, access to these <span 
class="ptmri8t-x-x-120">top-level units </span>is
controlled by <span 
class="ptmri8t-x-x-120">packages</span>. Below is a description of the core object-oriented constructs in
<span 
class="ptmrc8t-x-x-120">X10</span>:
      <dl class="description"><dt class="description">
<span 
class="ptmb8t-x-x-120">Class</span> </dt><dd 
class="description">A class is a basic bundle of data and code. It consists of zero or more <span 
class="ptmri8t-x-x-120">members</span>
      namely <span 
class="ptmri8t-x-x-120">fields</span>, <span 
class="ptmri8t-x-x-120">methods</span>, <span 
class="ptmri8t-x-x-120">constructors</span>, and member classes and interfaces&#x00A0;<span class="cite">[<a 
href="#Xx10intro">IBM13b</a>]</span>.
      It also specifies the name of its <span 
class="ptmri8t-x-x-120">superclass</span>, if any and of the interfaces it <span 
class="ptmri8t-x-x-120">implements</span>.
      </dd><dt class="description">
                                                                                   

                                                                                   
<span 
class="ptmb8t-x-x-120">Fields</span> </dt><dd 
class="description">A field is a data item that belongs to a class. It can be mutable (specified by the
      keyword <span 
class="pcrr8t-x-x-120">var</span>) or immutable (specified by the keyword <span 
class="pcrr8t-x-x-120">val</span>). The type of a mutable
      field  must  be  always  be  specified,  however  the  type  of  an  immutable  field  may
      be omitted if it&#8217;s declaration specifies an <span 
class="ptmri8t-x-x-120">initializer</span>. Fields are by default instance
      fields  unless  marked  with  the  <span 
class="pcrr8t-x-x-120">static </span>keyword.  Instance  fields  are  inherited  by
      subclasses, however subclasses can shadow inherited fields, in which case the value
      of the shadowed field can be accessed by using the qualifier <span 
class="pcrr8t-x-x-120">super</span>.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Methods</span> </dt><dd 
class="description">A  method  is  a  named  piece  of  code  that  takes  zero  or  more  <span 
class="ptmri8t-x-x-120">parameters  </span>and
      returns zero or one values. The type of a method is the type of the return value or
      <span 
class="pcrr8t-x-x-120">void </span>if it does not return a value. If the return type of a method is not provided by
      the programmer, <span 
class="ptmrc8t-x-x-120">X10 </span>infers it as the least upper bound of the types of all expressions
      <span 
class="pcrr8t-x-x-120">e </span>in the method where the body of the method contains the statement <span 
class="pcrr8t-x-x-120">return e</span>.
      A method may have a type parameter that makes it <span 
class="ptmri8t-x-x-120">type generic</span>. An optional <span 
class="ptmri8t-x-x-120">method</span>
      <span 
class="ptmri8t-x-x-120">guard </span>can be used to specify constraints. All methods in a class must have a unique
      signature which consists of its name and types of its arguments.
      <!--l. 139--><p class="noindent" >Methods  may  be  inherited.  Methods  defined  in  the  superclass  are  available  in
      the subclasses, unless overridden by another method with same signature. Method
      overloading  allows  programmers  to  define  multiple  methods  with  same  name  as
      long  as  they  have  different  signatures.  Methods  can  be  access-controlled  to  be
      <span 
class="pcrr8t-x-x-120">private</span>, <span 
class="pcrr8t-x-x-120">protected </span>or <span 
class="pcrr8t-x-x-120">public</span>; <span 
class="pcrr8t-x-x-120">private </span>methods can only be accessed by
      other methods in the same class, <span 
class="pcrr8t-x-x-120">protected </span>methods can be accessed in the same
      class or its subclasses, and <span 
class="pcrr8t-x-x-120">public </span>methods can be accessed from any code. By
      default, all methods are <span 
class="ptmri8t-x-x-120">package protected </span>which means they can be accessed from
      any code in the same package.
      <!--l. 150--><p class="noindent" >Methods with the same name as that of the containing class are called constructors.
      They are used to instantiate a class.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Structs</span> </dt><dd 
class="description">A struct is just like a class, except that it does not support inheritance and may
                                                                                   

                                                                                   
      not be recursive. This allows structs to be implemented as <span 
class="ptmri8t-x-x-120">header-less </span>objects, which
      means that unlike a class, a struct can be represented by only as much memory as
      is necessary to represent its fields and with its methods compiled to static methods.
      It does not contain a <span 
class="ptmri8t-x-x-120">header </span>that contains data to represent meta-information about
      the object. The current version of <span 
class="ptmrc8t-x-x-120">X10 </span>(version 2.4) does not support mutability and
      references to structs, which means that there is no syntax to update the fields of a
      struct and structs are always passed by value.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Function literals</span> </dt><dd 
class="description"><span 
class="ptmrc8t-x-x-120">X10 </span>supports first-class functions. A function consists of a parameter
      list,  followed  optionally  by  a  return  type,  followed  by  <span 
class="pcrr8t-x-x-120">=&#x003E;</span>,  followed  by  the
      body  (an  expression).  For  example,  <span 
class="pcrr8t-x-x-120">(i:Int, j:Int) =&#x003E; (i&#x003C;j ? foo(i)</span>
      <span 
class="pcrr8t-x-x-120">: foo(j))</span>, is a function that takes parameters <span 
class="pcrr8t-x-x-120">i </span>and <span 
class="pcrr8t-x-x-120">j </span>and returns <span 
class="pcrr8t-x-x-120">foo(i) </span>if <span 
class="pcrr8t-x-x-120">i&#x003C;j</span>
      and <span 
class="pcrr8t-x-x-120">foo(j) </span>otherwise. A function can access immutable variables defined outside
      the body.
      </dd></dl>
<a 
 id="x1-4001r13"></a>
<h4 class="subsectionHead"><span class="titlemark">2.1.2    </span> <a 
 id="x1-50002"></a>Statements</h4>
<!--l. 174--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">X10 </span>provides all the standard statements similar to Java. Assignment, <span 
class="pcrr8t-x-x-120">if - else </span>and <span 
class="pcrr8t-x-x-120">while</span>
loop statements are identical to those in Java.
<!--l. 178--><p class="indent" >   <span 
class="pcrr8t-x-x-120">for </span>loops in <span 
class="ptmrc8t-x-x-120">X10 </span>are more advanced and apart from the standard C-like for loop, <span 
class="ptmrc8t-x-x-120">X10</span>
provides three different kinds of for loops:
      <dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="ptmbi8t-x-x-120">enhanced </span><span 
class="pcrb8t-x-x-120">for </span><span 
class="ptmb8t-x-x-120">loops </span>take an index specifier of the form <span 
class="pcrr8t-x-x-120">i in r</span>, where <span 
class="pcrr8t-x-x-120">r </span>is any value that
      implements <span 
class="pcrr8t-x-x-120">x10.lang.Iterable[T] </span>for some type <span 
class="pcrr8t-x-x-120">T</span>. Code listing <a 
href="#x1-5001r2">2.2<!--tex4ht:ref: lst:x10loop1 --></a> below shows
      an example of this kind of <span 
class="pcrr8t-x-x-120">for </span>loops: <!--l. 190-->
<a 
 id="x1-5001r2"></a>
<a 
 id="x1-5002"></a>
      <div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-5003r1"></a></span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">sum</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Rail</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">])</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5005r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5006r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5007r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5008r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5009r7"></a></span><span 
class="pcrr8t-">}</span>
                                                                                   

                                                                                   
      
      <br />
         <div class="caption" 
><span class="id">Listing&#x00A0;2.2:
         </span><span  
class="content">Example
         of
         enhanced
         for
         loop</span></div><!--tex4ht:label?: x1-5000 -->
      </div>
      </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="pcrb8t-x-x-120">for </span><span 
class="ptmb8t-x-x-120">loops over </span><span 
class="pcrb8t-x-x-120">LongRange </span>iterate over all the values enumerated by a <span 
class="pcrr8t-x-x-120">LongRange</span>(a range
      of consecutive <span 
class="pcrr8t-x-x-120">Long </span>type values). A <span 
class="pcrr8t-x-x-120">LongRange </span>is instantiated by an expression like
      <span 
class="pcrr8t-x-x-120">e1..e2 </span>and enumerates all the integer values from <span 
class="pcrr8t-x-x-120">a </span>to <span 
class="pcrr8t-x-x-120">b </span>(inclusive) where <span 
class="pcrr8t-x-x-120">e1 </span>evaluates
      to <span 
class="pcrr8t-x-x-120">a </span>and <span 
class="pcrr8t-x-x-120">e2 </span>evaluates to <span 
class="pcrr8t-x-x-120">b</span>. Listing <a 
href="#x1-5010r3">2.3<!--tex4ht:ref: lst:x10loop2 --></a> below shows an example of a <span 
class="pcrr8t-x-x-120">for </span>loop that uses
      <span 
class="pcrr8t-x-x-120">LongRange</span>: <!--l. 207-->
<a 
 id="x1-5010r3"></a>
<a 
 id="x1-5011"></a>
      <div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-5012r1"></a></span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">sum</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">N</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5013r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5014r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0..</span><span 
class="pcrr8t-">N</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5015r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5016r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5017r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5018r7"></a></span><span 
class="pcrr8t-">}</span>
      
      <br />
         <div class="caption" 
><span class="id">Listing&#x00A0;2.3:
         </span><span  
class="content">Example
         of
         for
         loop
         over
         <span 
class="pcrr8t-x-x-120">LongRange</span></span></div><!--tex4ht:label?: x1-5000 -->
      </div>
      </dd><dt class="description">
                                                                                   

                                                                                   
 </dt><dd 
class="description"><span 
class="pcrb8t-x-x-120">for </span><span 
class="ptmb8t-x-x-120">loops over </span><span 
class="pcrb8t-x-x-120">Region </span>allow to iterate over multiple dimensions simultaneously. A <span 
class="pcrr8t-x-x-120">Region</span>
      is a data structure that represents a set of <span 
class="ptmri8t-x-x-120">points </span>in multiple dimensions. For instance, a
      <span 
class="pcrr8t-x-x-120">Region </span>instantiated by the expression <span 
class="pcrr8t-x-x-120">Region.make(0..5,1..6) </span>creates a
      2-dimensional region of <span 
class="ptmri8t-x-x-120">points </span><span 
class="pcrr8t-x-x-120">(x,y) </span>where <span 
class="pcrr8t-x-x-120">x </span>ranges over <span 
class="pcrr8t-x-x-120">0..5 </span>and <span 
class="pcrr8t-x-x-120">y </span>over
      <span 
class="pcrr8t-x-x-120">1..6</span>. The natural order of iteration is lexicographic. Listing <a 
href="#x1-5019r4">2.4<!--tex4ht:ref: lst:x10loop3 --></a> below shows an
      example that calculates the sum of coordinates of all points in a given rectangle:
      <!--l. 226-->
<a 
 id="x1-5019r4"></a>
<a 
 id="x1-5020"></a>
      <div class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-5021r1"></a></span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">sum</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">M</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">N</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5022r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5023r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">R</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Region</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">regionarray</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">Region</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">make</span><span 
class="pcrr8t-">(0..</span><span 
class="pcrr8t-">M</span><span 
class="pcrr8t-">,0..</span><span 
class="pcrr8t-">N</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5024r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">([</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">R</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5025r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5026r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5027r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">result</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5028r8"></a></span><span 
class="pcrr8t-">}</span>
      
      <br />
         <div class="caption" 
><span class="id">Listing&#x00A0;2.4:
         </span><span  
class="content">Example
         of
         for
         loop
         over
         a
         2-D
         <span 
class="pcrr8t-x-x-120">Region</span></span></div><!--tex4ht:label?: x1-5000 -->
      </div>
      </dd></dl>
<a 
 id="x1-5029r14"></a>
<h4 class="subsectionHead"><span class="titlemark">2.1.3    </span> <a 
 id="x1-60003"></a>Arrays</h4>
<!--l. 243--><p class="noindent" >In order to understand the challenges of translating <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to <span 
class="ptmrc8t-x-x-120">X10</span>, one must understand the
different flavours and functionality of <span 
class="ptmrc8t-x-x-120">X10 </span>arrays.
<!--l. 247--><p class="indent" >   At the lowest level of abstraction, <span 
class="ptmrc8t-x-x-120">X10 </span>provides an intrinsic one-dimensional fixed-size array
called <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Rail</span></span></span> which is indexed by a <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Long</span></span></span> type value starting at <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">0</span></span></span>. This is the <span 
class="ptmrc8t-x-x-120">X10 </span>counterpart of
                                                                                   

                                                                                   
built-in arrays in languages like C or Java. In addition, <span 
class="ptmrc8t-x-x-120">X10 </span>provides two types of more
sophisticated array abstractions in packages, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x10.array</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x10.regionarray</span></span></span>.
      <dl class="description"><dt class="description">
<span 
class="ptmb8t-x-x-120">Rail-backed Simple arrays</span> </dt><dd 
class="description">are  a  high-performance  abstraction  for  multidimensional
      arrays in <span 
class="ptmrc8t-x-x-120">X10 </span>that support only rectangular dense arrays with zero-based indexing.
      Also, they support only up to three dimensions (specified statically) and row-major
      ordering. These restrictions allow effective optimizations on indexing operations on
      the underlying <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Rail</span></span></span>. Essentially, these multidimensional arrays map to a <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Rail</span></span></span> of
      size equal to number of elements in the array, in a row-major order.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Region arrays</span> </dt><dd 
class="description">are much more flexible. A <span 
class="ptmri8t-x-x-120">region </span>is a set of points of the same rank, where
      <span 
class="pcrr8t-x-x-120">Points </span>are the indexing units for arrays. Points are represented as n-dimensional
      tuples of integer values. The <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">rank</span></span></span> of a point defines the dimensionality of the array
      it indexes. The rank of a region is the rank of its underlying points. Regions provide
      flexibility of shape and indexing. <span 
class="ptmri8t-x-x-120">Region arrays </span>are just a set of elements with each
      element mapped to a unique point in the underlying region. The dynamicity of these
      arrays come at the cost of performance.
      </dd></dl>
<!--l. 275--><p class="noindent" >Both types of arrays also support distribution across places. A <span 
class="ptmri8t-x-x-120">place </span>is one of the central innovations
in <span 
class="ptmrc8t-x-x-120">X10</span>, which permits the programmer to deal with notions of locality. <span 
class="ptmri8t-x-x-120">places </span>are discussed in
more detail in section <a 
href="#x1-120004">2.2.4<!--tex4ht:ref: sec:places --></a>
<a 
 id="x1-6001r18"></a>
<h4 class="subsectionHead"><span class="titlemark">2.1.4    </span> <a 
 id="x1-70004"></a>Types</h4>
<!--l. 283--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">X10 </span>is a statically type-checked language: Every variable and expression has a type that is known
at compile-time and the compiler checks that the operations performed on an expression are
permitted by the type of that expression. The name <span 
class="pcrr8t-x-x-120">c </span>of a class or an interface is the most basic
form of type in <span 
class="ptmrc8t-x-x-120">X10</span>. There are no primitive types.
<!--l. 289--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">X10 </span>also allows <span 
class="ptmri8t-x-x-120">type definitions</span>, that allow a simple name to be supplied for a complicated
type, and for type aliases to be defined. For example, a type definition like <span 
class="pcrr8t-x-x-120">public static</span>
                                                                                   

                                                                                   
<span 
class="pcrr8t-x-x-120">type bool(b:Boolean) = Boolean{self=b} </span>allows the use of expression
<span 
class="pcrr8t-x-x-120">bool(true) </span>as a shorthand for type <span 
class="pcrr8t-x-x-120">Boolean{self=true}</span>.
      <dl class="description"><dt class="description">
<span 
class="ptmb8t-x-x-120">Generic types</span> </dt><dd 
class="description"><span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s generic types allow classes and interfaces to be declared parameterized by
      types. They allow the code for a class to be instantiated unbounded number of times, for
      different concrete types, in a type-safe fashion. For instance, the listing <a 
href="#x1-10001r5">2.5<!--tex4ht:ref: lst:x10GenType --></a> below shows a
      class <span 
class="pcrr8t-x-x-120">List[T]</span>, parameterized by type <span 
class="pcrr8t-x-x-120">T</span>, that can be replaced by a concrete type like <span 
class="pcrr8t-x-x-120">Int</span>
      at the time of instantiation (<span 
class="pcrr8t-x-x-120">var l:List[Int] = new List[Int](item)</span>).
      <!--l. 307-->
      <div class="lstlisting" id="listing-5"><span class="label"><a 
 id="x1-7001r1"></a></span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">List</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">T</span><span 
class="pcrr8t-">]{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-7002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">item</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">T</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-7003r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">tail</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">List</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">T</span><span 
class="pcrr8t-">]=</span><span 
class="pcrb8t-">null</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-7004r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">t</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">T</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-7005r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">item</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">t</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-7006r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-7007r7"></a></span><span 
class="pcrr8t-">}</span>
      
      </div>
      <!--l. 316--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">X10 </span>types are available at runtime, unlike Java(which erases them).
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Constrained types</span> </dt><dd 
class="description"><span 
class="ptmrc8t-x-x-120">X10 </span>allows the programmer to define <span 
class="pcrr8t-x-x-120">Boolean </span>expressions (restricted)
      constraints on a type <span 
class="pcrr8t-x-x-120">[</span>T]. For example, a variable of constrained type <span 
class="pcrr8t-x-x-120">Long{self != 0}</span>
      is of type <span 
class="pcrr8t-x-x-120">Long </span>and has a constraint that it can hold a value only if it is not equal to <span 
class="pcrr8t-x-x-120">0 </span>and
      throws a runtime error if the constraint is not satisfied. The permitted constraints include the
      predicates <span 
class="pcrr8t-x-x-120">== </span>and <span 
class="pcrr8t-x-x-120">!=</span>. These predicates may be applied to constraint terms. A constraint
      term is either a final variable visible at the point of definition of the constraint, or the special
      variable <span 
class="pcrr8t-x-x-120">self </span>or of the form <span 
class="pcrr8t-x-x-120">t.f </span>where <span 
class="pcrr8t-x-x-120">f </span>names a field, and <span 
class="pcrr8t-x-x-120">t </span>is (recursively) a constraint
      term.
      </dd></dl>
<a 
 id="x1-7008r11"></a>
<h3 class="sectionHead"><span class="titlemark">2.2    </span> <a 
 id="x1-80002"></a>Overview of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s Concurrency Features</h3>
<!--l. 337--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">X10 </span>is a high performance language that aims at providing productivity to the programmer. To
achieve that goal, it provides a simple yet powerful concurrency model that provides four
                                                                                   

                                                                                   
concurrency constructs that abstract away the low-level details of parallel programming from the
programmer, without compromising on performance. <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s concurrency model is based on the
Asynchronous Partitioned Global Address Space (APGAS) model&#x00A0;<span class="cite">[<a 
href="#Xapgaspaper">IBM13a</a>]</span>. The APGAS model
has a concept of global address space that allows a task in <span 
class="ptmrc8t-x-x-120">X10 </span>to refer to any object (local or
remote). However, a task may operate only on an object that resides in its partition of the address
space (local memory). Each task, called an <span 
class="ptmri8t-x-x-120">activity</span>, runs asynchronously parallel to each other. A
logical processing unit in <span 
class="ptmrc8t-x-x-120">X10 </span>is called a <span 
class="ptmri8t-x-x-120">place</span>. Each <span 
class="ptmri8t-x-x-120">place </span>can run multiple <span 
class="ptmri8t-x-x-120">activities</span>. There are
four types of concurrency constructs provided by <span 
class="ptmrc8t-x-x-120">X10</span>&#x00A0;<span class="cite">[<a 
href="#Xx10intro">IBM13b</a>]</span>, as described in the following
sections:
<a 
 id="x1-8001r19"></a>
<h4 class="subsectionHead"><span class="titlemark">2.2.1    </span> <a 
 id="x1-90001"></a>Async</h4>
<!--l. 353--><p class="noindent" >The fundamental concurrency construct in <span 
class="ptmrc8t-x-x-120">X10 </span>is <span 
class="pcrr8t-x-x-120">async</span>. The statement <span 
class="pcrr8t-x-x-120">async S </span>creates a new
<span 
class="ptmri8t-x-x-120">activity </span>to execute <span 
class="pcrr8t-x-x-120">S </span>and returns immediately. The current activity and the &#8220;forked" activity
execute asynchronously parallel to each other and have access to the same heap of objects as the
current activity. They communicate with each other by reading and writing shared variables.
There is no restriction on statement <span 
class="pcrr8t-x-x-120">S </span>in the sense that it can contain any other constructs
(including <span 
class="pcrr8t-x-x-120">async</span>). <span 
class="pcrr8t-x-x-120">S </span>is also permitted to refer to any immutable variable defined in lexically
enclosing scope.
<!--l. 363--><p class="indent" >   An activty is the fundamental unit of execution in <span 
class="ptmrc8t-x-x-120">X10</span>. It may be thought of as a very
light-weight thread of execution. Each activity has its own control stack and may invoke recursive
method calls. Unlike Java threads, activities in <span 
class="ptmrc8t-x-x-120">X10 </span>are unnamed. Activities cannot be aborted or
interrupted once they are in flight. They must proceed to completion, either finishing
correctly or by throwing an exception. An activity created by <span 
class="pcrr8t-x-x-120">async S </span>is said to be
<span 
class="ptmri8t-x-x-120">locally terminated </span>if <span 
class="pcrr8t-x-x-120">S </span>has terminated. It is said to be <span 
class="ptmri8t-x-x-120">globally terminated </span>if it has
terminated locally and all activities spawned by it recursively, have themselves globally
terminated.
<a 
 id="x1-9001r21"></a>
<h4 class="subsectionHead"><span class="titlemark">2.2.2    </span> <a 
 id="x1-100002"></a>Finish</h4>
<!--l. 374--><p class="noindent" >Global termination of an activity can be converted to local termination by using the <span 
class="pcrr8t-x-x-120">finish</span>
construct. This is necessary when the programmer needs to be sure that a statement <span 
class="pcrr8t-x-x-120">S </span>and all
                                                                                   

                                                                                   
the activities spawned transitively by <span 
class="pcrr8t-x-x-120">S </span>have terminated before execution of the next
statement begins. For instance in the listing <a 
href="#x1-10001r5">2.5<!--tex4ht:ref: lst:x10GenType --></a> below, the use of <span 
class="pcrr8t-x-x-120">finish </span>ensures
that the <span 
class="pcrr8t-x-x-120">Console.OUT.println(~a(1) = ~ + a(1)); </span>statement is executed
only after all the asynchronously executing operations (<span 
class="pcrr8t-x-x-120">async a(i) *= 2; </span>have
completed.
   <!--l. 383-->
<a 
 id="x1-10001r5"></a>
<a 
 id="x1-10002"></a>
<div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x1-10003r1"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-10004r2"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">Create</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Rail</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">of</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">size</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">10,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">with</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr8t-">th</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">element</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">initialized</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">to</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-10005r3"></a></span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Rail</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Rail</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">](10,(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">=&#x003E;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-10006r4"></a></span><span 
class="pcrb8t-">finish</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0..9)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-10007r5"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">asynchronously</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">every</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">value</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Rail</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-10008r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">async</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">*=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">2;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-10009r7"></a></span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-10010r8"></a></span><span 
class="pcrr8t-">Console</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">OUT</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">println</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">~</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(1)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">~</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(1)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-10011r9"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span>
<br />
    <div class="caption" 
><span class="id">Listing&#x00A0;2.5:
    </span><span  
class="content">Example
    use
    of
    <span 
class="pcrr8t-x-x-120">finish</span>
    construct</span></div><!--tex4ht:label?: x1-10000 -->
   </div>
<a 
 id="x1-10012r22"></a>
<h4 class="subsectionHead"><span class="titlemark">2.2.3    </span> <a 
 id="x1-110003"></a>Atomic</h4>
<!--l. 395--><p class="noindent" >The statement <span 
class="pcrr8t-x-x-120">atomic S </span>ensures that the statement <span 
class="pcrr8t-x-x-120">S </span>is executed in a single step with respect to
all other activities in the system. When <span 
class="pcrr8t-x-x-120">S </span>is being executed in one activity all other activities
containing <span 
class="pcrr8t-x-x-120">s </span>are suspended. However, the <span 
class="pcrr8t-x-x-120">atomic </span>statement <span 
class="pcrr8t-x-x-120">S </span>must be <span 
class="ptmri8t-x-x-120">sequential </span>(it should
not contain an <span 
class="pcrr8t-x-x-120">async </span>or <span 
class="pcrr8t-x-x-120">finish </span>staement), <span 
class="ptmri8t-x-x-120">non-blocking </span>(it should not contain a
blocking construct like <span 
class="pcrr8t-x-x-120">when</span>, explained below) and <span 
class="ptmri8t-x-x-120">local </span>(in this context, local means
place-local, that is, it must not contain an <span 
class="pcrr8t-x-x-120">at </span>construct, explained in Sec.&#x00A0;<a 
href="#x1-120004">2.2.4<!--tex4ht:ref: sec:places --></a>). Consider
the code fragment in listing <a 
href="#x1-11001r6">2.6<!--tex4ht:ref: lst:x10Atomic --></a>. It asynchronously adds <span 
class="pcrr8t-x-x-120">Long </span>values to a linked-list
<span 
class="pcrr8t-x-x-120">list </span>and simultaneously holds the size of the list in a variable <span 
class="pcrr8t-x-x-120">size</span>. The use of
<span 
class="pcrr8t-x-x-120">atomic </span>guarantees that no other operation, in any activity, is executed in between (or
                                                                                   

                                                                                   
simultaneously with) these two operations, which is necessary to ensure correctness of the
program.
   <!--l. 412-->
<a 
 id="x1-11001r6"></a>
<a 
 id="x1-11002"></a>
<div class="lstlisting" id="listing-7"><span class="label"><a 
 id="x1-11003r1"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">finish</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0..10)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11005r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">async</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">add</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11006r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11007r5"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11008r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">add</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11009r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">atomic</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11010r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">list</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">add</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11011r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">size</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">size</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11012r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11013r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11014r12"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span>
<br />
    <div class="caption" 
><span class="id">Listing&#x00A0;2.6:
    </span><span  
class="content">Example
    use
    of
    <span 
class="pcrr8t-x-x-120">atomic</span>
    construct</span></div><!--tex4ht:label?: x1-11000 -->
   </div>
<!--l. 428--><p class="indent" >   Note that, <span 
class="pcrr8t-x-x-120">atomic </span>is a syntactic sugar for the construct <span 
class="pcrr8t-x-x-120">when (c) </span>, which is the conditional
atomic statement based on binary condition <span 
class="pcrr8t-x-x-120">(</span>c). Statement <span 
class="pcrr8t-x-x-120">when (c) S </span>executes statement <span 
class="pcrr8t-x-x-120">S</span>
atomically only when <span 
class="pcrr8t-x-x-120">c </span>evaluates to true; if it is false, the execution blocks waiting for <span 
class="pcrr8t-x-x-120">c </span>to be
true. Condition <span 
class="pcrr8t-x-x-120">c </span>must be <span 
class="ptmri8t-x-x-120">sequential</span>, <span 
class="ptmri8t-x-x-120">non-blocking </span>and <span 
class="ptmri8t-x-x-120">local</span>.
<a 
 id="x1-11015r24"></a>
<h4 class="subsectionHead"><span class="titlemark">2.2.4    </span> <a 
 id="x1-120004"></a>At</h4>
<!--l. 435--><p class="noindent" >A <span 
class="ptmri8t-x-x-120">place </span>in <span 
class="ptmrc8t-x-x-120">X10 </span>is the fundamental processing unit. It is a collection of data and activities that
operate on that data. A program is run on a fixed number of places. The binding of places to
hardware resources (e.g. nodes in a cluster, accelerators) is provided externally by a configuration
file, independent of the program.
<!--l. 441--><p class="indent" >   The <span 
class="pcrr8t-x-x-120">at </span>construct provides a place-shifting operation, that is used to force execution of a
statement or an expression at a particular place. An activity executing <span 
class="pcrr8t-x-x-120">at (p) S </span>suspends
execution at the current place; The object graph <span 
class="zptmcm7m-x-x-120">G </span>at the current place whose roots are all the
variables <span 
class="zptmcm7m-x-x-120">V </span>used in <span 
class="pcrr8t-x-x-120">S </span>is serialized, and transmitted to place <span 
class="pcrr8t-x-x-120">p</span>, deserialized (creating a
                                                                                   

                                                                                   
graph <span 
class="zptmcm7m-x-x-120">G</span><span 
class="zptmcm7y-x-x-120">&#x2032; </span>isomorphic to <span 
class="zptmcm7m-x-x-120">G</span>), an environment is created with the variables <span 
class="zptmcm7m-x-x-120">V </span>bound to the
corresponding roots in <span 
class="zptmcm7m-x-x-120">G</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>, and <span 
class="pcrr8t-x-x-120">S </span>executed at <span 
class="pcrr8t-x-x-120">p </span>in this environment. On local termination of <span 
class="pcrr8t-x-x-120">S</span>,
computation resumes after <span 
class="pcrr8t-x-x-120">at (p) S </span>in the original location. The object graph is
not automatically transferred back to the originating place when <span 
class="pcrr8t-x-x-120">S </span>terminates: any
updates made to objects copied by an <span 
class="pcrr8t-x-x-120">at </span>will not be reflected in the original object
graph.
<a 
 id="x1-12001r20"></a>
<h3 class="sectionHead"><span class="titlemark">2.3    </span> <a 
 id="x1-130003"></a>Overview of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s Implementation and Runtime</h3>
<!--l. 460--><p class="noindent" >In order to understand the compilation flow of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler and enhancements made to
the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler for efficient use of <span 
class="ptmrc8t-x-x-120">X10 </span>as a target language for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, it is important to
understand the design of the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler and its runtime environment.
<a 
 id="x1-13001r26"></a>
<h4 class="subsectionHead"><span class="titlemark">2.3.1    </span> <a 
 id="x1-140001"></a><span 
class="ptmrc8t-x-x-120">X10 </span>Implementation</h4>
<!--l. 466--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">X10 </span>is implemented as a source-to-source compiler that translates <span 
class="ptmrc8t-x-x-120">X10 </span>programs to
either C++ or Java. This allows <span 
class="ptmrc8t-x-x-120">X10 </span>to achieve critical portability, performance and
interoperability objectives. The generated C++ or Java program is, in turn, compiled by
the platform C++ compiler to an executable or to class files by a Java compiler. The
C++ backend is referred to as <span 
class="ptmri8t-x-x-120">Native </span><span 
class="ptmrc8t-x-x-120">X10 </span>and the Java backend is called <span 
class="ptmri8t-x-x-120">Managed</span>
<span 
class="ptmrc8t-x-x-120">X10</span>.
<!--l. 473--><p class="indent" >   The source-to-source compilation approach in <span 
class="ptmrc8t-x-x-120">X10 </span>provides three main advantages: (1) It
makes <span 
class="ptmrc8t-x-x-120">X10 </span>available for a wide range of platforms; (2) It takes advantage of the underlying
classical and platform-specific optimizations in C++ or Java compilers, while the <span 
class="ptmrc8t-x-x-120">X10</span>
implementation includes only <span 
class="ptmrc8t-x-x-120">X10 </span>specific optimizations; and (3) It allows programmers to take
advantage of the existing C++ and Java libraries.
<!--l. 482--><p class="indent" >   Figure <a 
href="#x1-14001r1">2.1<!--tex4ht:ref: fig:x10compiler --></a> shows the overall architecture of the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler&#x00A0;<span class="cite">[<a 
href="#Xx10intro">IBM13b</a>]</span>.
<!--l. 485--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                   

                                                                                   
<a 
 id="x1-14001r1"></a>
                                                                                   

                                                                                   
<!--l. 487--><p class="noindent" ><img 
src="thesis1x.png" alt="PIC" class="graphics" width="346.89731pt" height="260.16347pt" ><!--tex4ht:graphics  
name="thesis1x.png" src="Figures/x10compiler.eps"  
-->
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;2.1: </span><span  
class="content">Architecture of the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler</span></div><!--tex4ht:label?: x1-14001r1 -->
                                                                                   

                                                                                   
<!--l. 490--><p class="indent" >   </div><hr class="endfigure">
<a 
 id="x1-14002r28"></a>
<h4 class="subsectionHead"><span class="titlemark">2.3.2    </span> <a 
 id="x1-150002"></a><span 
class="ptmrc8t-x-x-120">X10 </span>Runtime</h4>
<!--l. 493--><p class="noindent" >Figure <a 
href="#x1-15001r2">2.2<!--tex4ht:ref: fig:x10runtime --></a> shows the major components of the <span 
class="ptmrc8t-x-x-120">X10 </span>runtime and their relative hierarchy&#x00A0;<span class="cite">[<a 
href="#Xx10intro">IBM13b</a>]</span>.
<!--l. 496--><p class="indent" >   The runtime bridges the gap between application program and the low-level network transport
system and the operating system. X10RT, which is the lowest layer of the <span 
class="ptmrc8t-x-x-120">X10 </span>runtime,
provides abstraction and unification of the functionalities provided by various network
layers.
<!--l. 502--><p class="indent" >   The <span 
class="ptmrc8t-x-x-120">X10 </span>Language Native Runtime provides implementation of the sequential
core of the language. It is implemented in C++ for native <span 
class="ptmrc8t-x-x-120">X10 </span>and Java for Managed
<span 
class="ptmrc8t-x-x-120">X10</span>.
<!--l. 506--><p class="indent" >   XRX Runtime, the <span 
class="ptmrc8t-x-x-120">X10 </span>runtime in <span 
class="ptmrc8t-x-x-120">X10 </span>is the core of the <span 
class="ptmrc8t-x-x-120">X10 </span>runtime system. It provides
implementation for the primitive <span 
class="ptmrc8t-x-x-120">X10 </span>constructs for concurrency and distribution (<span 
class="pcrr8t-x-x-120">async</span>,
<span 
class="pcrr8t-x-x-120">finish</span>, <span 
class="pcrr8t-x-x-120">atomic </span>and <span 
class="pcrr8t-x-x-120">at</span>). It is primarily written in <span 
class="ptmrc8t-x-x-120">X10 </span>over a set of low-level APIs that
provide a platform-independent view of processes, threads, synchronization mechanisms and
inter-process communication.
<!--l. 513--><p class="indent" >   At the top of the <span 
class="ptmrc8t-x-x-120">X10 </span>runtime system, is a set of core class libraries that provide fundamental
data types, basic collections, and key APIs for concurrency and distribution.
<!--l. 517--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                   

                                                                                   
<a 
 id="x1-15001r2"></a>
                                                                                   

                                                                                   
<!--l. 519--><p class="noindent" ><img 
src="thesis2x.png" alt="PIC" class="graphics"><!--tex4ht:graphics  
name="thesis2x.png" src="Figures/x10rt.pdf"  
-->
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;2.2: </span><span  
class="content">Architecture of the <span 
class="ptmrc8t-x-x-120">X10 </span>runtime</span></div><!--tex4ht:label?: x1-15001r2 -->
                                                                                   

                                                                                   
<!--l. 522--><p class="indent" >   </div><hr class="endfigure">
                                                                                   

                                                                                   
<!--l. 397--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-15002r3"></a>
<a 
 id="Q1-1-32"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;3</span>
<!--l. 397--><p class="noindent" ><span 
class="phvb8t-x-x-197">Background and High-level Design of </span><span 
class="ptmrc8t-x-x-207">M<span 
class="small-caps">I</span>X10</span>
<!--l. 397--><p class="noindent" >___________________________________________________________________________________
<a 
 id="x1-15003r27"></a>
<h3 class="sectionHead"><span class="titlemark">3.1    </span> <a 
 id="x1-160001"></a>Background</h3>
<!--l. 5--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>is implemented on top of several existing <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compiler tools. The overall structure
is given in <span 
class="ptmri8t-x-x-120">Figure </span><a 
href="#x1-16001r1"><span 
class="ptmri8t-x-x-120">3.1</span><!--tex4ht:ref: Fig:Overview --></a>, where the new parts are indicated by the shaded boxes, and future work is
indicated by dashed boxes.
<!--l. 10--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                   

                                                                                   
<a 
 id="x1-16001r1"></a>
                                                                                   

                                                                                   
<div class="center" 
>
<!--l. 11--><p class="noindent" >
<!--l. 12--><p class="noindent" ><img 
src="thesis3x.png" alt="PIC" class="graphics"><!--tex4ht:graphics  
name="thesis3x.png" src="Figures/overview.pdf"  
-->
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;3.1: </span><span  
class="content">Overview of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>structure</span></div><!--tex4ht:label?: x1-16001r1 -->
</div>
                                                                                   

                                                                                   
<!--l. 15--><p class="indent" >   </div><hr class="endfigure">
<!--l. 17--><p class="indent" >   As illustrated at the top of the figure, a <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programmer only needs to provide an
entry-point <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>function (called <span 
class="pcrr8t-x-x-120">myprog.m </span>in this example), plus a collection of other
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>functions and libraries (directories of functions) which may be called, directly or
indirectly, by the entry point. The programmer may also specify the types and/or shapes of the
input parameters to the entry-point function. As shown at the bottom of the figure, our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
compiler automatically produces a collection of <span 
class="ptmrc8t-x-x-120">X10 </span>output files which contain the generated
<span 
class="ptmrc8t-x-x-120">X10 </span>code for all reachable <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>functions, plus one <span 
class="ptmrc8t-x-x-120">X10 </span>file called <span 
class="pcrr8t-x-x-120">mix10.x10 </span>which
contains generated and specialized <span 
class="ptmrc8t-x-x-120">X10 </span>code for the required builtin <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>functions. Thus,
from the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programmer&#8217;s point of view, the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler is quite simple to
use.
<!--l. 32--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is actually quite a complicated language to compile, starting with its rather unusual
syntax, which cannot be parsed with standard LALR techniques. There are several issues that
must be dealt with including distinguishing places where white space and new line characters
have syntactic meaning, and filling in missing <span class="lstinline"><span 
class="pcrb8t-">end</span></span> keywords, which are sometimes
optional. The <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>front-end handles the parsing of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>through a two step
process. There is a pre-processing step which translates <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programs to a cleaner
subset, called <span 
class="ptmri8t-x-x-120">Natlab</span>, which has a grammar that can be expressed cleanly for a LALR
parser. The <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>front-end delivers a high-level AST based on this cleaner grammar.
<!--l. 49--><p class="indent" >   After parsing, the next major phase of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>uses the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>S<span 
class="small-caps">A</span><span 
class="small-caps">F</span> </span>framework&#x00A0;<span class="cite">[<a 
href="#XMcSAFecoop12">DH12a</a>,&#x00A0;<a 
href="#XJesseThesis">Doh11</a>]</span>
to disambiguate identifiers using <span 
class="ptmri8t-x-x-120">kind analysis</span>&#x00A0;<span class="cite">[<a 
href="#XKindAnalysis">DHR11</a>]</span>, which determines if an identifier refers
to a <span 
class="ptmri8t-x-x-120">variable </span>or a <span 
class="ptmri8t-x-x-120">named function</span>. This is required because the syntax of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>does not
distinguish between variables and functions. For example, the expression <span class="lstinline"><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">)</span></span> could refer to four
different computations, <span class="lstinline"><span 
class="pcrr8t-">a</span></span> could be an array or a function, and <span class="lstinline"><span 
class="pcrr8t-">i</span></span> could refer to the builtin function
for the imaginary value <span 
class="zptmcm7m-x-x-120">i</span>, or it could refer to a variable <span class="lstinline"><span 
class="pcrr8t-">i</span></span>. The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>S<span 
class="small-caps">A</span><span 
class="small-caps">F</span> </span>framework also
simplifies the AST, producing a lower-level AST which is more amenable to subsequent
analysis.
<!--l. 62--><p class="indent" >   The next major phase is the Tamer&#x00A0;<span class="cite">[<a 
href="#XTamerPaper">DH12b</a>]</span>, which is a key component for any tool which
statically compiles <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. The Tamer generates an even more defined AST called <span 
class="ptmri8t-x-x-120">Tamer IR</span>, as
                                                                                   

                                                                                   
well as performing key interprocedural analyses to determine both the call graph and an estimate
of the base type and shape of each variable, at each program point. The call graph is needed to
determine which files (functions) need to be compiled, and the type and shape information is very
important for generating reasonable code when the target language is statically typed, as is the
case for <span 
class="ptmrc8t-x-x-120">X10</span>.
<!--l. 80--><p class="indent" >   The Tamer also provides an extensible <span 
class="ptmri8t-x-x-120">interprocedural value analysis </span>and an interprocedural
analysis framework that extends the intraprocedural framework provided by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>S<span 
class="small-caps">A</span><span 
class="small-caps">F</span></span>. Any static
backend will use the standard results of the Tamer, but is also likely to implement some
target-language-specific analyses which estimate properties useful for generating code in a
specific target language. Currently, we have implemented two analyses : (1) An analysis for
determining if a <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>variable is <span 
class="ptmri8t-x-x-120">real </span>or <span 
class="ptmri8t-x-x-120">complex </span>to enable support for complex numbers in
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>and other <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compilers based on <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>; and (2) <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis to identify
which variables can be safely declared to be of an integer type (<span 
class="pcrr8t-x-x-120">Int </span>or <span 
class="pcrr8t-x-x-120">Long</span>) instead of the
default type <span 
class="pcrr8t-x-x-120">Double</span>.
<!--l. 93--><p class="indent" >   For the purposes of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>, the output of the Tamer is a low-level, well-structured
AST, which along with key analysis information about the call graph, the types and
shapes of variables, and X10-specific information. These Tamer outputs are provided to
the code generator, which generates <span 
class="ptmrc8t-x-x-120">X10 </span>code, and which is the main focus of this
thesis.
<!--l. 99--><p class="indent" >   The <span 
class="ptmrc8t-x-x-120">X10 </span>source code generator actually gets inputs from two places. It uses the Tamer IR it
receives from the the Tamer to drive the code generation, but for expressions referring to
built-in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>functions it interacts with the <span 
class="ptmri8t-x-x-120">Built-in Handler </span>which used the built-in
template file we provide. We describe the functioning of the built-in handler in <span 
class="ptmri8t-x-x-120">Chapter</span>
<a 
href="#x1-28013r5"><span 
class="ptmri8t-x-x-120">5</span><!--tex4ht:ref: chap:Builtins --></a>.
<!--l. 106--><p class="indent" >   <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-18001r4"><span 
class="ptmri8t-x-x-120">4</span><!--tex4ht:ref: chap:Arrays --></a> concentrates on generating efficient code for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>arrays. <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-29031r6"><span 
class="ptmri8t-x-x-120">6</span><!--tex4ht:ref: chap:CodegenSeq --></a>
describes the code generation strategy for the sequential core of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, while <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-35029r7"><span 
class="ptmri8t-x-x-120">7</span><!--tex4ht:ref: chap:CodegenCon --></a>
describes our strategy to generate parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>construct, and
introducing <span 
class="ptmrc8t-x-x-120">X10 </span>like concurrency constructs in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. The focus of this thesis is to
address challenges in generating <span 
class="ptmri8t-x-x-120">efficient </span><span 
class="ptmrc8t-x-x-120">X10 </span>code whose performance is comparable to
state-of-the-art tools that generate more traditional imperative languages like C and
Fortran.
                                                                                   

                                                                                   
<a 
 id="x1-16002r33"></a>
<h3 class="sectionHead"><span class="titlemark">3.2    </span> <a 
 id="x1-170002"></a>High-level Design of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Compiler</h3>
<!--l. 117--><p class="noindent" >The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>code generator is the key component which makes the translation from the Tamer IR,
which is based on <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programming constructs and semantics, to <span 
class="ptmrc8t-x-x-120">X10</span>. The overall structure
of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>code generator is given in <span 
class="ptmri8t-x-x-120">Figure </span><a 
href="#x1-17001r2"><span 
class="ptmri8t-x-x-120">3.2</span><!--tex4ht:ref: Fig:x10 --></a>.
<!--l. 122--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                   

                                                                                   
<a 
 id="x1-17001r2"></a>
                                                                                   

                                                                                   
<div class="center" 
>
<!--l. 123--><p class="noindent" >
<!--l. 124--><p class="noindent" ><img 
src="thesis4x.png" alt="PIC" class="graphics" width="231.26378pt" height="249.84285pt" ><!--tex4ht:graphics  
name="thesis4x.png" src="Figures/x10.eps"  
-->
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;3.2: </span><span  
class="content">Structure of the MiX10 code generator</span></div><!--tex4ht:label?: x1-17001r2 -->
</div>
                                                                                   

                                                                                   
<!--l. 127--><p class="indent" >   </div><hr class="endfigure">
<!--l. 129--><p class="indent" >   The input to to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler is the call graph generated by Tamer and the Tame IR
annotated with the necessary analysis information like <span 
class="ptmri8t-x-x-120">shape</span>, <span 
class="ptmri8t-x-x-120">iscomplex</span>, and <span 
class="ptmri8t-x-x-120">type </span>and
<span 
class="ptmri8t-x-x-120">IntegerOkay</span>. Rather than do a direct code generation to <span 
class="ptmrc8t-x-x-120">X10 </span>source code, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>translates the
Tamer IR to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR, a general and extensible IR, designed by us, to represent <span 
class="ptmrc8t-x-x-120">X10</span>. This
translation is done by the <span 
class="ptmrc8t-x-x-120">X10 </span>IR generator module of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>. Finally, with the inputs from the
builtin handler and the <span 
class="ptmrc8t-x-x-120">X10 </span>IR generator (after the <span 
class="ptmrc8t-x-x-120">X10 </span>specific analyses and transformations
have been done), the <span 
class="ptmrc8t-x-x-120">X10 </span>source code generator generates the resultatnt <span 
class="ptmrc8t-x-x-120">X10 </span>source
code.
<a 
 id="x1-17002r30"></a>
<h4 class="subsectionHead"><span class="titlemark">3.2.1    </span> <a 
 id="x1-180001"></a>The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Intermediate Representation</h4>
<!--l. 141--><p class="noindent" >The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR is a low-level, three address like intermediate representation that is similar in
design to the Tamer IR and abstracts the <span 
class="ptmrc8t-x-x-120">X10 </span>constructs while capturing the static
information required to generate the <span 
class="ptmrc8t-x-x-120">X10 </span>source code. We have implemented the IR using
JastAdd&#x00A0;<span class="cite">[<a 
href="#Xekman04">EH04</a>,&#x00A0;<a 
href="#Xjastaddurl">jas</a>]</span>, which allows us to easily add new AST nodes by simply extending the
JastAdd specification grammar.
<!--l. 149--><p class="indent" >   There are three important reasons to use an IR, instead of directly generating the <span 
class="ptmrc8t-x-x-120">X10</span>
code:
      <ul class="itemize1">
      <li class="itemize">There are potentially two places that optimizations and transformations may happen:
      either  at  the  Tamer  IR  level  or  at  the  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10  </span>IR  level.  It  is  our  intent  to  put
      any analysis or transformation that is not <span 
class="ptmrc8t-x-x-120">X10</span>-specific into the Tamer IR, so that
      other back-ends can benefit from those improvements. However, optimizations and
      transformations that are specific to <span 
class="ptmrc8t-x-x-120">X10 </span>programming constructs (such as points and
      regions) and semantics will need to be done on the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR. Although we currently
      do not transform the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR very much, the ultimate goal is to support a variety
      of analyses and transformations that can be used to: (1) produce more efficient <span 
class="ptmrc8t-x-x-120">X10</span>
      code, and (2) produce more readable <span 
class="ptmrc8t-x-x-120">X10 </span>code.
      </li>
                                                                                   

                                                                                   
      <li class="itemize">There  are  <span 
class="ptmrc8t-x-x-120">X10  </span>constructs  that  can  be  pretty  printed  to  be  of  different  kinds,
      for  example  the  <span 
class="ptmrc8t-x-x-120">X10  </span>arrays,  which  can  either  be  simple  arrays,  region  arrays  or
      specialized  region  arrays,  and  <span 
class="ptmrc8t-x-x-120">X10  </span>for  loop  which  can  either  be  C-like  for  loop
      or  an  iterator  over  a  <span 
class="pcrr8t-x-x-120">LongRange </span>(used  in  generated  code  for  <span 
class="pcrr8t-x-x-120">parfor </span>loop).  It
      allows to abstract the vital information for a construct while leaving the actual syntax
      to  the  source  code  generator.  This  makes  it  easier  to  add  <span 
class="ptmrc8t-x-x-120">X10  </span>specific  analyses
      and transformations, and makes it easy to update the compiler whenever a new or
      improved variation of a construct is added.
      </li>
      <li class="itemize"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR can also be used as a convenient place to insert instrumentation code for
      the generated <span 
class="ptmrc8t-x-x-120">X10 </span>code.
      </li></ul>
<!--l. 178--><p class="indent" >   Appendix <a 
href="#x1-60317r2">B<!--tex4ht:ref: chap:irgrammar --></a> provides the JastAdd implementation of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR grammar.
                                                                                   

                                                                                   
<a 
 id="x1-18001r4"></a>
<a 
 id="Q1-1-38"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;4</span>
<!--l. 403--><p class="noindent" ><span 
class="phvb8t-x-x-197">Techniques for Efficient Compilation of</span>
<span 
class="ptmrc8t-x-x-207">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="phvb8t-x-x-197">Arrays</span>
<!--l. 403--><p class="noindent" >___________________________________________________________________________________
<!--l. 6--><p class="indent" >   Arrays are the core of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programming language. Every value in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
is a <span 
class="ptmri8t-x-x-120">Matrix </span>and has an associated array shape. Even scalar values are represented as
<span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">1 </span>arrays. Most of the data read and write operations involve accessing individual or
a set of array elements. Given the central role of arrays in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, it is of utmost
importance for our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler to find effective and efficient translations to <span 
class="ptmrc8t-x-x-120">X10</span>
arrays.
<!--l. 14--><p class="indent" >   Given the shape information provided by the shape analysis engine&#x00A0;<span class="cite">[<a 
href="#Xmc2for">LH14</a>]</span> built
into the <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>analysis framework&#x00A0;<span class="cite">[<a 
href="#XMcSAFecoop12">DH12a</a>,&#x00A0;<a 
href="#XJesseThesis">Doh11</a>,&#x00A0;<a 
href="#XTamerPaper">DH12b</a>]</span>, it was not hard to
compile <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>arrays to <span 
class="ptmrc8t-x-x-120">X10</span>. However, to generate <span 
class="ptmrc8t-x-x-120">X10 </span>code whose performance
would be competitive to the generated C code (via <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder) and the generated
Fortran code (via the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>compiler), was not straightforward, and required deeper
understanding of the <span 
class="ptmrc8t-x-x-120">X10 </span>array system and careful handling of several features of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
arrays.
<a 
 id="x1-18002r35"></a>
                                                                                   

                                                                                   
<h3 class="sectionHead"><span class="titlemark">4.1    </span> <a 
 id="x1-190001"></a>Simple Arrays or Region Arrays</h3>
<!--l. 25--><p class="noindent" >As described in Section <a 
href="#x1-60003">2.1.3<!--tex4ht:ref: subsec:ArrayDesc --></a>, <span 
class="ptmrc8t-x-x-120">X10 </span>provides two higher level abstractions for arrays, simple
arrays, a high performance but rigid abstraction, and region arrays, a flexible abstraction but not as
efficient as the simple arrays. In order to achieve more efficiency, our strategy is to use the simple
arrays whenever possible, and to fall back to the region arrays when necessary. Note that it is
possible to force the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler to use region arrays via a switch, for experimentation
purposes.
<a 
 id="x1-19001r37"></a>
<h4 class="subsectionHead"><span class="titlemark">4.1.1    </span> <a 
 id="x1-200001"></a>Compilation to Simple Arrays</h4>
<!--l. 34--><p class="noindent" >In dealing with the simple rail-backed arrays, there were two important challenges. First, we
needed to determine when it is safe to use the simple rail-backed arrays, and second, we needed
an implementation of simple rail-backed arrays that handles the column-major, 1-indexing, and
linearization operations required by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>.
<span class="paragraphHead"><a 
 id="x1-210001"></a><span 
class="ptmb8t-x-x-120">When to use simple rail-backed arrays:</span></span>
   After the shape analysis of the source <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>program, if shapes of all the arrays in the
program: (1) are known statically, (2) are supported by the <span 
class="ptmrc8t-x-x-120">X10 </span>implementation of simple arrays
and (3) the dimensionality of the shapes remain same at all points in the program; then <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
generates <span 
class="ptmrc8t-x-x-120">X10 </span>code that uses simple arrays.
<span class="paragraphHead"><a 
 id="x1-220001"></a><span 
class="ptmb8t-x-x-120">Column-major indexing:</span></span>
   In order to make <span 
class="ptmrc8t-x-x-120">X10 </span>simple arrays more compatible with <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, we modified the implementation
of the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Array_2</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Array_3</span></span></span> classes in <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x10.array</span></span></span> package to use column-major ordering instead
of the default row-major ordering when linearizing multidimensional arrays to the backing <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Rail</span></span></span>
storage.<span class="footnote-mark"><a 
href="thesis2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-22001f1"></a><span class="footnote-mark"><a 
 id="fn1x0">      <sup class="textsuperscript">1</sup></a></span><a 
href="http://www.sable.mcgill.ca/mclab/mix10/x10_update/" class="url" ><span 
class="pcrr8t-">http://www.sable.mcgill.ca/mclab/mix10/x10_update/</span></a> 
Since <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>uses column-major ordering to linearize arrays, this modification
also makes it trivial to support linear indexing operations in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>.
<span class="footnote-mark"><a 
href="thesis3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-22002f2"></a><span class="footnote-mark"><a 
 id="fn2x0">   <sup class="textsuperscript">2</sup></a></span><a 
href="http://www.mathworks.com/help/matlab/math/matrix-indexing.html" class="url" ><span 
class="pcrr8t-">http://www.mathworks.com/help/matlab/math/matrix-indexing.html</span></a>
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>naturally supports linear indexing for individual element access. More precisely, if the
number of subscripts in an array access is less than the number of dimensions of the array, the last
                                                                                   

                                                                                   
subscript is linearly indexed over the remaining number of dimensions in a column-major fashion.
Our modification to use column-major ordering for the backing <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Rail</span></span></span> make it easier and more
efficient to support linear indexing by allowing direct access to the underlying <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Rail</span></span></span> at the
calculated linear offset.
<!--l. 65--><p class="indent" >   Given that we can determine when it is safe to use the simple rail-backed arrays,
and our improved <span 
class="ptmrc8t-x-x-120">X10 </span>implementation of them, we then designed the appropriate
translations from <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to <span 
class="ptmrc8t-x-x-120">X10</span>, for array construction, array accesses for both individual
elements and ranges. Given the number of dimensions and the size of each dimension, it is
easy to construct a simple array. For example a two-dimensional array <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">A</span></span></span> of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">T</span></span></span> and
shape <span 
class="zptmcm7m-x-x-120">m</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7m-x-x-120">n </span>can be constructed using a statement like <span 
class="pcrr8t-x-x-120">val A:Array_2[T] = new</span>
<span 
class="pcrr8t-x-x-120">Array_2[T](m,n);</span>. Additional arguments can be passed to the constructor to initialize the
array. Another important thing to note is that <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>allows the use of keyword <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">end</span></span></span> or an
expression involving <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">end</span></span></span> (like <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">end-1</span></span></span>) as a subscript. <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">end</span></span></span> denotes the highest index
in that dimension. If the highest index is not known the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">numElems_i</span></span></span> property of
the simple arrays is used to get the number of elements in the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span>th dimension of the
array.
<a 
 id="x1-22003r40"></a>
<h4 class="subsectionHead"><span class="titlemark">4.1.2    </span> <a 
 id="x1-230002"></a>Compilation to Region Arrays</h4>
<!--l. 83--><p class="noindent" >With <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s dynamic nature and unconventional semantics, it is not always possible to
statically determine the shape of an arrays accurately. Luckily, with some thought to
a proper translation, <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s region arrays are flexible enough to support <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s
&#8220;wild" arrays. Also, since <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Point</span></span></span> objects can be a set of arbitrary integers, there is no
restriction on the starting index of the arrays. Region arrays can easily use one-based
indexing.
<span class="paragraphHead"><a 
 id="x1-240002"></a><span 
class="ptmb8t-x-x-120">Array construction:</span></span>
   Array construction for region arrays involves creating a region over a set of points (or index
objects) and assigning it to an array. Regions of arbitrary ranks can be created dynamically. For
example, consider the following <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code snippet:
                                                                                   

                                                                                   
   <div class="minipage"><!--l. 98-->
<div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-24001r1"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">foo</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">t</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bar</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24003r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">t</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24004r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24005r5"></a></span><span 
class="pcrb8t-">end</span>
</div>
</div>                                                                                 &#x00A0;
<div class="minipage"><!--l. 110-->
<div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-24006r1"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bar</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24007r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">if</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">3)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24008r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">zeros</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+1,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+2,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+3)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24009r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">else</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24010r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">zeros</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+1,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+2)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24011r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">end</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24012r7"></a></span><span 
class="pcrb8t-">end</span>
</div></div>
<!--l. 121--><p class="noindent" >In this code, the number of dimensions of array <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">t</span></span></span> and hence array <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> cannot be determined
statically at compile-time. In such case, it is not possible to generate <span 
class="ptmrc8t-x-x-120">X10 </span>code that uses
simple arrays, however, it can still be compiled to the following <span 
class="ptmrc8t-x-x-120">X10 </span>code for function
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">foo()</span></span></span>.
   <div class="minipage"><!--l. 128-->
<div class="lstlisting" id="listing-10"><span class="label"><a 
 id="x1-24013r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">foo</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24014r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">t</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24015r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">bar</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24016r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24017r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">t</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24018r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24019r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24020r8"></a></span><span 
class="pcrr8t-">}</span>
</div>
</div>                            <div class="minipage"><!--l. 143-->
<div class="lstlisting" id="listing-11"><span class="label"><a 
 id="x1-24021r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bar</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24022r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]=</span><span 
class="pcrb8t-">null</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24023r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">if</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">3)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24024r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24025r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">zeros</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+1,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+2,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+3)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24026r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24027r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">else</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24028r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24029r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">zeros</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+1,</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+2)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24030r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24031r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-24032r12"></a></span><span 
class="pcrr8t-">}</span>
</div></div>
<!--l. 159--><p class="noindent" >In this generated <span 
class="ptmrc8t-x-x-120">X10 </span>code, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">t</span></span></span> is an array of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Double</span></span></span> which can be created by copying
from another array returned by <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">bar(a)</span></span></span> without knowing the shape of the returned
array.
<span class="paragraphHead"><a 
 id="x1-250002"></a><span 
class="ptmb8t-x-x-120">Array access:</span></span>
   Subscripting operations to access individual elements are mapped to <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s region array
subscripting operation. If the rank of array is 4 or less, it is subscripted directly by integers
corresponding to subscripts in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>otherwise we create a <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Point</span></span></span> object from these integer
                                                                                   

                                                                                   
values and use it to subscript the array. In case an expression involving <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">end</span></span></span> is used for indexing
and the complete shape information is not available, method <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">max(Long</span><span 
class="pcrr8t-x-x-120">&#x00A0;i)</span></span></span>, provided by the
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Region</span></span></span> class is used, allowing to determine the highest index for a particular dimension at
runtime.
<span class="paragraphHead"><a 
 id="x1-260002"></a><span 
class="ptmb8t-x-x-120">Rank specialization:</span></span>
   Although region arrays can be used with minimal compile-time information, providing
additional static information can improve performance of the resultant code by eliminating
run-time checks involving provided information. One of the key specializations that we
introduced with use of region arrays is to specify the rank of an array in its declaration, whenever
it is known statically. For example if rank of an array <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">A</span></span></span> of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">T</span></span></span> is known to be two, it can be
declared as <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">val</span><span 
class="pcrr8t-x-x-120">&#x00A0;A:Array[T](2);</span></span></span>. This specialization provided better performance
compared to unspecialized code as shown in section&#x00A0;<a 
href="#x1-520006">9.6<!--tex4ht:ref: sec:EvalArrays --></a>.
<a 
 id="x1-26001r39"></a>
<h3 class="sectionHead"><span class="titlemark">4.2    </span> <a 
 id="x1-270002"></a>Handling the Colon Expression</h3>
<!--l. 189--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>allows the use of an expression such as <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a:b</span></span></span> (or <span 
class="pcrr8t-x-x-120">colon(a,b)</span>) to create a vector of
integers <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">[a,</span><span 
class="pcrr8t-x-x-120">&#x00A0;a+1,</span></span></span><span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">&#x00A0;a+2,</span><span 
class="pcrr8t-x-x-120">&#x00A0;...</span><span 
class="pcrr8t-x-x-120">&#x00A0;b]</span></span></span>. In another form, an expression like <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a:i:b</span></span></span> can be used to
specify an integer interval of size <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> between the elements of the resulting vector. Use of a
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">colon</span></span></span> expression for array subscripting takes all the elements of the array for which the
subscript in a particular dimension is in the vector created by the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">colon</span></span></span> expression in that
dimension.<span class="footnote-mark"><a 
href="thesis4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-27001f3"></a> 
Consider the following <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code:
   <!--l. 202-->
<div class="lstlisting" id="listing-12"><span class="label"><a 
 id="x1-27002r1"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">crazyArray</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27003r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ones</span><span 
class="pcrr8t-">(3,4,5)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27004r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">(1,2:3,:)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27005r4"></a></span><span 
class="pcrb8t-">end</span>
   </div>
                                                                                   

                                                                                   
<!--l. 209--><p class="noindent" >Here <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> is a three-dimensional array of shape <span 
class="zptmcm7t-x-x-120">3</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">4</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">5 </span>and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> is a sub-array of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> of shape <span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">2</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">5</span>.
Such array accesses can be handled by simply calling the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">getSubArray[T]()</span></span></span> that we have
implemented in a Helper class provided with the generated code. The generated <span 
class="ptmrc8t-x-x-120">X10 </span>code with
simple array for this example is as follows:
   <!--l. 216-->
<div class="lstlisting" id="listing-13"><span class="label"><a 
 id="x1-27006r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">crazyArray</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27007r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_3</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_3</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">ones</span><span 
class="pcrr8t-">(3,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">4,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">5)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27008r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_1</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_1</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">colon</span><span 
class="pcrr8t-">(2,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">3)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27009r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_3</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27010r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_3</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Helper</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">getSubArray</span><span 
class="pcrr8t-">(1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">(0)</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">(1)</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">5,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27011r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-27012r7"></a></span><span 
class="pcrr8t-">}</span>
   </div>
<!--l. 226--><p class="indent" >   The colon operator can also be used on the left hand side for an array set operation that
updates multiple values of the array. For example, in the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>statement <span 
class="pcrr8t-x-x-120">x(:,4) = y;</span>, all
the values of the fourth column of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> will be set to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> if <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> is a scalar or to corresponding values of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span>
if <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> is a column vector with length equal to the size of first dimension of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span>. To handle this kind of
operation we have implemented another helper method, <span 
class="pcrr8t-x-x-120">setSubArray()</span>. This method takes as
input, the target array, the bounds on each dimension, and the source array. <span 
class="pcrr8t-x-x-120">x(:,4) = y; </span>will be
translated by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>to <span 
class="pcrr8t-x-x-120">x = Helper.setSubArray(x, 1, x.numElems_1, 4, 4,</span>
<span 
class="pcrr8t-x-x-120">y);</span>
<!--l. 237--><p class="indent" >   We have implemented overloaded versions of the <span 
class="pcrr8t-x-x-120">getSubArray() </span>and the
<span 
class="pcrr8t-x-x-120">setSubArray() </span>methods for arrays of different dimensions. For region arrays, we provide the
same methods that operate on region arrays in a different version of the Helper class.
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>provides the correct version of the Helper class, based on what kind of arrays are
used.
<a 
 id="x1-27013r47"></a>
<h3 class="sectionHead"><span class="titlemark">4.3    </span> <a 
 id="x1-280003"></a>Array Growth</h3>
<!--l. 246--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>allows explicit array growth during runtime via the <span 
class="pcrr8t-x-x-120">horzcat() </span>and the <span 
class="pcrr8t-x-x-120">vertcat()</span>
builtin functions for array concatenation operations. In <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>this feature is supported for
simple arrays as long as the array growth does not change the number of dimensions of the array.
For region arrays, this feature is supported in full. For simple arrays, <span 
class="ptmrc8t-x-x-120">X10 </span>allows a variable
declared to be an array of rank i, to hold any array value of the same rank. For example, consider
                                                                                   

                                                                                   
the following set of statements: <!--l. 254-->
<div class="lstlisting" id="listing-14"><span class="label"><a 
 id="x1-28001r1"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28002r2"></a></span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28003r3"></a></span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">(3,4,0)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28004r4"></a></span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">(3,5,0)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28005r5"></a></span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28006r6"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span>
   </div>
<!--l. 262--><p class="indent" >   Here, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> is defined to be of type <span 
class="pcrr8t-x-x-120">Array_2[Long] </span>and can hold arrays of different sizes at
different points in the program.
<!--l. 265--><p class="indent" >   Region arrays, being more dynamic, also support array growth even if it changes the rank of
the array. For example, the following set of statements are valid in an <span 
class="ptmrc8t-x-x-120">X10 </span>program that uses
region arrays: <!--l. 268-->
<div class="lstlisting" id="listing-15"><span class="label"><a 
 id="x1-28007r1"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28008r2"></a></span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28009r3"></a></span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">Region</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">make</span><span 
class="pcrr8t-">(1..3,1..4)</span><span 
class="pcrr8t-">,0)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28010r4"></a></span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">Region</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">make</span><span 
class="pcrr8t-">(1..3,1..5,1..6)</span><span 
class="pcrr8t-">,1)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28011r5"></a></span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-28012r6"></a></span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">...</span>
   </div>
<!--l. 276--><p class="indent" >   Here <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> is a 2-dimensional array and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> is a 3-dimensional array.
<!--l. 279--><p class="indent" >   Section <a 
href="#x1-520006">9.6<!--tex4ht:ref: sec:EvalArrays --></a> discusses the performance results obtained by using different kinds of arrays and
provides a comparison of them, thus showing the efficiency of our approach for compiling
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>arrays to <span 
class="ptmrc8t-x-x-120">X10</span>.
                                                                                   

                                                                                   
<!--l. 408--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-28013r5"></a>
<a 
 id="Q1-1-49"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;5</span>
<!--l. 408--><p class="noindent" ><span 
class="phvb8t-x-x-197">Handling </span><span 
class="ptmrc8t-x-x-207">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="phvb8t-x-x-197">Builtins</span>
<!--l. 408--><p class="noindent" >___________________________________________________________________________________
<!--l. 1--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>builtin methods are the core of the language and one of the features that make it
popular among scientists. They provide a huge set of commonly used numerical functions. All the
operators, including the standard binary operators (<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">+,</span><span 
class="pcrr8t-x-x-120">&#x00A0;-,</span><span 
class="pcrr8t-x-x-120">&#x00A0;*,/</span></span></span>), comparison operators
(<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">&#x003C;,</span><span 
class="pcrr8t-x-x-120">&#x00A0;&#x003E;,</span><span 
class="pcrr8t-x-x-120">&#x00A0;&#x003C;=,</span><span 
class="pcrr8t-x-x-120">&#x00A0;&#x003E;=,</span><span 
class="pcrr8t-x-x-120">&#x00A0;==</span></span></span>) and logical operators (<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">&amp;,</span><span 
class="pcrr8t-x-x-120">&#x00A0;&amp;&amp;,</span><span 
class="pcrr8t-x-x-120">&#x00A0;|,</span><span 
class="pcrr8t-x-x-120">&#x00A0;||</span></span></span>) are merely syntactic sugar for
corresponding builtin methods that take the operands as arguments. For example an expression
like <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a+b</span></span></span> is actually implemented as <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">plus(a,b)</span></span></span>. An important thing to note is that unlike most
programming languages, all the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>builtin methods by default operate on matrix values as a
whole. For example <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a*b</span></span></span> or <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">mtimes(a,b)</span></span></span> actually performs matrix multiplication on matrix
values <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span>. However, most of the builtin methods also accept one or more scalar, or more
accurately, <span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">1 </span>matrix arguments. Builtin methods are overloaded to accept almost all
possible shapes of arguments. Thus <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">mtimes(a,b)</span></span></span> can have both <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span> as matrix
arguments (including <span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">1 </span>matrices) with number of columns in <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> equal to number
of rows in <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span>, in which case the result is a matrix multiplication of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span> or one of
them can be a <span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">1 </span>matrix and other can be a matrix of any size and the result is a
matrix containing each element of the non-scalar argument times the scalar argument.
Wherever possible, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>builtins also support complex numerical values. <span 
class="ptmrc8t-x-x-120">X10 </span>on
the other hand, like most of the programming languages operates on scalar values by
                                                                                   

                                                                                   
default.
<!--l. 26--><p class="indent" >   Due to the fact that <span 
class="ptmrc8t-x-x-120">X10 </span>is still new and evolving, it has a very limited set of libraries,
specially to support a large subset of available <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>builtin methods. The <span 
class="ptmrc8t-x-x-120">X10 </span>Global Matrix
Library (GML) supports double-precision matrix operations however it is still not as extensive as
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s set of operations and it poses some restrictions:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-28015x1">It works on values of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Matrix</span></span></span> instead of <span 
class="ptmrc8t-x-x-120">X10 </span>type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Array</span></span></span> which means it
      needs explicit conversion of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Array</span></span></span> values to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Matrix</span></span></span> values before performing a
      matrix operation and and then a conversion of the results back to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Array</span></span></span> type. This
      conversion may be a large overhead, especially for small data sizes.
      </li>
      <li 
  class="enumerate" id="x1-28017x2">GML is limited to Matrix values of two dimensions and containing elements of type
      <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Double</span></span></span>, whereas many <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>builtin methods support values of greater number
      of dimensions.
      </li>
      <li 
  class="enumerate" id="x1-28019x3">GML  currently  does  not  support  complex  numerical  values  whereas  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
      naturally supports them.
      </li>
      <li 
  class="enumerate" id="x1-28021x4">Currently GML requires a separate installation and configuration which is non-trivial
      specially for scientists who need something that works out of the box.
      </li></ol>
<!--l. 55--><p class="indent" >   Due to above restrictions, <span 
class="ptmrc8t-x-x-120">X10 </span>Global Matrix Library is useful in some situations, for
example when there is a matrix multiplication of a very large data size, but cannot be used or is
not a good choice for a large number of operations.
<!--l. 60--><p class="indent" >   For a language with open-sourced libraries, it would be possible to actually compile the
library methods to <span 
class="ptmrc8t-x-x-120">X10</span>. However, many <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>libraries are closed source and thus it is not
possible to translate them to <span 
class="ptmrc8t-x-x-120">X10</span>.
<a 
 id="x1-28022r43"></a>
                                                                                   

                                                                                   
<h4 class="subsectionHead"><span class="titlemark">5.0.1    </span> <a 
 id="x1-290001"></a> The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Builtin Support Framework</h4>
<!--l. 66--><p class="noindent" >We decided to write our own <span 
class="ptmrc8t-x-x-120">X10 </span>implementations of the commonly used <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
builtin methods. Currently we have implemented only those methods that are used in our
benchmarks. In this thesis, we concentrate on how these methods are included in the
generated <span 
class="ptmrc8t-x-x-120">X10 </span>code with minimal loss of readability and performance rather than the actual
implementation.
<!--l. 73--><p class="indent" >   The code below shows the <span 
class="ptmrc8t-x-x-120">X10 </span>code for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>builtin method <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">plus(a,b)</span></span></span> involving
2-dimensional simple arrays.
<!--l. 76--><p class="noindent" ><!--l. 77-->
<div class="lstlisting" id="listing-16"><span class="label"><a 
 id="x1-29001r1"></a></span><span 
class="pcrb8t-">public</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">],</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">])</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29003r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_1</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_2</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29004r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29005r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29006r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29007r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29008r8"></a></span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29009r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29010r10"></a></span><span 
class="pcrb8t-">public</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">])</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29011r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_1</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_2</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29012r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29013r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29014r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29015r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29016r16"></a></span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29017r17"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29018r18"></a></span><span 
class="pcrb8t-">public</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">],</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29019r19"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_1</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_2</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29020r20"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29021r21"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29022r22"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29023r23"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29024r24"></a></span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29025r25"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29026r26"></a></span><span 
class="pcrb8t-">public</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29027r27"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29028r28"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29029r29"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-29030r30"></a></span><span 
class="pcrr8t-">}</span>
   </div>
<!--l. 110--><p class="indent" >   This <span 
class="ptmrc8t-x-x-120">X10 </span>code contains four overloaded versions (and it still does not contain methods to
support complex values, variables of types other than Double, simple arrays of other dimensions,
and region arrays) based on whether the arguments are scalar or <span 
class="pcrr8t-x-x-120">Array_2 </span>and their relative
position in the list of arguments.
<!--l. 116--><p class="indent" >   Including all the overloaded versions and versions specialized for arrays of different
dimensions or region arrays, in the generated <span 
class="ptmrc8t-x-x-120">X10 </span>code would result in lot of lookup overhead,
would require producing redundant code (versions of methods with arguments of similar shape
but different types will have the same algorithm) and would generate large code with less
readability. Instead we designed a specialization technique that selects the appropriate
versions of only the methods used in the source <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>program. Note that the use of
generic types to handle arguments of different types is not always a good idea, since
several builtin implementations involve calls to <span 
class="ptmrc8t-x-x-120">X10 </span>library functions which are not
defined on generic types. For example, functions in the <span 
class="pcrr8t-x-x-120">x10.lang.Math </span>librarry like
<span 
class="pcrr8t-x-x-120">floor(Double a)</span>, <span 
class="pcrr8t-x-x-120">max(Double a, Double b)</span>, etc. do not take generic type
arguments.
<!--l. 129--><p class="indent" >   After studying numerous builtin methods we categorized them into the following five
categories:
                                                                                   

                                                                                   
      <dl class="description"><dt class="description">
<span 
class="ptmb8t-x-x-120">Type 1:</span> </dt><dd 
class="description">All the parameters are scalar values or no parameters.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Type 2:</span> </dt><dd 
class="description">All the parameters are arrays.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Type 3:</span> </dt><dd 
class="description">First parameter is scalar, rest of the parameters are arrays.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Type 4:</span> </dt><dd 
class="description">Last parameter is scalar, rest of the parameters are arrays.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Type 5:</span> </dt><dd 
class="description">Any other type(Default).</dd></dl>
<!--l. 140--><p class="indent" >   Each of these categories, except <span 
class="ptmri8t-x-x-120">Type 5</span>, uses similar code template for different types of
values. Note that due to the three address code-like structure of Tame IR, any call to a builtin
almost always contains zero, one or two arguments. For builtin calls like <span 
class="pcrr8t-x-x-120">horzcat</span>
and <span 
class="pcrr8t-x-x-120">vertcat </span>which may contain variable number of arguments, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>packs all
the arguments in a <span 
class="pcrr8t-x-x-120">Rail </span>and passes a single argument of type <span 
class="pcrr8t-x-x-120">Rail</span>. Accordingly,
these builtins are implemented in <span 
class="ptmri8t-x-x-120">Type 2 </span>category and receive a single argument of type
<span 
class="pcrr8t-x-x-120">Rail</span>.
<!--l. 149--><p class="indent" >   We build an XML file that contains the method bodies for each category for every builtin
method (that we support). The XML also contains specialized implementations of every builtin
for different kinds of arrays. We implement the following strategy to select and generate the
correct and required methods. First, we make a pass through the AST to make a list of all the
builtin methods used in the source <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>program. Next, we parse the XML file
once and read in the <span 
class="ptmrc8t-x-x-120">X10 </span>code templates for all the categories of the builtin methods
collected in the first step. Next, whenever a call to a builtin method is made, based on the
results of the value analysis we: (1) Identify the required specialization for the method
(simple array or region array); and (2) generate the correct method header and select
the corresponding builtin template in the required specialization for that method. The
generated methods are finally written to a <span 
class="ptmrc8t-x-x-120">X10 </span>class file named <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Mix10.x10</span></span></span>. In the
                                                                                   

                                                                                   
code generated for actual <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>program, the call to a builtin method is simply
replaced by a call to the corresponding method in the Mix10 class. For example, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
expression <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">plus(a,b)</span></span></span> is translated to <span 
class="ptmrc8t-x-x-120">X10 </span>expression <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Mix10.plus(a,b)</span></span></span>. Appendix <a 
href="#x1-60002r1">A<!--tex4ht:ref: chap:Builtinxml --></a>
demonstrates the structure of the builtin XML with an example implementation of the builtin
<span 
class="pcrr8t-x-x-120">plus</span>.
<!--l. 169--><p class="indent" >   Using the above approach not only improves the readability of the generated code, but it also
allows for future extensibility, better maintenance and more specialization. Specializations that we
plan to add in future are: (1) the ability to use the Global Matrix Library for the available methods
in it and whenever the data size is large enough; and (2) concurrent versions of the relevant
builtins to support the execution of vector instructions in parallel fashion, as described in
section <a 
href="#x1-380003">7.3<!--tex4ht:ref: sec:parvec --></a>. We also encourage advanced users to mdoify the generated <span 
class="pcrr8t-x-x-120">Mix10.x10 </span>file
to enhance or add builtin implementations for higher performance of the generated
code.
                                                                                   

                                                                                   
<!--l. 412--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-29031r6"></a>
<a 
 id="Q1-1-51"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;6</span>
<!--l. 412--><p class="noindent" ><span 
class="phvb8t-x-x-197">Code Generation for the Sequential Core</span>
<!--l. 412--><p class="noindent" >___________________________________________________________________________________
<!--l. 1--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is a programming language designed specifically for numerical computations. Every
value is a <span 
class="ptmri8t-x-x-120">Matrix </span>and has an associated array shape. Even scalar values are <span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">1 </span>matrices. Vectors
are <span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7m-x-x-120">n </span>or <span 
class="zptmcm7m-x-x-120">n</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">1 </span>matrices. All the values are by default of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">double</span></span></span>. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>naturally
supports imaginary components for all numerical values and almost all operators and library
functions support complex inputs. In the rest of this chapter we describe some of the key features
of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>that demonstrate what makes <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>different and challenging to compile
statically and techniques used by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>to translate these &#8220;wild" features to <span 
class="ptmrc8t-x-x-120">X10</span>. We provide
necessary details on the various <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>constructs as we discuss them, however for the readers
who are totally unfamiliar with <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, we suggest reading chapter 2 of the M.Sc. thesis on the
Tamer framework&#x00A0;<span class="cite">[<a 
href="#Xadubra12">Dub12</a>]</span>.
<a 
 id="x1-29032r48"></a>
<h3 class="sectionHead"><span class="titlemark">6.1    </span> <a 
 id="x1-300001"></a>Methods</h3>
<!--l. 17--><p class="noindent" >A function definition in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>takes one or more input arguments and returns one or more
values. A typical <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>function looks as follows:
   <!--l. 21-->
                                                                                   

                                                                                   
<div class="lstlisting" id="listing-17"><span class="label"><a 
 id="x1-30001r1"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">foo</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+3;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30003r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">-3;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30004r4"></a></span><span 
class="pcrb8t-">end</span>
   </div>
<!--l. 28--><p class="indent" >   This function has two input arguments <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span> that can be of any type and any shape and
returns two values <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> of the same shape as <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span> respectively and of types determined by
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s type conversion rules. The Tamer IR provides a list of input arguments and a list of
return values for a function. The interprocedural value analysis identifies the types, shapes
and whether they are complex numerical values for all the arguments and the return
values.
<!--l. 37--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>functions are mapped to <span 
class="ptmrc8t-x-x-120">X10 </span>methods. If it is the entry function, the type of the
input argument is specified by the user (Tame IR requires to have an entry function or a driver
function with one argument. This function may call other functions with any number of input
arguments). For other functions the parameter types are computed by the value analysis
performed by the Tamer on the Tame IR. The type information computed includes the type of the
value, its shape and whether it is a complex value. Other statements in the function block are
processed recursively and corresponding nodes are created in the <span 
class="ptmrc8t-x-x-120">X10 </span>IR. Finally, if there are
any return values, as determined by the Tame IR, a return statement is inserted in the
<span 
class="ptmrc8t-x-x-120">X10 </span>IR at the end of the method. If the function returns only one value, say <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> then the
inserted statement is simply <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">return</span><span 
class="pcrr8t-x-x-120">&#x00A0;x;</span></span></span> but if the function returns more than one
values (which is quite common in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>) then we return a <span 
class="pcrr8t-x-x-120">Rail </span>of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Any</span></span></span> whose
elements are the values that are returned. So, for the above example the return statement is
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">return</span><span 
class="pcrr8t-x-x-120">&#x00A0;[x</span><span 
class="pcrr8t-x-x-120">&#x00A0;as</span><span 
class="pcrr8t-x-x-120">&#x00A0;Any,</span><span 
class="pcrr8t-x-x-120">&#x00A0;y</span><span 
class="pcrr8t-x-x-120">&#x00A0;as</span><span 
class="pcrr8t-x-x-120">&#x00A0;Any];</span></span></span>. Note that the use of short syntactic form for <span 
class="pcrr8t-x-x-120">Rail</span>
construction improves the readability of the generated code. Below is the generated code for the
simple example above.
   <!--l. 58-->
<div class="lstlisting" id="listing-18"><span class="label"><a 
 id="x1-30005r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">foo</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30006r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">3.3;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30007r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30008r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t1</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">3.2;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30009r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">minus</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t1</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30010r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Any</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">y</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Any</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-30011r7"></a></span><span 
class="pcrr8t-">}</span>
   </div>
<!--l. 68--><p class="indent" >   Also note that the variables <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">mc_t0</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">mc_t1</span></span></span> are introduced by Tamer in the Tame
                                                                                   

                                                                                   
IR.
<a 
 id="x1-30012r52"></a>
<h3 class="sectionHead"><span class="titlemark">6.2    </span> <a 
 id="x1-310002"></a>Types, Assignments and Declarations</h3>
<!--l. 74--><p class="noindent" ><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>provides following basic types:
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">double,</span><span 
class="pcrr8t-x-x-120">&#x00A0;single</span></span></span>: floating point values
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">uint8,</span><span 
class="pcrr8t-x-x-120">&#x00A0;uint16,</span><span 
class="pcrr8t-x-x-120">&#x00A0;uint32,</span><span 
class="pcrr8t-x-x-120">&#x00A0;uint64</span></span></span>: unsigned integer values
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">int8,</span><span 
class="pcrr8t-x-x-120">&#x00A0;int16,</span><span 
class="pcrr8t-x-x-120">&#x00A0;in32,</span><span 
class="pcrr8t-x-x-120">&#x00A0;int64</span></span></span>: integer values
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">logical</span></span></span>: boolean values
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">char</span></span></span>: character values (strings are vectors of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">char</span></span></span>)</li></ul>
<!--l. 83--><p class="indent" >   These basic types are naturally mapped to <span 
class="ptmrc8t-x-x-120">X10 </span>base types as follows. Floating point values
are mapped to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Double</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Float</span></span></span> respectively, unsigned integers are mapped to
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">UByte,</span><span 
class="pcrr8t-x-x-120">&#x00A0;UShort,</span><span 
class="pcrr8t-x-x-120">&#x00A0;UInt</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">ULong</span></span></span>, integer values are mapped to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Byte,</span><span 
class="pcrr8t-x-x-120">&#x00A0;Short,</span><span 
class="pcrr8t-x-x-120">&#x00A0;Int</span></span></span>
and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Long</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">logical</span></span></span> is mapped to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Boolean</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">char</span></span></span> is mapped to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Char</span></span></span> (vector of chars is
mapped to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">String</span></span></span> type). If the shape of an identifier of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">T</span></span></span> is greater than <span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">1 </span>it is mapped
to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Array[T]</span></span></span>. The type conversion rules are quite different from standard languages. For
example, an operation involving a <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">double</span></span></span> and an <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">int32</span></span></span> results in a value of type
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">int32</span></span></span>.<span class="footnote-mark"><a 
href="thesis2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-31001f1"></a><span class="footnote-mark"><a 
 id="fn1x0">      <sup class="textsuperscript">1</sup></a></span><span 
class="ptmr8t-">The type rules are explained in detail in the Tamer documents, </span><a 
href="www.sable.mcgill.ca/mclab/tamer.html." class="url" ><span 
class="pcrr8t-">www.sable.mcgill.ca/mclab/tamer.html.</span></a> 
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>inserts an explicit typecast wherever required.
<!--l. 96--><p class="indent" >   All the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>operators are designed to work on matrix values and are provided as
syntactic sugar to the corresponding builtin methods that take operands as arguments. Operators
are overloaded to support different semantics for <span 
class="zptmcm7t-x-x-120">1</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">1 </span>matrices (scalar values). <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>provides
two types of operators - <span 
class="ptmri8t-x-x-120">matrix operators </span>and <span 
class="ptmri8t-x-x-120">array operators</span>. Matrix operators work on whole
matrix values. These include matrix multiplication (<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">*</span></span></span>) and matrix division (<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">\</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">/</span></span></span>). Array operators
                                                                                   

                                                                                   
always operate in an element-wise manner. For example array multiply operator <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">.*</span></span></span> performs
element-wise multiplication. As described in <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-28013r5"><span 
class="ptmri8t-x-x-120">5</span><!--tex4ht:ref: chap:Builtins --></a>, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>implements all operators as
builtins.
<!--l. 107--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is a dynamically typed language which means that variables need not be declared
and take up any value that they are assigned to. <span 
class="ptmrc8t-x-x-120">X10 </span>however, is statically typed and requires
variables to be declared before being assigned to. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>maintains a list of all the declared
variables. It starts with an empty list. Whenever an identifier appears in an assignment statement
on LHS, if it is not already present in the list, a declaration statement is added to the <span 
class="ptmrc8t-x-x-120">X10 </span>IR and
the variable (with its associated type and value information) is added to the list, followed by an
assignment statement corresponding to the statement in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. If the identifier is
already present in the list, the assignment statement is added to the <span 
class="ptmrc8t-x-x-120">X10 </span>IR and the
associated type and value information is updated. In case the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>assignment
statement is inside a loop and needs a declaration, the declaration statement (without any
assignment) is added to the method block outside any loop or conditional scope and
the assignment statement is added in the scope where it is present in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code.
If the identifier on LHS is an array, then the declaration creates a new array with the
shape corresponding to the shape of the RHS array. For example a <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>statement
like <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a=b;</span></span></span> where shape of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> is, say, <span 
class="zptmcm7t-x-x-120">3</span><span 
class="zptmcm7y-x-x-120">&#x00D7;</span><span 
class="zptmcm7t-x-x-120">3 </span>and type is <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">double</span></span></span> will be translated to
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a:Array_2[Double]=new</span><span 
class="pcrr8t-x-x-120">&#x00A0;Array_2[Double](b);</span></span></span> for simple arrays and
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a:Array[Double]=new</span><span 
class="pcrr8t-x-x-120">&#x00A0;Array[Double](b);</span></span></span> for region arrays (outside the scope of
any loops or conditionals).
<a 
 id="x1-31002r53"></a>
<h3 class="sectionHead"><span class="titlemark">6.3    </span> <a 
 id="x1-320003"></a>Loops</h3>
<!--l. 132--><p class="noindent" >Loops in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>are fairly intuitive except for one semantic difference from most of the
languages. In a <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">for</span></span></span> loop if the loop index variable is redefined inside the body of the loop, then
its new value is persistent only in a particular iteration and does not affect the number of loop
iterations. For example, consider the following listing.
   <!--l. 138-->
<div class="lstlisting" id="listing-19"><span class="label"><a 
 id="x1-32001r1"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">forTest1</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(1:10)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32003r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">=3;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32004r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32005r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">end</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32006r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32007r7"></a></span><span 
class="pcrb8t-">end</span>
                                                                                   

                                                                                   
   </div>
<!--l. 148--><p class="noindent" >Note that inside every iteration, the value of loop index variable <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> is 3 but the loop still
terminates after ten iterations. The above code would be translated to the following <span 
class="ptmrc8t-x-x-120">X10</span>
code:
   <!--l. 154-->
<div class="lstlisting" id="listing-20"><span class="label"><a 
 id="x1-32008r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">forTest1</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32009r2"></a></span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32010r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">Note</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">that</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">actual</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">generated</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">code</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32011r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">of</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">temporary</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">variable</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">introduced</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">by</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MiX10</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32012r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">is</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mangled</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">to</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ensure</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">that</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">there</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">is</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">no</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32013r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">conflict</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">with</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">any</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">other</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">variable</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32014r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32015r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32016r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t1</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">10;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32017r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i_x10</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32018r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32019r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32020r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i_x10</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i_x10</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t1</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i_x10</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i_x10</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32021r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32022r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i_x10</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32023r16"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">3</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32024r17"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32025r18"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32026r19"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32027r20"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-32028r21"></a></span><span 
class="pcrr8t-">}</span>
   </div>
<!--l. 178--><p class="indent" >   To handle this somewhat different semantics we introduce a new loop index variable and
assign it to the original loop index variable at the beginning of the loop body. The rest of the loop
body is translated by standard rules. Note that the new loop index variable is introduced only if
the actual loop index variable is redefined inside the loop body.
<a 
 id="x1-32029r54"></a>
<h3 class="sectionHead"><span class="titlemark">6.4    </span> <a 
 id="x1-330004"></a>Conditionals</h3>
<!--l. 187--><p class="noindent" >In <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>conditionals are expressed using the if-elseif-else construct and do not have any wild
semantics. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>also allows switch statements which are converted to equivalent if-else
statements by the Tamer. It also recursively converts a statement like <span 
class="pcrr8t-x-x-120">if (B1) S1 elseif</span>
<span 
class="pcrr8t-x-x-120">(B2) S2 else S3 </span>to a series of if-else clauses like <span 
class="pcrr8t-x-x-120">if (B1) S1 else{ if(B2)</span>
<span 
class="pcrr8t-x-x-120">S2 else S3}</span>. This if-else construct is intuitively mapped to the if-else construct in
<span 
class="ptmrc8t-x-x-120">X10</span>.
<a 
 id="x1-33001r55"></a>
<h3 class="sectionHead"><span class="titlemark">6.5    </span> <a 
 id="x1-340005"></a>Function Calls</h3>
<!--l. 310--><p class="noindent" >Function calls in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>are similar to other programming languages if the called function
returns nothing or returns only one value. However, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>allows a function to
return multiple values. Whenever a call is made to such a function, returned values are
received in a list in the order specified by function definition. For example in the statement
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">[x,n]</span><span 
class="pcrr8t-x-x-120">&#x00A0;=</span><span 
class="pcrr8t-x-x-120">&#x00A0;bubble(a);</span></span></span> a call is made to the function <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">bubble</span></span></span> which returns two values that
                                                                                   

                                                                                   
are read into <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">n</span></span></span> respectively. This statement is compiled to following code in
<span 
class="ptmrc8t-x-x-120">X10</span>.
   <!--l. 320-->
<div class="lstlisting" id="listing-21"><span class="label"><a 
 id="x1-34001r1"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">Note</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">that</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">actual</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">generated</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">code</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34003r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">of</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">temporary</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">variable</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">introduced</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">by</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MiX10</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34004r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">is</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mangled</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">to</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ensure</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">that</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">there</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">is</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">no</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34005r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">conflict</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">with</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">any</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">other</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">variable</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34006r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34007r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34008r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34009r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_x_n</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Rail</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Any</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34010r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_x_n</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bubble</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">A</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34011r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_x_n</span><span 
class="pcrr8t-">(0)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-34012r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_x_n</span><span 
class="pcrr8t-">(1)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span>
   </div>
<!--l. 335--><p class="indent" >   The key idea here is to create a <span 
class="pcrr8t-x-x-120">Rail </span>of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Any</span></span></span> and read the returned value. Remember that
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>packs the multiple return values of a method in a Rail of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Any</span></span></span> and returns it.
Individual elements of the list simply read the values from this array. If the function call is inside a
loop, all the declarations are moved out of the loop and only assignments are inside the
loop.
<a 
 id="x1-34013r56"></a>
<h3 class="sectionHead"><span class="titlemark">6.6    </span> <a 
 id="x1-350006"></a>Cell Arrays</h3>
<!--l. 344--><p class="noindent" >Cell arrays in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>are arrays of data containers called cells and each cell can contain data of
any type. For example <span 
class="pcrr8t-x-x-120">fooCell = {&#8217;x&#8217;,10,&#8217;I like&#8217;,ones(3,3)}; </span>creates a cell
array containing values of type char, double, char array and a double array. To convert
to <span 
class="ptmrc8t-x-x-120">X10</span>, the elements of the cell array are packed into a <span 
class="pcrr8t-x-x-120">rail </span>of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">Any</span></span></span>. While
accessing an element it is type cast into its original type. Consider the following <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
listing:
   <!--l. 352-->
<div class="lstlisting" id="listing-22"><span class="label"><a 
 id="x1-35001r1"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">cellTest</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">m</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ones</span><span 
class="pcrr8t-">(2,3)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35003r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[4,5];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35004r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">myCell</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">m</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">*100};</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35005r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">myCell</span><span 
class="pcrr8t-">{1,2};</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35006r6"></a></span><span 
class="pcrb8t-">end</span>
   </div>
<!--l. 361--><p class="indent" >   It creates a cell array containing two arrays. It is translated to the below <span 
class="ptmrc8t-x-x-120">X10 </span>code:
   <!--l. 364-->
<div class="lstlisting" id="listing-23"><span class="label"><a 
 id="x1-35007r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">cellTest</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35008r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35009r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">Note</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">that</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">purpose</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">of</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">demonstration</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35010r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">this</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">example</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">uses</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">arrays</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">and</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35011r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">does</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">not</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">use</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">IntegerOkay</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">analysis</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35012r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35013r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t2</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">2;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35014r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t3</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">3;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35015r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">m</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">ones</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">mc_t2</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t3</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35016r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t5</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">4;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35017r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t6</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">5;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35018r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">horzcat</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">mc_t5</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t6</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35019r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">m</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35020r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t7</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">100;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35021r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t1</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">mtimes</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t7</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35022r16"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">myCell</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Rail</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Any</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Any</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">mc_t1</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Any</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35023r17"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t9</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35024r18"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t10</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">2;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35025r19"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35026r20"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">myCell</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">mc_t9</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t10</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-1)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35027r21"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-35028r22"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span>
                                                                                   

                                                                                   
   </div>
                                                                                   

                                                                                   
<!--l. 416--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-35029r7"></a>
<a 
 id="Q1-1-58"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;7</span>
<!--l. 416--><p class="noindent" ><span 
class="phvb8t-x-x-197">Code Generation for Concurrency in </span><span 
class="ptmrc8t-x-x-207">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
<!--l. 416--><p class="noindent" >___________________________________________________________________________________
<!--l. 1--><p class="indent" >   <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programmers often recognize the parallel nature of computations involved in their
programs but cannot express it due to the lack of fine-grained concurrency controls in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>.
Some concurrency can be achieved using controls like <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">parfor</span></span></span> and other tools in Mathwork&#8217;s
parallel computing toolbox, but this has several drawbacks: (1) the parallel toolbox is limited in terms
of scaling (<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>currently supports only up to 12 workers <span 
class="ptmri8t-x-x-120">processes </span>to execute applications
on a multicore processor&#x00A0;<span class="cite">[<a 
href="#Xpct">Mat13</a>]</span>); (2) the parallel toolbox must be purchased separately, so not
even all licensed <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>users will have it available; and (3) <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s concurrency is often
slower compared to <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s concurrency controls (as shown in section&#x00A0;<a 
href="#x1-540008">9.8<!--tex4ht:ref: sec:parfor_results --></a>). Vectorization
<span class="footnote-mark"><a 
href="thesis2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-35030f1"></a><span class="footnote-mark"><a 
 id="fn1x0">   <sup class="textsuperscript">1</sup></a></span><a 
href="http://www.mathworks.com/help/matlab/matlab_prog/vectorization.html" class="url" ><span 
class="pcrr8t-">http://www.mathworks.com/help/matlab/matlab_prog/vectorization.html</span></a> is
a technique to convert loop-based scalar operations to vector operations, for which
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is optimized. So, another way of exposing parallelism in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is to optimize
these instructions to perform the computations concurrently on the elements of the
vector.
<!--l. 18--><p class="indent" >   Sec.&#x00A0;<a 
href="#x1-80002">2.2<!--tex4ht:ref: sec:XX --></a> gives an introduction to the concurrency controls in <span 
class="ptmrc8t-x-x-120">X10</span>. Readers not familiar with
<span 
class="ptmrc8t-x-x-120">X10 </span>may find it useful to read it before continuing with this chapter.
<a 
 id="x1-35031r57"></a>
                                                                                   

                                                                                   
<h3 class="sectionHead"><span class="titlemark">7.1    </span> <a 
 id="x1-360001"></a>Code Generation for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>Loop Construct</h3>
<!--l. 26--><p class="noindent" >The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>construct is an important feature in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>and is provided by the
Mathworks&#8217; parallel computing toolbox&#x00A0;<span class="cite">[<a 
href="#Xpct">Mat13</a>]</span>. It allows the for loop iterations in the
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programs to be executed in parallel, whenever safely possible, thus greatly
enhancing the performance of the for loop execution. Other static <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compilers like
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder and <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>do not support the <span 
class="pcrr8t-x-x-120">parfor </span>loop due to the lack of builtin
concurrency features in their target languages, C and Fortran. However, <span 
class="ptmrc8t-x-x-120">X10</span>, being
a parallel programming language, naturally provides concurrency control features.
The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler supports parallel code generation for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor</span>
construct and provides significantly better performance compared to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code
with <span 
class="pcrr8t-x-x-120">parfor</span>, and also the sequential version of the <span 
class="ptmrc8t-x-x-120">X10 </span>code generated for the same
program.
<!--l. 39--><p class="indent" >   The <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">parfor</span></span></span> (or parallel for loop) is a key parallelization control provided by the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
parallel computing toolbox that can be used to execute each iteration of the for loop in parallel
with each other. The challenge was to implement it with <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s concurrency controls while
maintaining its complex semantics and aiming for better performance than provided by the
parallel computing toolbox. There are three important semantic characteristics of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">parfor</span></span></span> loop:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-36002x1">the scope of variables inside a <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">parfor</span></span></span> loop, including the loop index variable, is
      limited to each iteration.
      </li>
      <li 
  class="enumerate" id="x1-36004x2">if a variable defined outside the loop is modified inside the loop such that its value
      after the loop is dependent on the sequence of execution of iterations, then its value
      after the loop is set to its value before the loop.
      </li>
      <li 
  class="enumerate" id="x1-36006x3">if a variable defined outside the loop is modified in a reduction assignment i.e., the
      final value after the iterations is independent of the order of execution of iterations,
      the updated value is retained after the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">parfor</span></span></span> loop. Consider the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code
                                                                                   

                                                                                   
      given on the left of <span 
class="ptmri8t-x-x-120">Figure </span><a 
href="#x1-36038r1"><span 
class="ptmri8t-x-x-120">7.1</span><!--tex4ht:ref: fig:parforex --></a>.
      <!--l. 63--><p class="noindent" ><hr class="figure"><div class="figure" 
><a 
 id="x1-36038r1"></a> <div class="minipage"><!--l. 65-->
<div class="lstlisting" id="listing-24"><span class="label"><a 
 id="x1-36007r1"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">saneParfor</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36008r2"></a></span><span 
class="pcrr8t-">d</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36009r3"></a></span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">=0;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36010r4"></a></span><span 
class="pcrr8t-">A</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">zeros</span><span 
class="pcrr8t-">(1,10)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36011r5"></a></span><span 
class="pcrr8t-">parfor</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1:10</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36012r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36013r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">d</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">*2;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36014r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">A</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">d</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36015r9"></a></span><span 
class="pcrb8t-">end</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36016r10"></a></span><span 
class="pcrr8t-">disp</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">d</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36017r11"></a></span><span 
class="pcrb8t-">end</span>
</div>
      </div>            <div class="minipage"><!--l. 80-->
<div class="lstlisting" id="listing-25"><span class="label"><a 
 id="x1-36018r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">saneParfor</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36019r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">This</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">example</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">does</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">not</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36020r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">use</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">IntegerOkay</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">analysis</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36021r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">d</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36022r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36023r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">A</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_1</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36024r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_1</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">zeros</span><span 
class="pcrr8t-">(1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">10)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36025r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t3</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36026r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t4</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">10;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36027r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">finish</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36028r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">mc_t3</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">..(</span><span 
class="pcrr8t-">mc_t4</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36029r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">async</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36030r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">atomic</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36031r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t2</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">2;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36032r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">d_local</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36033r16"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">mtimes</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t2</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36034r17"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">A</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-1)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">d_local</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36035r18"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36036r19"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-36037r20"></a></span><span 
class="pcrr8t-">}</span>
</div></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.1: </span><span  
class="content">Example of <span 
class="pcrr8t-x-x-120">parfor</span>, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>with <span 
class="pcrr8t-x-x-120">parfor </span>on the left, generated <span 
class="ptmrc8t-x-x-120">X10 </span>on
the right.</span></div><!--tex4ht:label?: x1-36038r1 -->
      <!--l. 106--><p class="noindent" ></div><hr class="endfigure">
      <!--l. 108--><p class="noindent" >Here <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span><span 
class="pcrr8t-x-x-120">&#x00A0;=</span><span 
class="pcrr8t-x-x-120">&#x00A0;x+i;</span></span></span> is a reduction assignment&#x00A0;<span class="cite">[<a 
href="#Xreducassg">Matb</a>]</span> statement. The value of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">d</span></span></span> is local to
      each iteration and the initial value before the loop is retained after the loop. Note that the
      value of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">d</span></span></span> outside the loop is invisible inside the loop. For statement <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">A(i)</span><span 
class="pcrr8t-x-x-120">&#x00A0;=</span><span 
class="pcrr8t-x-x-120">&#x00A0;d;</span></span></span>,
      each iteration modifies a unique element accessible only to it, hence the final
      value of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">A</span></span></span> is independent of order of execution; thus its value is updated after the
      loop.</li></ol>
<!--l. 118--><p class="indent" >   The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler uses the following strategy to translate <span 
class="pcrr8t-x-x-120">parfor </span>loops to
<span 
class="ptmrc8t-x-x-120">X10</span>:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-36040x1">Introduce  <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">finish</span></span></span> and  <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">async</span></span></span> constructs  to  control  the  flow  of  statements  in
      parallel. This puts the statement immediately after the <span 
class="pcrr8t-x-x-120">for </span>loop in wait, until all the
      iterations have been executed.
      </li>
      <li 
  class="enumerate" id="x1-36042x2">Any variable defined inside the loop and not declared outside the loop previously is
      declared inside the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">async</span></span></span> scope to make it local to the iteration.
                                                                                   

                                                                                   
      </li>
      <li 
  class="enumerate" id="x1-36044x3">Any variable defined inside the loop that is previously defined outside the loop and is
      not a reduction variable is replaced by a local temporary variable defined inside the
      loop.
      </li>
      <li 
  class="enumerate" id="x1-36046x4">Statements  identified  to  be  reduction  statements  are  made  atomic  by  using  the
      <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">atomic</span></span></span> construct in <span 
class="ptmrc8t-x-x-120">X10</span>.
      </li></ol>
<!--l. 139--><p class="indent" >   An equivalent <span 
class="ptmrc8t-x-x-120">X10 </span>code for the above example <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code is given on the right side of
<span 
class="ptmri8t-x-x-120">Figure </span><a 
href="#x1-36038r1"><span 
class="ptmri8t-x-x-120">7.1</span><!--tex4ht:ref: fig:parforex --></a>. The use of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">finish</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">async</span></span></span> ensure that each iteration is executed in parallel and
the statement after the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">for</span></span></span> loop is blocked until all the iterations have finished executing. Note
that the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">for</span></span></span> loop is iterated over a <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">LongRange</span></span></span> to ensure that the declaration of the loop variable
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> is local to each iteration. The statement <span 
class="pcrr8t-x-x-120">x = x+i </span>is a reduction statement, since its order of
execution does not affect the value of x at the end of the loop. It is declared to be <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">atomic</span></span></span> to
ensure that the two operations of addition and assignment in the statement are executed as a
whole, without any interference from its execution in other iterations. Since the variable <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">d</span></span></span> is also
defined outside the loop, it is replaced by a local variable <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">d_local</span></span></span> inside the loop.
Finally, since each array variable <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">A(i)</span></span></span> is unique, it is executed normally for each
iteration.
<!--l. 154--><p class="indent" >   To conclude, we can translate the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">parfor</span></span></span> in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to semantically equivalent
code in <span 
class="ptmrc8t-x-x-120">X10 </span>and since <span 
class="ptmrc8t-x-x-120">X10 </span>can handle massive scaling, we can get significantly better
performance for <span 
class="ptmrc8t-x-x-120">X10 </span>compared to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>as shown by our experimental results in Section
<a 
href="#x1-540008">9.8<!--tex4ht:ref: sec:parfor_results --></a>.
<a 
 id="x1-36047r59"></a>
<h3 class="sectionHead"><span class="titlemark">7.2    </span> <a 
 id="x1-370002"></a>Introducing Concurrency Controls in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span></h3>
<!--l. 162--><p class="noindent" >In order to enable <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to be compiled for high performance computing it is important to let
programmers exploit fine-grained concurrency in their <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programs. Due to the lack of
fine-grained concurrency controls in traditional <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, we decided to introduce such controls
in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>that can be translated by our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler to analogous concurrency controls in
                                                                                   

                                                                                   
<span 
class="ptmrc8t-x-x-120">X10</span>. However it was important that introduction of such controls should not have any side-effects
when compiled by traditional Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compiler, so we introduced them as
structured special comments.
<!--l. 172--><p class="indent" >   We introduced the following concurrency constructs in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>: (1) <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">%!async</span></span></span>, (2)
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">%!finish</span></span></span>, (3) <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">%!atomic</span></span></span>, (4) <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">%!when(condition)</span></span></span> (5) (where <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">condition</span></span></span> is a
boolean expression) and (6) <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">%!at(p)</span></span></span> (where <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">p</span></span></span> is an integer value denoting a place in
<span 
class="ptmrc8t-x-x-120">X10</span>). Programmers can express these constructs before the statements that they want to
control and specify the end of a control by using <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">%!end</span></span></span> after the statements. Note that
because of the preceding <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">%</span></span></span> sign these constructs will be treated like comments by other
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compilers and will not cause any unwanted effects. It is important to note that the
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programmer, using these constructs in her program, must ensure that the
parallel execution caused by the use of these constructs does not change the behavior of
the program from that of the sequential execution of the program. In short, it is the
responsibility of the programmer to ensure the safety of the program when using these
constructs.
<!--l. 187--><p class="indent" >   Figure <a 
href="#x1-37027r2">7.2<!--tex4ht:ref: fig:concex --></a> shows an example of how to use these controls in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>followed by the
generated <span 
class="ptmrc8t-x-x-120">X10 </span>code for it.
<!--l. 191--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                                   

                                                                                   
<a 
 id="x1-37027r2"></a><a 
 id="x1-4000011"></a><a 
 id="x1-4000010"></a>
                                                                                   

                                                                                   
<div class="minipage"><!--l. 194-->
<div class="lstlisting" id="listing-26"><span class="label"><a 
 id="x1-37001r1"></a></span><span 
class="pcrb8t-">function</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">parallelFoo</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">%</span><span 
class="pcrr8t-">!</span><span 
class="pcrr8t-">finish</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37003r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1:</span><span 
class="pcrr8t-">length</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37004r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">%</span><span 
class="pcrr8t-">!</span><span 
class="pcrr8t-">async</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37005r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">*2;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37006r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">%</span><span 
class="pcrr8t-">!</span><span 
class="pcrr8t-">end</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37007r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">end</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37008r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">%</span><span 
class="pcrr8t-">!</span><span 
class="pcrr8t-">end</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37009r9"></a></span><span 
class="pcrb8t-">end</span>
</div>
</div>                 <div class="minipage"><!--l. 208-->
<div class="lstlisting" id="listing-27"><span class="label"><a 
 id="x1-37010r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">parallelfoo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_1</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">])</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37011r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">This</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">example</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">does</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">not</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37012r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">use</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">IntegerOkay</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">analysis</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37013r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t2</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">length</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37014r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t4</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37015r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">finish</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37016r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">mc_t4</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">..(</span><span 
class="pcrr8t-">mc_t2</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37017r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">async</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37018r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37019r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mtimes</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1)</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">2)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37020r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mc_t0</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37021r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37022r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37023r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37024r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_1</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_1</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37025r16"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-37026r17"></a></span><span 
class="pcrr8t-">}</span>
</div></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.2:  </span><span  
class="content">Example  of  introduced  concurrency  controls,  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>with  introduced
concurrency on the left, generated <span 
class="ptmrc8t-x-x-120">X10 </span>on the right.</span></div><!--tex4ht:label?: x1-37027r2 -->
                                                                                   

                                                                                   
<!--l. 231--><p class="indent" >   </div><hr class="endfigure">
<a 
 id="x1-37028r61"></a>
<h3 class="sectionHead"><span class="titlemark">7.3    </span> <a 
 id="x1-380003"></a>Parallelizing Vectorized Instructions</h3>
<!--l. 234--><p class="noindent" >The use of vectorized instructions is another optimization technique used by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to speedup
single operations on multiple scalar values by combining scalar values in a vector and executing
the operation on the vector. Such <span 
class="ptmri8t-x-x-120">Single instruction, multiple data </span>style operations are good
candidates for parallelization. However, efficiency of parallelization of such operations
depends on the size of the vector, the complexity of the operation involved, and the
executing hardware. Thus, in order to make it most effective, we wanted to provide full
support for parallelization of vector instructions and give the programmer the ability to
control when the vector operation is executed concurrently, based on the size of the
vector.
<!--l. 248--><p class="indent" >   We implemented a concurrent version of the relevant builtin
operations that can operate in a parallel fashion on vectors of arbitrary
sizes.<span class="footnote-mark"><a 
href="thesis3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-38001f2"></a><span class="footnote-mark"><a 
 id="fn2x0">      <sup class="textsuperscript">2</sup></a></span><span 
class="ptmr8t-">Currently, these concurrent builtin implementations are not integrated into the builtin handling framework.</span>
  <span 
class="ptmr8t-">However, due to the extensible nature of the builtin handling framework, it should be straightforward to add a</span>
  <span 
class="ptmr8t-">specialization for a concurrent version of the builtins. We plan to do it as a future work.</span> 
We also introduced a compiler switch for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>that lets programmers specify a vector length
threshold for all builtins or a specific builtin above which the concurrent version of the builtin will
be executed. For example, if the user wants an operation <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">sin(A)</span></span></span> to be executed concurrently
only if <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">A</span></span></span> is a vector of length greater than, say, 1000; then while invoking the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler
she can specify the threshold by using the switch <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">-vec_par_length</span><span 
class="pcrr8t-x-x-120">&#x00A0;sin=1000</span></span></span>. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
will generate a call to the concurrent version of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">sin()</span></span></span> if the length of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">A</span></span></span> is greater than
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">1000</span></span></span> else it will call the sequential version. Using the <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">-vec_par_length</span></span></span> switch
programmer can specify threshold for one or more or all builtin methods. For example
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">-vec_par_length</span><span 
class="pcrr8t-x-x-120">&#x00A0;all=500</span><span 
class="pcrr8t-x-x-120">&#x00A0;sin=1000</span><span 
class="pcrr8t-x-x-120">&#x00A0;cos=1000</span></span></span> will set the threshold for <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">sin()</span></span></span>
and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">cos()</span></span></span> to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">1000</span></span></span> and to <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">500</span></span></span> for all other builtins.
<!--l. 269--><p class="indent" >   As a future work, we plan to extensively evaluate the concurrent execution for the vectorized
instructions. It would be interesting to study the performance variations of concurrently executing
vector instructions, with varying threshold vector length values and on different parallel
                                                                                   

                                                                                   
architectures.
                                                                                   

                                                                                   
<!--l. 420--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-38002r8"></a>
<a 
 id="Q1-1-64"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;8</span>
<!--l. 420--><p class="noindent" ><span 
class="phvb8t-x-x-197">The </span><span 
class="phvbo8t-x-x-197">IntegerOkay </span><span 
class="phvb8t-x-x-197">Analysis</span>
<!--l. 420--><p class="noindent" >___________________________________________________________________________________
<!--l. 15--><p class="indent" >   In this chapter we present the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis to identify which variables in the source
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>program can be safely declared to be of an integer type instead of the default double
type. In <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>all the variables holding a numerical value are by default of type <span 
class="pcrr8t-x-x-120">Double</span>,
which means that by default, in the <span 
class="ptmrc8t-x-x-120">X10 </span>code generated from <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, all variables are statically
declared to be of <span 
class="pcrr8t-x-x-120">Double</span>. However, in languages like <span 
class="ptmrc8t-x-x-120">X10</span>, Java and C++, certain program
operations require the variables used to be of an integer type. A prominent example of such
an operation is an array access operation. An array access requires the variables used
to index into the array to be of an integer type. For example, in a statement like <span 
class="pcrr8t-x-x-120">x =</span>
<span 
class="pcrr8t-x-x-120">A(i,j)</span>, the variables <span 
class="pcrr8t-x-x-120">i </span>and <span 
class="pcrr8t-x-x-120">j </span>are required to be of integer type and result in an error
otherwise.
<a 
 id="x1-38003r63"></a>
<h3 class="sectionHead"><span class="titlemark">8.1    </span> <a 
 id="x1-390001"></a>Need for Declaring Variables to be of Integer Type</h3>
<!--l. 31--><p class="noindent" >A simple solution to handle this problem in the generated code from <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is to
explicitly cast the variable from <span 
class="pcrr8t-x-x-120">Double </span>to <span 
class="pcrr8t-x-x-120">Long</span>, whenever it is required to be used as an
integer. However, our experiments showed this approach to be very inefficient. With this
approach, we observed that the C++ programs generated by the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler&#8217;s C++
                                                                                   

                                                                                   
backend were slow, and often even slower than the Java code generated by the <span 
class="ptmrc8t-x-x-120">X10 </span>Java
backend for the same program (which was somewhat surprising). The reason for the
added slowness in the C++ code was because each typecast from <span 
class="pcrr8t-x-x-120">Double </span>to <span 
class="pcrr8t-x-x-120">Long</span>
involved an explicit check on the value of the <span 
class="pcrr8t-x-x-120">Double </span>type variable to ensure that it
lies in the 64-bit range supported by <span 
class="pcrr8t-x-x-120">Long</span>, whereas the cast in Java is handled by a
primitive bytecode cast instruction. However, even in Java, extraneous casts clearly hurt
performance.
<!--l. 51--><p class="indent" >   To solve this problem, we designed and implemented the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis that identifies
variables that can be safely declared to be of <span 
class="pcrr8t-x-x-120">Long </span>type, thus eliminating the need for costly
typecasting on these variables.
<a 
 id="x1-39001r65"></a>
<h3 class="sectionHead"><span class="titlemark">8.2    </span> <a 
 id="x1-400002"></a>Effect on Performance</h3>
<!--l. 58--><p class="noindent" >To understand the effect on performance caused by typecasting consider a simple example of <span 
class="ptmrc8t-x-x-120">X10</span>
code shown in listing <a 
href="#x1-40001r1">8.1<!--tex4ht:ref: lst:dbl_lng_tc --></a> that just loops over a 2-dimensional array and sets each element
<span 
class="pcrr8t-x-x-120">A(i,j) </span>to <span 
class="pcrr8t-x-x-120">A(i-1,j-1) + A(i+1, j+1)</span>. In this example, the index variables <span 
class="pcrr8t-x-x-120">i </span>and <span 
class="pcrr8t-x-x-120">j </span>are
declared to be of type <span 
class="pcrr8t-x-x-120">Double </span>and are typecast to <span 
class="pcrr8t-x-x-120">Long </span>when used for indexing into the array.
This example reflects the type of <span 
class="ptmrc8t-x-x-120">X10 </span>code that we would generate if we do not have the
<span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis.
<!--l. 68--><p class="indent" >   Listing <a 
href="#x1-40013r2">8.2<!--tex4ht:ref: lst:dbl_lng_notc --></a> shows the same example, but with <span 
class="pcrr8t-x-x-120">i </span>and <span 
class="pcrr8t-x-x-120">j </span>declared to be <span 
class="pcrr8t-x-x-120">Long</span>, and thus not
requiring an explicit typecast. This example reflects the code that we would be able to generate
with a good <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis.
   <!--l. 73-->
<a 
 id="x1-40001r1"></a>
<a 
 id="x1-40002"></a>
<div class="lstlisting" id="listing-28"><span class="label"><a 
 id="x1-40003r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">useDoubles</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">scale</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40005r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rand</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">scale</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">scale</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40006r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40007r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">=0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">++)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40008r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">=1;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_2</span><span 
class="pcrr8t-">-1;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">++)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40009r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">=1;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_1</span><span 
class="pcrr8t-">-1;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">++)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40010r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-1)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40011r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">as</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+1)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40012r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span>
<br />
    <div class="caption" 
><span class="id">Listing&#x00A0;8.1:
    </span><span  
class="content">Example
    for
                                                                                   

                                                                                   
    using
    <span 
class="pcrr8t-x-x-120">Double</span>
    variables
    for
    array
    indexing</span></div><!--tex4ht:label?: x1-40000 -->
   </div>
   <!--l. 87-->
<a 
 id="x1-40013r2"></a>
<a 
 id="x1-40014"></a>
<div class="lstlisting" id="listing-29"><span class="label"><a 
 id="x1-40015r1"></a></span><span 
class="pcrb8t-">static</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">useLongs</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">scale</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40016r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40017r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array_2</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">Mix10</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rand</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">scale</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">scale</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40018r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Long</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40019r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">=0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">n</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">++)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40020r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">=1;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_2</span><span 
class="pcrr8t-">-1;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">++)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40021r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">=1;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">numElems_1</span><span 
class="pcrr8t-">-1;</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">++)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40022r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">-1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">-1)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">i</span><span 
class="pcrr8t-">+1,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">j</span><span 
class="pcrr8t-">+1)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-40023r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span>
<br />
    <div class="caption" 
><span class="id">Listing&#x00A0;8.2:
    </span><span  
class="content">Example
    for
    using
    <span 
class="pcrr8t-x-x-120">Long</span>
    variables
    for
    indexing</span></div><!--tex4ht:label?: x1-40000 -->
   </div>
   <div class="table">
                                                                                   

                                                                                   
<!--l. 100--><p class="indent" >   <a 
 id="x1-40024r1"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="center" 
>
<!--l. 101--><p class="noindent" >
<div class="tabular"> <table id="TBL-1" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-1-1g"><col 
id="TBL-1-1"></colgroup><colgroup id="TBL-1-2g"><col 
id="TBL-1-2"><col 
id="TBL-1-3"></colgroup><colgroup id="TBL-1-4g"><col 
id="TBL-1-4"><col 
id="TBL-1-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-1-1-1"  
class="td11">         </td><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-1-1-2"  
class="td11"> <div class="multicolumn"  style="white-space:nowrap; text-align:center;">input args: 100, 200000</div> </td><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-1-1-4"  
class="td11"> <div class="multicolumn"  style="white-space:nowrap; text-align:center;">input args : 10000, 20</div>
</td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-1-2-1"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-2-2"  
class="td11"> Java  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-2-3"  
class="td11">    C++          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-2-4"  
class="td11"> Java  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-2-5"  
class="td11">   C++        </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-1-3-1"  
class="td11"> useDoubles  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-3-2"  
class="td11"> 6.9   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-3-3"  
class="td11">    33.7          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-3-4"  
class="td11"> 7.6   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-3-5"  
class="td11">   35.2        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-1-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-1-4-1"  
class="td11">  useLongs    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-4-2"  
class="td11"> 3.4   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-4-3"  
class="td11">    1.5           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-4-4"  
class="td11"> 3.7   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-1-4-5"  
class="td11">    2.0         </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-1-5-1"  
class="td11">         </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;8.1: </span><span  
class="content">Running times (in seconds) for listings <a 
href="#x1-40001r1">8.1<!--tex4ht:ref: lst:dbl_lng_tc --></a> and <a 
href="#x1-40013r2">8.2<!--tex4ht:ref: lst:dbl_lng_notc --></a>, smaller is better</span></div><!--tex4ht:label?: x1-40024r1 -->
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
   </div>
<!--l. 109--><p class="indent" >   Table <a 
href="#x1-40024r1">8.1<!--tex4ht:ref: tab:intoktable --></a> shows running times (in seconds) for these two examples for different values of
input arguments. For the listing <a 
href="#x1-40001r1">8.1<!--tex4ht:ref: lst:dbl_lng_tc --></a>, the C++ code generated by the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler is nearly 5
times slower as compared to the Java code generated from <span 
class="ptmrc8t-x-x-120">X10 </span>for the same example. Compared
to <a 
href="#x1-40013r2">8.2<!--tex4ht:ref: lst:dbl_lng_notc --></a> it is slower than the C++ code for this example by almost 20 times. On the other hand, Java
code for the listing <a 
href="#x1-40001r1">8.1<!--tex4ht:ref: lst:dbl_lng_tc --></a> is nearly 2 times slower compared to the Java code for the listing <a 
href="#x1-40013r2">8.2<!--tex4ht:ref: lst:dbl_lng_notc --></a>. For
the C++ backend, since the C++ compiler does not provide the checks for <span 
class="pcrr8t-x-x-120">Double </span>to
<span 
class="pcrr8t-x-x-120">Long </span>typecast, it is implemented in the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend. For the Java backend,
<span 
class="ptmrc8t-x-x-120">X10 </span>relies on these checks provided by the JVM. The more efficient implementation
of these checks in the JVM, compared to that in the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend explains for
comparatively lower slowdowns for the Java code. Section <a 
href="#x1-530007">9.7<!--tex4ht:ref: sec:intok_perf --></a> gives detailed evaluation of
the performance benefits obtained by using <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis on our benchmark
set.
<a 
 id="x1-40025r66"></a>
<h3 class="sectionHead"><span class="titlemark">8.3    </span> <a 
 id="x1-410003"></a>An Overview of the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>Analysis</h3>
<!--l. 130--><p class="noindent" >In this section we give a high-level overview of how the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis works. A detailed
algorithm for it is provided in the next section (section <a 
href="#x1-420004">8.4<!--tex4ht:ref: sec:algo --></a>). The basic idea behind the
<span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis is that, for each variable <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span>, if for every use and every definition of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> in the
given <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>function, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> can be safely assumed to be an integer, i.e. its declaration as an integer
does not change the result of the program, then it can be declared as an integer. Thus, the problem
boils down to answering the question of whether each use or a definition, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> can be safely assumed
to be an integer.
<!--l. 141--><p class="indent" >   There are three possible answers to this question:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-41002x1"><span 
class="ptmri8t-x-x-120">IntegerOkay</span>:  The  variable  use/def  can  be  safely  assumed  to  be  an  integer.  For
      example, for a definition like <span 
class="pcrr8t-x-x-120">x = 2.0 </span>or for use as an array index like <span 
class="pcrr8t-x-x-120">A(x)</span>, it is
      safe to assume that if <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> was declared to be an integer, this definition or use will not
      affect the result of the program. In other words, for this definition or use of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> is
                                                                                   

                                                                                   
      <span 
class="pcrr8t-x-x-120">IntegerOkay</span>.
      </li>
      <li 
  class="enumerate" id="x1-41004x2"><span 
class="ptmri8t-x-x-120">Not IntegerOkay</span>: The variable cannot be an integer type. For example consider the
      expression  <span 
class="pcrr8t-x-x-120">x/y</span>.  Here,  since  the  type  of  the  operands  can  affect  the  result  of  the
      division operation, it is unsafe to assume that <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> can be of integer type for this
      particular use. As another example, consider the definition <span 
class="pcrr8t-x-x-120">x = 3.14</span>. Here, since
      assuming <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> to be an integer will result in an error, x is not <span 
class="ptmri8t-x-x-120">IntegerOkay</span>.
      </li>
      <li 
  class="enumerate" id="x1-41006x3"><span 
class="ptmri8t-x-x-120">Conditionally IntegerOkay</span>: It is possible to have a case where a variable <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span>, for a
      particular use or def in the function, is an integer only if some other variable, say
      <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span>, is <span 
class="ptmri8t-x-x-120">IntegerOkay </span>everywhere in the given function. In such a case, we say that <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> is
      <span 
class="ptmri8t-x-x-120">conditionally IntegerOkay </span>and <span 
class="ptmri8t-x-x-120">depends </span>on <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span>. For example, in a definition like <span 
class="pcrr8t-x-x-120">x =</span>
      <span 
class="pcrr8t-x-x-120">a+b</span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> can be an integer if both <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span> can be integers everywhere in the function.
      We  say  <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> is  conditionally  <span 
class="ptmri8t-x-x-120">IntegerOkay  </span>and  depends  on  <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> and  <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span>.  Note  that  these
      particular uses of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">b</span></span></span> are <span 
class="ptmri8t-x-x-120">IntegerOkay </span>because the <span 
class="pcrr8t-x-x-120">plus() </span>builtin can be used
      with integers safely. However, some other statement may constrain the solution. For
      example, a definition of the form <span 
class="pcrr8t-x-x-120">a = 3.2 </span>somewhere in the function would mean
      that <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">a</span></span></span> is not <span 
class="ptmri8t-x-x-120">IntegerOkay </span>everywhere and thus <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> is not <span 
class="ptmri8t-x-x-120">IntegerOkay</span>.</li></ol>
<!--l. 182--><p class="indent" >   In our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler we solve the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>problem using a simple fixed-point
computation. For each variable use and definition, the algorithm initially associates it with one of
the three abstract values above. We then compute the fixed-point by iteratively refining the
dependency lists of the conditional variables. Consider each variable <span 
class="zptmcm7m-x-x-120">x</span>, if every use and definition
of <span 
class="zptmcm7m-x-x-120">x </span>has been determined to be <span 
class="ptmri8t-x-x-120">IntegerOkay</span>, then <span 
class="zptmcm7m-x-x-120">x </span>is removed from the dependency lists of all the
variables that are <span 
class="ptmri8t-x-x-120">Conditionally IntegerOkay </span>and depend on <span 
class="zptmcm7m-x-x-120">x</span>. Once the dependency list for a
particular use or definition of a variable is empty, it is upgraded to be <span 
class="ptmri8t-x-x-120">IntegerOkay </span>for that
particular use or definition.
<!--l. 194--><p class="indent" >   If a variable is not <span 
class="ptmri8t-x-x-120">IntegerOkay </span>at some point in the function or its dependency list does not
become empty for some point in the function (say, for circular dependency), it cannot
be declared as an integer. Since, every time we declare a variable to be integer, one
                                                                                   

                                                                                   
or more <span 
class="ptmri8t-x-x-120">Conditionally IntegerOkay </span>variables might be upgraded to <span 
class="ptmri8t-x-x-120">IntegerOkay</span>, we
iteratively repeat the process of finding variables that are <span 
class="ptmri8t-x-x-120">IntegerOkay </span>at all points in the
function, until we reach a fixed point. Note that since we never downgrade a variable to
<span 
class="ptmri8t-x-x-120">Not IntegerOkay </span>or <span 
class="ptmri8t-x-x-120">Conditionally IntegerOkay</span>, our iterative algorithm will always
terminate.
<a 
 id="x1-41007r70"></a>
<h3 class="sectionHead"><span class="titlemark">8.4    </span> <a 
 id="x1-420004"></a>The Analysis Algorithm</h3>
<!--l. 208--><p class="noindent" >The <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis is an intra-procedural, flow-insensitive and path-insensitive analysis.
The basic idea behind identifying whether a variable can be declared as an integer is that if a
variable can safely be an integer for its every definition and every use in the function, independent
of any other variable&#8217;s type, then it can be declared to be an integer for the entire function. It is
important that any variable identified as <span 
class="ptmri8t-x-x-120">IntegerOkay </span>must be safe to be declared as an
integer, thus the analysis takes a conservative approach and identifies a variable as
<span 
class="pcrr8t-x-x-120">IntegerOkay </span>only when it is completely unambiguous. This eliminates any false-positives (a
variable is identified as <span 
class="pcrr8t-x-x-120">IntegerOkay</span>, when in fact it is not <span 
class="pcrr8t-x-x-120">IntegerOkay</span>) but
may lead to some false-negatives (a variable is identified not <span 
class="pcrr8t-x-x-120">IntegerOkay</span>, when in
fact it could be <span 
class="pcrr8t-x-x-120">intgerOkay</span>). For example, if a variable <span 
class="pcrr8t-x-x-120">i </span>is used as an array index
variable and also used as an argument to the <span 
class="pcrr8t-x-x-120">rdivide() </span>builtin call somewhere in
the function, the analysis identifies it as not <span 
class="pcrr8t-x-x-120">IntegerOkay</span>, even though under the
assumption that the function would execute without any runtime errors, <span 
class="pcrr8t-x-x-120">i </span>would be
<span 
class="pcrr8t-x-x-120">IntegerOkay </span>(use of a non-integral value as an array index results in a runtime
error).
<!--l. 227--><p class="indent" >   The input to the analysis is a set of all the double variables in the function, a set of definitions
for each of the variables in this set, and a set of all the uses for each of the variables in
this variable set. The aim is to output a set of variables that can be safely declared as
integers.
<a 
 id="x1-42001r50"></a>
<h4 class="subsectionHead"><span class="titlemark">8.4.1    </span> <a 
 id="x1-430001"></a>STEP 1 : Initialization</h4>
<!--l. 238--><p class="noindent" >As mentioned in Sec.&#x00A0;<a 
href="#x1-410003">8.3<!--tex4ht:ref: sec:overview --></a>, the analysis initializes each definition and each use of every variable to
one of the three abstract values and assigns a set of dependency variables if the assigned abstract
                                                                                   

                                                                                   
value is conditionally <span 
class="ptmri8t-x-x-120">IntegerOkay</span>.
<!--l. 243--><p class="indent" >   The analysis represents these three abstract values by the following state values : <span 
class="pcrr8t-x-x-120">IntOk</span>,
<span 
class="pcrr8t-x-x-120">NotIntOk</span>, and <span 
class="pcrr8t-x-x-120">CondIntOk </span>for is <span 
class="ptmri8t-x-x-120">IntegerOkay</span>, not <span 
class="ptmri8t-x-x-120">IntegerOkay</span>, and conditionally
<span 
class="ptmri8t-x-x-120">IntegerOkay </span>respectively. Furthermore, let <span 
class="zptmcm7m-x-x-120">d.state </span>be the state of variable <span 
class="zptmcm7m-x-x-120">v </span>for definition <span 
class="zptmcm7m-x-x-120">d </span>, and
<span 
class="zptmcm7m-x-x-120">u.state </span>be the state of variable <span 
class="zptmcm7m-x-x-120">v </span>for use <span 
class="zptmcm7m-x-x-120">u</span>. Also, let <span 
class="zptmcm7m-x-x-120">d.deps </span>be a set of variables on which the
<span 
class="pcrr8t-x-x-120">CondIntOk </span>state for variable <span 
class="zptmcm7m-x-x-120">v </span>for definition <span 
class="zptmcm7m-x-x-120">d </span>depends on. Similarly, let <span 
class="zptmcm7m-x-x-120">u.deps </span>be a set of
variables on which the <span 
class="pcrr8t-x-x-120">CondIntOk </span>state for variable <span 
class="zptmcm7m-x-x-120">v </span>for use <span 
class="zptmcm7m-x-x-120">u </span>depends on. The analysis starts
with a set of all the double variables <span 
class="zptmcm7m-x-x-120">V </span>in the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>function, where each variable <span 
class="zptmcm7m-x-x-120">v </span>has an
associated set of its definitions <span 
class="zptmcm7m-x-x-120">D </span>and uses <span 
class="zptmcm7m-x-x-120">U</span>. Every <span 
class="zptmcm7m-x-x-120">d.state </span>and <span 
class="zptmcm7m-x-x-120">u.state </span>is initialized to
<span 
class="pcrr8t-x-x-120">NotIntOk </span>and every <span 
class="zptmcm7m-x-x-120">d.deps </span>and <span 
class="zptmcm7m-x-x-120">u.deps </span>is initially set to <span 
class="zptmcm7y-x-x-120">&#x2205;</span>. Algorithm <a 
href="#x1-43001r1">1<!--tex4ht:ref: alg:initialization --></a> gives the algorithm for
the initialization step of the analysis. It checks for every definition and every use of
each variable and assocites an <span 
class="ptmri8t-x-x-120">IntegerOkay </span>state with each use and definition. It also
assocites a dependency list of variables whose state affects the state of the variable in
question.
   <div class="algorithm">
                                                                                   

                                                                                   
<!--l. 261--><p class="indent" >   <a 
 id="x1-43001r1"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
 <div class="caption" 
><span class="id">Algorithm 1: </span><span  
class="content">Initialization step of the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis</span></div><!--tex4ht:label?: x1-43001r1 -->
<div class="algorithmic">
        <span class="label-14.39996pt">
 <span 
class="ptmr8t-">1:</span> </span>&#xA0;<span 
class="algorithmic"><span 
class="ptmb8t-x-x-120">procedure</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">N</span><span 
class="small-caps">I</span><span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">A</span><span 
class="small-caps">L</span><span 
class="small-caps">I</span><span 
class="small-caps">Z</span><span 
class="small-caps">E</span></span>(<span 
class="zptmcm7m-x-x-120">V </span>)         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">2:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis5x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">V </span><span 
class="ptmri8t-">be the set of all double variables in the function</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">3:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis6x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v.D </span><span 
class="ptmri8t-">be the set of all definitions of variable </span><span 
class="zptmcm7m-">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">4:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis7x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">d.state </span><span 
class="ptmri8t-">be the integerOkay state of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for definition </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">5:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis8x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v.U </span><span 
class="ptmri8t-">be the set of all uses of variable </span><span 
class="zptmcm7m-">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">6:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis9x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">u.state </span><span 
class="ptmri8t-">be the integerOkay state of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for use </span><span 
class="zptmcm7m-">u</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">7:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">v </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">V</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">8:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">d </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">v.D</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">9:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="zptmcm7m-x-x-120">d.state </span><span 
class="zptmcm7y-x-x-120">&#x2190;</span> <span 
class="ptmrc8t-x-x-120">G<span 
class="small-caps">E</span><span 
class="small-caps">T</span>S<span 
class="small-caps">T</span><span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>D<span 
class="small-caps">E</span><span 
class="small-caps">F</span></span>(<span 
class="zptmcm7m-x-x-120">v,d</span>)         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">10:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">11:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">u </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">v.U</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">12:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="zptmcm7m-x-x-120">u.state </span><span 
class="zptmcm7y-x-x-120">&#x2190;</span> <span 
class="ptmrc8t-x-x-120">G<span 
class="small-caps">E</span><span 
class="small-caps">T</span>S<span 
class="small-caps">T</span><span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>U<span 
class="small-caps">S</span><span 
class="small-caps">E</span></span>(<span 
class="zptmcm7m-x-x-120">v,u</span>)         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">13:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">14:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>                                                                                                                                                                                  </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">15:</span> </span>&#xA0;<span  class="algorithmic"><span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">procedure</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">     </span>&#xA0;<span  class="algorithmic">         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">16:</span> </span>&#xA0;<span  class="algorithmic"><span 
class="ptmb8t-x-x-120">procedure</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">G<span 
class="small-caps">E</span><span 
class="small-caps">T</span>S<span 
class="small-caps">T</span><span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>D<span 
class="small-caps">E</span><span 
class="small-caps">F</span></span>(<span 
class="zptmcm7m-x-x-120">v,d</span>)         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">17:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis10x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">be a variable and </span><span 
class="zptmcm7m-">d </span><span 
class="ptmri8t-">be a definition of </span><span 
class="zptmcm7m-">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">18:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis11x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">d.deps </span><span 
class="ptmri8t-">be the dependency list of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for definition </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">19:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis12x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">d.RHS </span><span 
class="ptmri8t-">be the right hand side expression of definition </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">20:</span> </span>&#xA0;<span  class="algorithmic">         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">21:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis13x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if </span><span 
class="zptmcm7m-">d </span><span 
class="ptmri8t-">is an assignment from a constant</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">22:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">S</span>C<span 
class="small-caps">O</span><span 
class="small-caps">N</span><span 
class="small-caps">S</span><span 
class="small-caps">T</span>A<span 
class="small-caps">S</span><span 
class="small-caps">S</span><span 
class="small-caps">I</span><span 
class="small-caps">G</span><span 
class="small-caps">N</span><span 
class="small-caps">M</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">T</span></span>(<span 
class="zptmcm7m-x-x-120">d</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">23:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">S</span>R<span 
class="small-caps">E</span><span 
class="small-caps">A</span><span 
class="small-caps">L</span>I<span 
class="small-caps">N</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span><span 
class="small-caps">G</span><span 
class="small-caps">E</span><span 
class="small-caps">R</span></span>(<span 
class="zptmcm7m-x-x-120">d.RHS</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">24:</span> </span>&#xA0;<span  class="algorithmic">                      <img  src="thesis14x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if the RHS is a real integer</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">25:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">IntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">26:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">27:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">28:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis15x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if </span><span 
class="zptmcm7m-">d </span><span 
class="ptmri8t-">is a copy statement</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">                                                                                                                                                                           <span 
class="ptmr8t-">29:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">S</span>C<span 
class="small-caps">O</span><span 
class="small-caps">P</span><span 
class="small-caps">Y</span>S<span 
class="small-caps">T</span><span 
class="small-caps">M</span><span 
class="small-caps">T</span></span>(<span 
class="zptmcm7m-x-x-120">d</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">30:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis16x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">add RHS variable (except </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">itself) to the dependency list of </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">31:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="zptmcm7m-x-x-120">d.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">&#x222A;</span><span 
class="zptmcm7m-x-x-120">d.RHS.varName</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">32:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="zptmcm7m-x-x-120">d.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">-</span><span 
class="zptmcm7m-x-x-120">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">33:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">CondIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">34:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">35:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis17x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if </span><span 
class="zptmcm7m-">d </span><span 
class="ptmri8t-">is an assignment from a call to a builtin function</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">36:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">S</span>A<span 
class="small-caps">S</span><span 
class="small-caps">S</span><span 
class="small-caps">I</span><span 
class="small-caps">G</span><span 
class="small-caps">N</span><span 
class="small-caps">M</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">T</span>F<span 
class="small-caps">R</span><span 
class="small-caps">O</span><span 
class="small-caps">M</span>B<span 
class="small-caps">U</span><span 
class="small-caps">I</span><span 
class="small-caps">L</span><span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span></span>(<span 
class="zptmcm7m-x-x-120">d</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">37:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis18x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if the RHS builtin always returns integer (eg. floor(), ceil(), etc.)</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">38:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">D<span 
class="small-caps">O</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span>B<span 
class="small-caps">U</span><span 
class="small-caps">I</span><span 
class="small-caps">L</span><span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span>R<span 
class="small-caps">E</span><span 
class="small-caps">T</span><span 
class="small-caps">U</span><span 
class="small-caps">R</span><span 
class="small-caps">N</span>I<span 
class="small-caps">N</span><span 
class="small-caps">T</span></span>(<span 
class="zptmcm7m-x-x-120">d.RHS</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then </span></span>
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
   </div>
   <div class="algorithm">
                                                                                   

                                                                                   
<!--l. 321--><p class="indent" >   <hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="algorithmic">
        <span class="label-14.39996pt">
 <span 
class="ptmr8t-">39:</span> </span>&#xA0;<span 
class="algorithmic">                      <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">IntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">40:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">41:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis19x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if the RHS builtin always returns a double (eg. pi(), etc.)</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">42:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">D<span 
class="small-caps">O</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span>B<span 
class="small-caps">U</span><span 
class="small-caps">I</span><span 
class="small-caps">L</span><span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span>R<span 
class="small-caps">E</span><span 
class="small-caps">T</span><span 
class="small-caps">U</span><span 
class="small-caps">R</span><span 
class="small-caps">N</span>D<span 
class="small-caps">O</span><span 
class="small-caps">U</span><span 
class="small-caps">B</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span></span>(<span 
class="zptmcm7m-x-x-120">d.RHS</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">43:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">NotIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">44:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">45:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis20x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if the builtin returns integer depending</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">46:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis21x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">on the type of input arguments (eg. plus(), minus(), etc.)</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">47:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">D<span 
class="small-caps">O</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span>B<span 
class="small-caps">U</span><span 
class="small-caps">I</span><span 
class="small-caps">L</span><span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span>R<span 
class="small-caps">E</span><span 
class="small-caps">T</span><span 
class="small-caps">U</span><span 
class="small-caps">R</span><span 
class="small-caps">N</span>I<span 
class="small-caps">N</span><span 
class="small-caps">T</span>D<span 
class="small-caps">E</span><span 
class="small-caps">P</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">D</span><span 
class="small-caps">S</span></span>(<span 
class="zptmcm7m-x-x-120">d.RHS</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">48:</span> </span>&#xA0;<span  class="algorithmic">                      <img  src="thesis22x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">add argumnets (except </span><span 
class="zptmcm7m-">v</span><span 
class="ptmri8t-">) to the builtin to the dependency list of </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">49:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="zptmcm7m-x-x-120">d.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">&#x222A;</span><span 
class="zptmcm7m-x-x-120">d.RHS.args</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">50:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="zptmcm7m-x-x-120">d.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">-</span><span 
class="zptmcm7m-x-x-120">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">51:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">CondIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">52:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">53:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">NotIntOk</span>                                                                                                                                                                                  </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">54:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">55:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis23x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if </span><span 
class="zptmcm7m-">d </span><span 
class="ptmri8t-">is an assignment from an array access</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">56:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">S</span>A<span 
class="small-caps">S</span><span 
class="small-caps">S</span><span 
class="small-caps">I</span><span 
class="small-caps">G</span><span 
class="small-caps">N</span><span 
class="small-caps">M</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">T</span>F<span 
class="small-caps">R</span><span 
class="small-caps">O</span><span 
class="small-caps">M</span>A<span 
class="small-caps">R</span><span 
class="small-caps">R</span><span 
class="small-caps">A</span><span 
class="small-caps">Y</span>A<span 
class="small-caps">C</span><span 
class="small-caps">C</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span><span 
class="small-caps">S</span></span>(<span 
class="zptmcm7m-x-x-120">d</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">57:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis24x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">add RHS array variable (except </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">itself) to the dependency list of </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">58:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="zptmcm7m-x-x-120">d.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">&#x222A;</span><span 
class="zptmcm7m-x-x-120">d.RHS.arrayName</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">59:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="zptmcm7m-x-x-120">d.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">-</span><span 
class="zptmcm7m-x-x-120">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">60:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">CondIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">61:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">62:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis25x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">default return </span><span 
class="pcrro8t-">NotIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">63:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">NotIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">64:</span> </span>&#xA0;<span  class="algorithmic"><span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">procedure</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">     </span>&#xA0;<span  class="algorithmic">         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">65:</span> </span>&#xA0;<span  class="algorithmic"><span 
class="ptmb8t-x-x-120">procedure</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">G<span 
class="small-caps">E</span><span 
class="small-caps">T</span>S<span 
class="small-caps">T</span><span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>U<span 
class="small-caps">S</span><span 
class="small-caps">E</span></span>(<span 
class="zptmcm7m-x-x-120">v,u</span>)         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">66:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis26x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">be a variable and </span><span 
class="zptmcm7m-">u </span><span 
class="ptmri8t-">be a use expression of </span><span 
class="zptmcm7m-">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">67:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis27x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">u.deps </span><span 
class="ptmri8t-">be the dependency list of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for use </span><span 
class="zptmcm7m-">u</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">                                                                                                                                                                           <span 
class="ptmr8t-">68:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis28x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">is used as an array index in </span><span 
class="zptmcm7m-">u</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">69:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">S</span>U<span 
class="small-caps">S</span><span 
class="small-caps">E</span>A<span 
class="small-caps">R</span><span 
class="small-caps">R</span><span 
class="small-caps">A</span><span 
class="small-caps">Y</span>I<span 
class="small-caps">N</span><span 
class="small-caps">D</span><span 
class="small-caps">E</span><span 
class="small-caps">X</span></span>(<span 
class="zptmcm7m-x-x-120">u</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">70:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">IntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">71:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">72:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis29x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">is used as an argument to a builtin function</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">73:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">S</span>U<span 
class="small-caps">S</span><span 
class="small-caps">E</span>B<span 
class="small-caps">U</span><span 
class="small-caps">I</span><span 
class="small-caps">L</span><span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span>A<span 
class="small-caps">R</span><span 
class="small-caps">G</span><span 
class="small-caps">U</span><span 
class="small-caps">M</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">T</span></span>(<span 
class="zptmcm7m-x-x-120">u</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">74:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis30x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if argument type does not affect the correctness of the result from builtin (eg. plus())</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">75:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">D<span 
class="small-caps">O</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span>A<span 
class="small-caps">R</span><span 
class="small-caps">G</span>T<span 
class="small-caps">Y</span><span 
class="small-caps">P</span><span 
class="small-caps">E</span>A<span 
class="small-caps">ff</span><span 
class="small-caps">E</span><span 
class="small-caps">C</span><span 
class="small-caps">T</span>R<span 
class="small-caps">E</span><span 
class="small-caps">S</span><span 
class="small-caps">U</span><span 
class="small-caps">L</span><span 
class="small-caps">T</span></span>(<span 
class="zptmcm7m-x-x-120">u</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then </span></span>
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
   </div>
   <div class="algorithm">
                                                                                   

                                                                                   
<!--l. 370--><p class="indent" >   <hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="algorithmic">
        <span class="label-14.39996pt">
 <span 
class="ptmr8t-">76:</span> </span>&#xA0;<span 
class="algorithmic">                      <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">IntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">77:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">78:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis31x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if the argument type may affect the builtin result (eg. divide())</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">79:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">D<span 
class="small-caps">O</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span>A<span 
class="small-caps">R</span><span 
class="small-caps">G</span>T<span 
class="small-caps">Y</span><span 
class="small-caps">P</span><span 
class="small-caps">E</span>A<span 
class="small-caps">ff</span><span 
class="small-caps">E</span><span 
class="small-caps">C</span><span 
class="small-caps">T</span>R<span 
class="small-caps">E</span><span 
class="small-caps">S</span><span 
class="small-caps">U</span><span 
class="small-caps">L</span><span 
class="small-caps">T</span></span>(<span 
class="zptmcm7m-x-x-120">u</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">80:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">NotIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">81:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">82:</span> </span>&#xA0;<span  class="algorithmic">              <img  src="thesis32x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if the affect of the argument type depends on the types of other arguments</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">83:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">D<span 
class="small-caps">O</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span>A<span 
class="small-caps">R</span><span 
class="small-caps">G</span>T<span 
class="small-caps">Y</span><span 
class="small-caps">P</span><span 
class="small-caps">E</span>D<span 
class="small-caps">E</span><span 
class="small-caps">P</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">D</span>O<span 
class="small-caps">N</span>O<span 
class="small-caps">T</span><span 
class="small-caps">H</span><span 
class="small-caps">E</span><span 
class="small-caps">R</span>A<span 
class="small-caps">R</span><span 
class="small-caps">G</span><span 
class="small-caps">S</span></span>(<span 
class="zptmcm7m-x-x-120">u</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">84:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="zptmcm7m-x-x-120">u.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">u.deps</span><span 
class="zptmcm7y-x-x-120">&#x222A;</span><span 
class="zptmcm7m-x-x-120">u.args</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">85:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="zptmcm7m-x-x-120">u.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">u.deps</span><span 
class="zptmcm7y-x-x-120">-</span><span 
class="zptmcm7m-x-x-120">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">86:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">CondIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">87:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">88:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">89:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis33x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">if </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">is used in a copy statement</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">90:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">I<span 
class="small-caps">S</span>U<span 
class="small-caps">S</span><span 
class="small-caps">E</span>C<span 
class="small-caps">O</span><span 
class="small-caps">P</span><span 
class="small-caps">Y</span>S<span 
class="small-caps">T</span><span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span><span 
class="small-caps">M</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">T</span></span>(<span 
class="zptmcm7m-x-x-120">u</span>)&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>                                                                                                                                                                                  </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">91:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">IntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">92:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">93:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">return </span><span 
class="pcrr8t-x-x-120">NotIntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">94:</span> </span>&#xA0;<span  class="algorithmic"><span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">procedure</span></span>
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
   </div>
   <div class="algorithm">
                                                                                   

                                                                                   
<!--l. 436--><p class="indent" >   <a 
 id="x1-43002r2"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
 <div class="caption" 
><span class="id">Algorithm 2: </span><span  
class="content">Fixed point solver for the <span 
class="ptmri8t-x-x-120">IntegerOkay </span>analysis</span></div><!--tex4ht:label?: x1-43002r2 -->
<div class="algorithmic">
        <span class="label-14.39996pt">
 <span 
class="ptmr8t-">1:</span> </span>&#xA0;<span 
class="algorithmic"><span 
class="ptmb8t-x-x-120">procedure</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">F<span 
class="small-caps">I</span><span 
class="small-caps">X</span><span 
class="small-caps">E</span><span 
class="small-caps">D</span><span 
class="small-caps">P</span><span 
class="small-caps">O</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span><span 
class="small-caps">T</span>S<span 
class="small-caps">O</span><span 
class="small-caps">L</span><span 
class="small-caps">V</span><span 
class="small-caps">E</span><span 
class="small-caps">R</span></span>(<span 
class="zptmcm7m-x-x-120">V </span>)         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">2:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis34x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">V </span><span 
class="ptmri8t-">be the set of all the double variables in the function</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">3:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis35x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">V</span><span 
class="zptmcm7y-">&#x2032;</span><span 
class="ptmri8t-">be the set of variables that can be declared as integers</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">4:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis36x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v.D </span><span 
class="ptmri8t-">be the set of all definitions of variable </span><span 
class="zptmcm7m-">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">5:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis37x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">d.state </span><span 
class="ptmri8t-">be the integerOkay state of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for definition </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">6:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis38x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v.U </span><span 
class="ptmri8t-">be the set of all uses of variable </span><span 
class="zptmcm7m-">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">7:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis39x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">u.state </span><span 
class="ptmri8t-">be the integerOkay state of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for use </span><span 
class="zptmcm7m-">u</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">8:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis40x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v.State </span><span 
class="ptmri8t-">be the integerOkay state of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for the whole function</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">9:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis41x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v.State </span><span 
class="ptmri8t-">be initialized to </span><span 
class="zptmcm7y-">~</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">10:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032;&#x2190;&#x2205;</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">11:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">repeat</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">12:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span><sub><span 
class="zptmcm7m-x-x-90">old</span></sub> <span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">13:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">v </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">V</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">14:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">d </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">v.D</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>                                                                                                                                                                                  </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">15:</span> </span>&#xA0;<span  class="algorithmic">                             <span 
class="zptmcm7m-x-x-120">v.State </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">v.State</span><img  src="thesis42x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" ><span 
class="zptmcm7m-x-x-120">d.state</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">16:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">17:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">u </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">v.U</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">18:</span> </span>&#xA0;<span  class="algorithmic">                             <span 
class="zptmcm7m-x-x-120">v.State </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">v.State</span><img  src="thesis43x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" ><span 
class="zptmcm7m-x-x-120">u.state</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">19:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">20:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">v.State </span><span 
class="zptmcm7t-x-x-120">=</span> <span 
class="pcrr8t-x-x-120">IntOk</span>&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">21:</span> </span>&#xA0;<span  class="algorithmic">                             <span 
class="zptmcm7m-x-x-120">v</span><span 
class="zptmcm7y-x-x-120">&#x2032;&#x2190; </span><span 
class="zptmcm7m-x-x-120">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">22:</span> </span>&#xA0;<span  class="algorithmic">                             <span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032;&#x2190; </span><span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032;&#x222A;</span><span 
class="zptmcm7m-x-x-120">v</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">23:</span> </span>&#xA0;<span  class="algorithmic">                             <span 
class="zptmcm7m-x-x-120">V </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">V </span><span 
class="zptmcm7y-x-x-120">-</span><span 
class="zptmcm7m-x-x-120">v</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">24:</span> </span>&#xA0;<span  class="algorithmic">                             <span 
class="ptmrc8t-x-x-120">R<span 
class="small-caps">E</span><span 
class="small-caps">S</span><span 
class="small-caps">O</span><span 
class="small-caps">L</span><span 
class="small-caps">V</span><span 
class="small-caps">E</span>D<span 
class="small-caps">E</span><span 
class="small-caps">P</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">D</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">C</span><span 
class="small-caps">I</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span></span>(<span 
class="zptmcm7m-x-x-120">V,v</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>)         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">25:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">26:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">27:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="zptmcm7m-x-x-120">changed </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032;&#x2044;</span><span 
class="zptmcm7t-x-x-120">= </span><span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span><sub><span 
class="zptmcm7m-x-x-90">old</span></sub>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">28:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">until</span>&#x00A0;<span 
class="zptmcm7y-x-x-120">¬</span><span 
class="zptmcm7m-x-x-120">changed</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">29:</span> </span>&#xA0;<span  class="algorithmic"><span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">procedure</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">                                                                                                                                                                              </span>&#xA0;<span  class="algorithmic">         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">30:</span> </span>&#xA0;<span  class="algorithmic"><span 
class="ptmb8t-x-x-120">procedure</span>&#x00A0;<span 
class="ptmrc8t-x-x-120">R<span 
class="small-caps">E</span><span 
class="small-caps">S</span><span 
class="small-caps">O</span><span 
class="small-caps">L</span><span 
class="small-caps">V</span><span 
class="small-caps">E</span>D<span 
class="small-caps">E</span><span 
class="small-caps">P</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">D</span><span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">C</span><span 
class="small-caps">I</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span></span>(<span 
class="zptmcm7m-x-x-120">V,v</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>)         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">31:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis44x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">V </span><span 
class="ptmri8t-">be the set of all the double variables in the function</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">32:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis45x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v</span><span 
class="zptmcm7y-">&#x2032;</span><span 
class="ptmri8t-">be an IntegerOkay variable</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">33:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis46x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v.D </span><span 
class="ptmri8t-">be the set of all definitions of variable </span><span 
class="zptmcm7m-">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">34:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis47x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">d.state </span><span 
class="ptmri8t-">be the integerOkay state of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for definition </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">35:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis48x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">d.deps </span><span 
class="ptmri8t-">be the dependency list of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for definition </span><span 
class="zptmcm7m-">d</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">36:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis49x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">v.U </span><span 
class="ptmri8t-">be the set of all uses of variable </span><span 
class="zptmcm7m-">v</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">37:</span> </span>&#xA0;<span  class="algorithmic">       <img  src="thesis50x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">u.state </span><span 
class="ptmri8t-">be the integerOkay state of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for use </span><span 
class="zptmcm7m-">u</span>
        </span>
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
   </div>
   <div class="algorithm">
                                                                                   

                                                                                   
<!--l. 485--><p class="indent" >   <hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="algorithmic">
        <span class="label-14.39996pt">
 <span 
class="ptmr8t-">38:</span> </span>&#xA0;<span 
class="algorithmic">       <img  src="thesis51x.png" alt="&#x22B3; "  class="math" ><span 
class="ptmri8t-">Let </span><span 
class="zptmcm7m-">u.deps </span><span 
class="ptmri8t-">be the dependency list of variable </span><span 
class="zptmcm7m-">v </span><span 
class="ptmri8t-">for use </span><span 
class="zptmcm7m-">u</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">39:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">v </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">V</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">40:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">d </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">v.D</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">41:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="zptmcm7m-x-x-120">d.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">-</span><span 
class="zptmcm7m-x-x-120">v</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">42:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">d.deps </span><span 
class="zptmcm7t-x-x-120">= </span><span 
class="zptmcm7y-x-x-120">&#x2205;</span>&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">43:</span> </span>&#xA0;<span  class="algorithmic">                             <span 
class="zptmcm7m-x-x-120">d.state </span><span 
class="zptmcm7y-x-x-120">&#x2190;</span><span 
class="pcrr8t-x-x-120">IntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">44:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">45:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">46:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">for all</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">u </span><span 
class="zptmcm7y-x-x-120">&#x2208; </span><span 
class="zptmcm7m-x-x-120">v.U</span>&#x00A0;<span 
class="ptmb8t-x-x-120">do</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">47:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="zptmcm7m-x-x-120">u.deps </span><span 
class="zptmcm7y-x-x-120">&#x2190; </span><span 
class="zptmcm7m-x-x-120">u.deps</span><span 
class="zptmcm7y-x-x-120">-</span><span 
class="zptmcm7m-x-x-120">v</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">48:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">if</span>&#x00A0;<span 
class="zptmcm7m-x-x-120">u.deps </span><span 
class="zptmcm7t-x-x-120">= </span><span 
class="zptmcm7y-x-x-120">&#x2205;</span>&#x00A0;<span 
class="ptmb8t-x-x-120">then</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">49:</span> </span>&#xA0;<span  class="algorithmic">                             <span 
class="zptmcm7m-x-x-120">u.state </span><span 
class="zptmcm7y-x-x-120">&#x2190;</span><span 
class="pcrr8t-x-x-120">IntOk</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">50:</span> </span>&#xA0;<span  class="algorithmic">                      <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">if</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">51:</span> </span>&#xA0;<span  class="algorithmic">              <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>         </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">52:</span> </span>&#xA0;<span  class="algorithmic">       <span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">for</span>                                                                                                                                                                                  </span><br class="algorithmic"/><span class="label-14.39996pt">  <span 
class="ptmr8t-">53:</span> </span>&#xA0;<span  class="algorithmic"><span 
class="ptmb8t-x-x-120">end</span>&#x00A0;<span 
class="ptmb8t-x-x-120">procedure</span></span>
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
   </div>
<a 
 id="x1-43003r72"></a>
<h4 class="subsectionHead"><span class="titlemark">8.4.2    </span> <a 
 id="x1-440002"></a>STEP 2: The Fixed Point Solver</h4>
<!--l. 509--><p class="noindent" >Once the initial state has been assigned for each use and each definition of every variable in STEP
1, the next step is to find the variables that can be of integer type across the function. The fixed
point solver iteratively finds these variables until a fixed point is reached and no more variables
are safe to be defined as integers.
<!--l. 515--><p class="indent" >   The input to the fixed point solver is the set of all double variables <span 
class="zptmcm7m-x-x-120">V </span>with state
and dependency list initialized for each definition and each use of every variable <span 
class="zptmcm7m-x-x-120">v </span>in
<span 
class="zptmcm7m-x-x-120">V </span>. The output of the fixed point solver is <span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032;</span>, the set of variables that can be safely
defined as integers. The fixed point solver also defines the variable <span 
class="zptmcm7m-x-x-120">v.State </span>that stores the
final state value for the variable <span 
class="zptmcm7m-x-x-120">v </span>in the function, independent of any use or definition.
For each variable <span 
class="zptmcm7m-x-x-120">v</span>, <span 
class="zptmcm7m-x-x-120">v.State </span>is assigned an initial empty value <span 
class="zptmcm7y-x-x-120">~</span>. <span 
class="zptmcm7m-x-x-120">V</span><span 
class="zptmcm7y-x-x-120">&#x2032; </span>is initially set to
<span 
class="zptmcm7y-x-x-120">&#x2205;</span>.
<!--l. 525--><p class="indent" >   Algorithm <a 
href="#x1-43002r2">2<!--tex4ht:ref: alg:fps --></a> provides an algorithm for this fixed point solver. Note that the algorithm uses a
<img 
src="thesis52x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" > operator to merge the state values of various definitions and uses of a variable to obtain its
final state. Table <a 
href="#x1-44001r2">8.2<!--tex4ht:ref: Tab:merge --></a> gives a definition of the <img 
src="thesis53x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" > operator used by this analysis. In the
table, <span 
class="pcrr8t-x-x-120">CondIntOk</span>(<span 
class="zptmcm7m-x-x-120">s,s </span><span 
class="zptmcm7t-x-x-120">= </span><span 
class="zptmcm7y-x-x-120">&#x2205;</span>) is the case when <span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">&#x222A;</span><span 
class="zptmcm7m-x-x-120">u.deps </span><span 
class="zptmcm7t-x-x-120">= </span><span 
class="zptmcm7y-x-x-120">&#x2205; </span>for a variable <span 
class="zptmcm7m-x-x-120">v</span>, and
<span 
class="pcrr8t-x-x-120">CondIntOk</span>(<span 
class="zptmcm7m-x-x-120">s,s</span><span 
class="zptmcm7m-x-x-120">&#x2260;</span><span 
class="zptmcm7y-x-x-120">&#x2205;</span>) is the case when <span 
class="zptmcm7m-x-x-120">d.deps</span><span 
class="zptmcm7y-x-x-120">&#x222A;</span><span 
class="zptmcm7m-x-x-120">u.deps</span><span 
class="zptmcm7m-x-x-120">&#x2260;</span><span 
class="zptmcm7y-x-x-120">&#x2205;</span>. <div class="table">
                                                                                   

                                                                                   
<!--l. 533--><p class="indent" >   <a 
 id="x1-44001r2"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
 <!--tex4ht:inline--><div class="tabular"> <table id="TBL-2" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"></colgroup><colgroup id="TBL-2-2g"><col 
id="TBL-2-2"></colgroup><colgroup id="TBL-2-3g"><col 
id="TBL-2-3"></colgroup><colgroup id="TBL-2-4g"><col 
id="TBL-2-4"></colgroup><colgroup id="TBL-2-5g"><col 
id="TBL-2-5"></colgroup><colgroup id="TBL-2-6g"><col 
id="TBL-2-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-1"  
class="td11">       <img 
src="thesis54x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" >           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-2"  
class="td11">  <span 
class="pcrr8t-">IntOk  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-3"  
class="td11"> <span 
class="pcrr8t-">CondIntOk</span><span 
class="ptmr8t-">(</span><span 
class="zptmcm7m-">s,s </span><span 
class="zptmcm7t-">= </span><span 
class="zptmcm7y-">&#x2205;</span><span 
class="ptmr8t-">)  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-4"  
class="td11"> <span 
class="pcrr8t-">CondIntOk</span><span 
class="ptmr8t-">(</span><span 
class="zptmcm7m-">s,s</span><span 
class="zptmcm7m-">&#x2260;</span><span 
class="zptmcm7y-">&#x2205;</span><span 
class="ptmr8t-">)  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-5"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-6"  
class="td11">        <span 
class="zptmcm7y-">~      </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-1"  
class="td11">      <span 
class="pcrr8t-">IntOk      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-2"  
class="td11">  <span 
class="pcrr8t-">IntOk  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-3"  
class="td11">      <span 
class="pcrr8t-">IntOk      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-4"  
class="td11">    <span 
class="pcrr8t-">NotIntOk    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-5"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-6"  
class="td11">      <span 
class="pcrr8t-">IntOk      </span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-1"  
class="td11"> <span 
class="pcrr8t-">CondIntOk</span><span 
class="ptmr8t-">(</span><span 
class="zptmcm7m-">s,s </span><span 
class="zptmcm7t-">= </span><span 
class="zptmcm7y-">&#x2205;</span><span 
class="ptmr8t-">) </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-2"  
class="td11"> <span 
class="pcrr8t-">IntOk </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-3"  
class="td11"> <span 
class="pcrr8t-">IntOk </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-4"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-5"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-6"  
class="td11"> <span 
class="pcrr8t-">CondIntOk</span><span 
class="ptmr8t-">(</span><span 
class="zptmcm7m-">s,s </span><span 
class="zptmcm7t-">= </span><span 
class="zptmcm7y-">&#x2205;</span><span 
class="ptmr8t-">)</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-1"  
class="td11">  <span 
class="pcrr8t-">CondIntOk</span><span 
class="ptmr8t-">(</span><span 
class="zptmcm7m-">s,s</span><span 
class="zptmcm7m-">&#x2260;</span><span 
class="zptmcm7y-">&#x2205;</span><span 
class="ptmr8t-">)    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-2"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-3"  
class="td11">    <span 
class="pcrr8t-">NotIntOk    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-4"  
class="td11">    <span 
class="pcrr8t-">NotIntOk    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-5"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-6"  
class="td11">  <span 
class="pcrr8t-">CondIntOk</span><span 
class="ptmr8t-">(</span><span 
class="zptmcm7m-">s,s</span><span 
class="zptmcm7m-">&#x2260;</span><span 
class="zptmcm7y-">&#x2205;</span><span 
class="ptmr8t-">)    </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-1"  
class="td11">    <span 
class="pcrr8t-">NotIntOk    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-2"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-3"  
class="td11">    <span 
class="pcrr8t-">NotIntOk    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-4"  
class="td11">    <span 
class="pcrr8t-">NotIntOk    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-5"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-6"  
class="td11">    <span 
class="pcrr8t-">NotIntOk    </span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-6-1"  
class="td11"> <span 
class="zptmcm7y-">~ </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-6-2"  
class="td11"> <span 
class="pcrr8t-">IntOk </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-6-3"  
class="td11"> <span 
class="pcrr8t-">CondIntOk</span><span 
class="ptmr8t-">(</span><span 
class="zptmcm7m-">s,s </span><span 
class="zptmcm7t-">= </span><span 
class="zptmcm7y-">&#x2205;</span><span 
class="ptmr8t-">) </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-6-4"  
class="td11"> <span 
class="pcrr8t-">CondIntOk</span><span 
class="ptmr8t-">(</span><span 
class="zptmcm7m-">s,s</span><span 
class="zptmcm7m-">&#x2260;</span> <span 
class="zptmcm7y-">&#x2205;</span><span 
class="ptmr8t-">) </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-6-5"  
class="td11"> <span 
class="pcrr8t-">NotIntOk </span></td> <td  style="white-space:nowrap; text-align:center;" id="TBL-2-6-6"  
class="td11"> <span 
class="zptmcm7y-">~</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-7-1"  
class="td11">                 </td></tr></table>                                                                               </div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;8.2: </span><span  
class="content">Definition of the <img 
src="thesis55x.png" alt="&#x22B3;&#x22B2;"  class="bowtie" > merge operator</span></div><!--tex4ht:label?: x1-44001r2 -->
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
   </div>
                                                                                   

                                                                                   
<a 
 id="x1-44002r71"></a>
<h3 class="sectionHead"><span class="titlemark">8.5    </span> <a 
 id="x1-450005"></a>An Example</h3>
   <div class="minipage"><!--l. 562--><p class="noindent" >Consider the following pseudocode for example:
<div class="verbatim" id="verbatim-1">
/*1*/&#x00A0;x&#x00A0;=&#x00A0;3.0;
&#x00A0;<br />/*2*/&#x00A0;y&#x00A0;=&#x00A0;3.14;
&#x00A0;<br />/*3*/&#x00A0;z&#x00A0;=&#x00A0;x+y;
&#x00A0;<br />/*4*/&#x00A0;for&#x00A0;(i&#x00A0;=&#x00A0;0;&#x00A0;i&#x00A0;&#x003C;&#x00A0;5;&#x00A0;i++)
&#x00A0;<br />/*5*/&#x00A0;&#x00A0;&#x00A0;y&#x00A0;=&#x00A0;y+i;
&#x00A0;<br />/*6*/&#x00A0;end
&#x00A0;<br />
</div>
<!--l. 571--><p class="nopar" ></div>
<!--l. 575--><p class="noindent" >In this example, the initialization step proceeds as follows. On line 1, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> is <span 
class="ptmri8t-x-x-120">IntegerOkay </span>since 3.0 is
a <span 
class="ptmri8t-x-x-120">real integer</span>. On line 2, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> is <span 
class="ptmri8t-x-x-120">Not IntegerOkay</span>. On line 3, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">z</span></span></span> is <span 
class="ptmri8t-x-x-120">Conditionally IntegerOkay </span>and
depends on <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span>, whereas <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> are <span 
class="ptmri8t-x-x-120">IntegerOkay </span>in their use in the expression <span 
class="pcrr8t-x-x-120">x+y</span>. On line
4, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> is <span 
class="ptmri8t-x-x-120">IntegerOkay </span>in its definition <span 
class="pcrr8t-x-x-120">i = 0</span>, in its use in the expression <span 
class="pcrr8t-x-x-120">i &#x003C; 5</span>, and also in
the definition <span 
class="pcrr8t-x-x-120">i++</span>. On line 5, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> is conditionally <span 
class="ptmri8t-x-x-120">IntegerOkay </span>and depends on <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> in its
definition and it is <span 
class="ptmri8t-x-x-120">IntegerOkay </span>in its use in <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y+i</span></span></span>. <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> is <span 
class="ptmri8t-x-x-120">IntegerOkay </span>in its use in <span 
class="pcrr8t-x-x-120">y+i</span>. Note
that on line 5, we do not include <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> in its own dependency list, since if we say, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> is
conditionally <span 
class="ptmri8t-x-x-120">IntegerOkay </span>and depends on <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span>, it is safe to declare <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> as integer as long as
it does not have any other dependencies and is <span 
class="ptmri8t-x-x-120">IntegerOkay </span>everywhere else in the
function.
<!--l. 592--><p class="indent" >   The fixed-point solver for this example proceeds as follows. We look for variables that are
<span 
class="ptmri8t-x-x-120">IntegerOkay </span>at every point in the function. <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> are two such variables and we can
declare them to be an integer. We also remove x from the dependency list of definition
of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">z</span></span></span> on line 3, and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> from the dependency list of definition of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> on line 5. Next, we
                                                                                   

                                                                                   
search again and find that <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> is <span 
class="ptmri8t-x-x-120">IntegerOkay </span>in its use on line 3 and line 5, and also in
its definition on line 5, however it is <span 
class="ptmri8t-x-x-120">Not IntegerOkay </span>in its definition on line 2 and
thus it cannot be declared as an integer. <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">z</span></span></span> on line 3 is dependent on <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> and thus it can
also not be declared as an integer. At this point, we have reached a fixed point since
there are no more upgrades. Finally, we declare <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">x</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">i</span></span></span> as integers, and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">y</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8t-x-x-120">z</span></span></span> as
doubles.
                                                                                   

                                                                                   
<!--l. 426--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-45001r9"></a>
<a 
 id="Q1-1-78"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;9</span>
<!--l. 426--><p class="noindent" ><span 
class="phvb8t-x-x-197">Evaluation</span>
<!--l. 426--><p class="noindent" >___________________________________________________________________________________
<!--l. 1--><p class="indent" >   In this chapter we evaluate the performance of our compiler. In this research our main aim was
to generate <span 
class="ptmrc8t-x-x-120">X10 </span>code for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>such that its sequential performance would be comparable to
the performance provided by the state of the art tools which translate <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to more traditional
imperative languages such as C and Fortran. To demonstrate our results, we compiled a set of 17
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programs to <span 
class="ptmrc8t-x-x-120">X10 </span>via the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler and compared their performance
results with those of the original <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programs, C programs generated for our
benchmarks via the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder, and Fortran programs generated by the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span></span>
compiler.<span class="footnote-mark"><a 
href="thesis2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-45002f1"></a><span class="footnote-mark"><a 
 id="fn1x0">      <sup class="textsuperscript">1</sup></a></span><span 
class="ptmr8t-">We also compared our results to Octave, a widely used open source alternative to </span><span 
class="ptmrc8t-">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span><span 
class="ptmr8t-">. However, since</span>
  <span 
class="ptmr8t-">Octave involves an interpreter, it performed slower than the standard </span><span 
class="ptmrc8t-">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="ptmr8t-">compiler (with a mean slowdown of</span>
  <span 
class="ptmr8t-">66.67 times slower) over all of our benchmarks, thus in this section we do not concentrate on comparison of our</span>
  <span 
class="ptmr8t-">results with Octave.</span> 
In addition to showing our best overall sequential performance, we also demonstrate the
results of compiling the generated <span 
class="ptmrc8t-x-x-120">X10 </span>code to Java compared to C++, effects on the
performance for the various efficiency enhancing techniques discussed in this thesis, and
finally the performance of the parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code generated for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor</span>
loops.
<a 
 id="x1-45003r77"></a>
                                                                                   

                                                                                   
<h3 class="sectionHead"><span class="titlemark">9.1    </span> <a 
 id="x1-460001"></a>Benchmarks</h3>
<!--l. 22--><p class="noindent" >The set of benchmarks used for our experiments consists of benchmarks from various sources; Most of
them are from related projects like FALCON&#x00A0;<span class="cite">[<a 
href="#Xfalcon">RP99</a>]</span> and OTTER&#x00A0;<span class="cite">[<a 
href="#XQMSZ98">QMSZ98a</a>]</span>, Chalmers university of
Technology<span class="footnote-mark"><a 
href="thesis3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-46001f2"></a><span class="footnote-mark"><a 
 id="fn2x0">      <sup class="textsuperscript">2</sup></a></span><a 
href="http://www.elmagn.chalmers.se/courses/CEM/" class="url" ><span 
class="pcrr8t-">http://www.elmagn.chalmers.se/courses/CEM/</span></a> , &#8220;Mathworks&#8217;
central file excahange&#8221;<span class="footnote-mark"><a 
href="thesis4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-46002f3"></a><span class="footnote-mark"><a 
 id="fn3x0">      <sup class="textsuperscript">3</sup></a></span><a 
href="http://www.mathworks.com/matlabcentral/fileexchange" class="url" ><span 
class="pcrr8t-">http://www.mathworks.com/matlabcentral/fileexchange</span></a> ,
and the presentation on parallel programming in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>by Burkardt and
Cliff<span class="footnote-mark"><a 
href="thesis5.html#fn4x0"><sup class="textsuperscript">4</sup></a></span><a 
 id="x1-46003f4"></a> .
This set of benchmarks covers the commonly used <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>features like arrays of
different dimensions, loops, use of numerical functions like random number generation,
trigonometric operations, and array operations like transpose and matrix multiplication.
Table <a 
href="#x1-46004r1">9.1<!--tex4ht:ref: Tab:benchmark --></a> gives a description of all the benchmarks we used and shows their special
features.
   <div class="table">
                                                                                   

                                                                                   
<!--l. 38--><p class="indent" >   <a 
 id="x1-46004r1"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
 <!--tex4ht:inline--><div class="tabular"> <table id="TBL-3" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1"></colgroup><colgroup id="TBL-3-2g"><col 
id="TBL-3-2"></colgroup><colgroup id="TBL-3-3g"><col 
id="TBL-3-3"></colgroup><colgroup id="TBL-3-4g"><col 
id="TBL-3-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-1"  
class="td11"> <span 
class="ptmb8t-x-x-120">Benchmark  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-2"  
class="td11"> <span 
class="ptmb8t-x-x-120">Source                            </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-3-1-3"  
class="td11"> <!--l. 3--><p class="noindent" ><span 
class="ptmb8t-x-x-120">Description</span>                                       </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-1-4"  
class="td11"> <!--l. 4--><p class="noindent" ><span 
class="ptmb8t-x-x-120">Key features</span>                                     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-1"  
class="td11"> bbai                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-2"  
class="td11"> <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>file exchange  </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-2-3"  
class="td11"> <!--l. 5--><p class="noindent" >Implementation     of     the     Babai
  estimation algorithm                          </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-2-4"  
class="td11"> <!--l. 5--><p class="noindent" >2-D     arrays,     random     number
  generation                                          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-1"  
class="td11"> bubl                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-2"  
class="td11"> McLab                            </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-3-3"  
class="td11"> <!--l. 6--><p class="noindent" >Bubble sort                                        </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-3-4"  
class="td11"> <!--l. 6--><p class="noindent" >1-D array, nested loops                      </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-1"  
class="td11"> capr                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-2"  
class="td11"> Chalmers University      </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-4-3"  
class="td11"> <!--l. 7--><p class="noindent" >Computes   the   capacitance   of   a
  transmission           line           using
  finite  difference  and  Gauss-Seidel
  method                                               </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-4-4"  
class="td11"> <!--l. 7--><p class="noindent" >Array  operations  on  2-D  arrays,
  nested loops                                       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-1"  
class="td11"> clos                 </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-5-2"  
class="td11"> Otter project                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-5-3"  
class="td11"> <!--l. 8--><p class="noindent" >Calculates the transitive closure of
  a directed graph                                 </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-5-4"  
class="td11"> <!--l. 8--><p class="noindent" >Matrix multiplication, 2-D arrays      </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-6-1"  
class="td11"> crni                 </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-6-2"  
class="td11"> Falcon project                </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-6-3"  
class="td11"> <!--l. 9--><p class="noindent" >Crank-Nicholson   solution   to   the
  heat equation                                     </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-6-4"  
class="td11"> <!--l. 9--><p class="noindent" >read/write   operations   on   a   very
  large 2-D array                                   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-7-1"  
class="td11"> dich                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-7-2"  
class="td11"> Falcon project                </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-7-3"  
class="td11"> <!--l. 10--><p class="noindent" >Dirichlet    solution    to    Laplace&#8217;s
  equation                                             </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-7-4"  
class="td11"> <!--l. 10--><p class="noindent" >Array  operations  on  2-D  arrays,
  nested loops                                       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-8-1"  
class="td11"> diff                 </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-8-2"  
class="td11"> <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>file exchange  </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-8-3"  
class="td11"> <!--l. 11--><p class="noindent" >Calculates the diffraction pattern of
  monochromatic light                         </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-8-4"  
class="td11"> <!--l. 11--><p class="noindent" >2-D        arrays,        Concatenation
  operations, complex numbers            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-9-1"  
class="td11"> edit                 </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-9-2"  
class="td11"> <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>file exchange  </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-9-3"  
class="td11"> <!--l. 12--><p class="noindent" >Calculates     the     edit     distance
  between two strings                           </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-9-4"  
class="td11"> <!--l. 12--><p class="noindent" >many 1-D arrays of characters           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-10-1"  
class="td11"> fiff                  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-10-2"  
class="td11"> Falcon project                </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-10-3"  
class="td11"> <!--l. 13--><p class="noindent" >Computes    the    finite    difference
  solution to the wave equation            </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-10-4"  
class="td11"> <!--l. 13--><p class="noindent" >Array  operations  on  2-D  arrays,
  nested loops                                       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-11-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-11-1"  
class="td11"> lgdr                 </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-11-2"  
class="td11"> &#x00A0;                                     </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-11-3"  
class="td11"> <!--l. 14--><p class="noindent" >Calculates  derivatives  of  Legendre
  polynomials                                       </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-11-4"  
class="td11"> <!--l. 14--><p class="noindent" >Array transpose on row vectors         </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-12-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-12-1"  
class="td11"> mbrt               </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-12-2"  
class="td11"> <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>project              </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-12-3"  
class="td11"> <!--l. 15--><p class="noindent" >Computes Mandelbrot sets                </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-12-4"  
class="td11"> <!--l. 15--><p class="noindent" >Complex numbers, <span 
class="pcrr8t-x-x-120">parfor </span>loop     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-13-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-13-1"  
class="td11"> nb1d               </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-13-2"  
class="td11"> Otter project                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-13-3"  
class="td11"> <!--l. 16--><p class="noindent" >Simulates       the       1-dimensional
  n-body problem                                 </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-13-4"  
class="td11"> <!--l. 16--><p class="noindent" >Column-vectors,     nested     loops,
  <span 
class="pcrr8t-x-x-120">parfor </span>loop                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-14-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-14-1"  
class="td11"> matmul           </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-14-2"  
class="td11"> McLab                            </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-14-3"  
class="td11"> <!--l. 17--><p class="noindent" >naive matrix multiplication                </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-14-4"  
class="td11"> <!--l. 17--><p class="noindent" >2-D arrays, nested loops, <span 
class="pcrr8t-x-x-120">parfor</span>
 loop                                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-15-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-15-1"  
class="td11"> mcpi               </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-15-2"  
class="td11"> McLab                            </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-15-3"  
class="td11"> <!--l. 18--><p class="noindent" >Calculates  <span 
class="zptmcm7m-x-x-120">&#x03C0; </span>by  the  Monte  Carlo
  method                                               </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-15-4"  
class="td11"> <!--l. 18--><p class="noindent" >Scalar   values,   Random   number
  generation, <span 
class="pcrr8t-x-x-120">parfor </span>loop                  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-16-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-16-1"  
class="td11"> numprime       </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-16-2"  
class="td11"> Burkardt and Cliff          </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-16-3"  
class="td11"> <!--l. 19--><p class="noindent" >Simulates the sieve of Eratosthenes
  for  calculating  number  of  prime
  numbers less than a given number     </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-16-4"  
class="td11"> <!--l. 19--><p class="noindent" >Scalar     values,     nested     loops,
  <span 
class="pcrr8t-x-x-120">parfor </span>loop                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-17-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-17-1"  
class="td11"> optstop           </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-17-2"  
class="td11"> Burkardt and Cliff          </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-17-3"  
class="td11"> <!--l. 20--><p class="noindent" >Solution  to  the  optimal  stopping
  problem                                              </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-17-4"  
class="td11"> <!--l. 20--><p class="noindent" >Row    vectors,    random    number
  generation, <span 
class="pcrr8t-x-x-120">parfor </span>loop                  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-18-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-18-1"  
class="td11"> quadrature      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-18-2"  
class="td11"> Burkardt and Cliff          </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-18-3"  
class="td11"> <!--l. 21--><p class="noindent" >Simulates the quadrature approach
  for calculating integral of a function  </td><td  style="white-space:wrap; text-align:left;" id="TBL-3-18-4"  
class="td11"> <!--l. 21--><p class="noindent" >Scalar values, <span 
class="pcrr8t-x-x-120">parfor </span>loop             </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-19-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-19-1"  
class="td11">          </td></tr></table>                                                                          </div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;9.1: </span><span  
class="content">Benchmarks</span></div><!--tex4ht:label?: x1-46004r1 -->
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
   </div>
<a 
 id="x1-46005r79"></a>
<h3 class="sectionHead"><span class="titlemark">9.2    </span> <a 
 id="x1-470002"></a>Experimental Setup</h3>
<!--l. 49--><p class="noindent" >We used Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>release R2013a to execute our benchmarks in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>and
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder. We also executed them using the GNU Octave version 3.2.4. We compiled our
benchmarks to Fortran using the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>compiler and compiled the generated Fortran code
using the GCC 4.6.3 GFortran compiler with optimization level <span 
class="pcrr8t-x-x-120">-O3</span>. To compile the generated
<span 
class="ptmrc8t-x-x-120">X10 </span>code from our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler, we used <span 
class="ptmrc8t-x-x-120">X10 </span>version 2.4.0. We used OpenJDK Java
1.7.0_51 to compile and run Java code generated by the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler, and GCC 4.6.4 g++
compiler to compile the C++ code generated by the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler. All the experiments were run
on a machine with Intel(R) Core(TM) i7-3820 CPU @ 3.60GHz processor and 16 GB memory
running GNU/Linux(3.8.0-35-generic #52-Ubuntu). For each benchmark, we used an input
size to make the program run for approximately 20 seconds on the de facto <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
compiler. We used the same input sizes for compiling and running benchmarks via
other compilers. We collected the execution times (averaged over five runs) for each
benchmark and compared their speedups over Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>runtimes (normalized to
one).
<a 
 id="x1-47001r81"></a>
<h3 class="sectionHead"><span class="titlemark">9.3    </span> <a 
 id="x1-480003"></a><span 
class="ptmrc8t-x-x-120">X10 </span>Compiler Variations</h3>
<!--l. 67--><p class="noindent" >The <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler compiles the source <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code to <span 
class="ptmrc8t-x-x-120">X10 </span>code, which is then compiled
by the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler. The <span 
class="ptmrc8t-x-x-120">X10 </span>compiler is also a source to source compiler that provides two
backends, a C++ backend that generates C++ code and a Java backend that generates Java code,
which are then compiled by their respective compilers to executable code. Both these backends
provide a <span 
class="pcrr8t-x-x-120">-NO_CHECKS </span>switch that generates the C++/Java code that does not include dynamic
array bounds checks, which are otherwise included by default. As we described in section <a 
href="#x1-200001">4.1.1<!--tex4ht:ref: sec:compsimple --></a>,
we altered the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler to use column-major array indexing. We always used the <span 
class="pcrr8t-x-x-120">-O</span>
optimization flag for the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler for both the backends, with notable exceptions
                                                                                   

                                                                                   
where the <span 
class="ptmrc8t-x-x-120">X10 </span>optimizer generated code which interacted extremely negatively with
the Java JIT, as discussed in section <a 
href="#x1-510001">9.5.1<!--tex4ht:ref: sec:BOOM --></a>. For all of our experiments, we used our
IntegerOkay analysis, except for the experiment which investigates the performance impact of
this analysis. Our best results were obtained by compiling the generated <span 
class="ptmrc8t-x-x-120">X10 </span>code
with the C++ backend with <span 
class="pcrr8t-x-x-120">-NO_CHECKS </span>enabled, where the <span 
class="ptmrc8t-x-x-120">X10 </span>code itself was
generated by the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler with simple arrays and our IntegerOkay analysis
enabled.
<a 
 id="x1-48001r82"></a>
<h3 class="sectionHead"><span class="titlemark">9.4    </span> <a 
 id="x1-490004"></a>Overall <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Performance</h3>
<!--l. 89--><p class="noindent" >We compared the performance of the generated <span 
class="ptmrc8t-x-x-120">X10 </span>code with that of the original <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code
run on Mathworks&#8217; implementation of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. To compare against the state of the art static
compilers, we also compared the performance of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>generated <span 
class="ptmrc8t-x-x-120">X10 </span>code with the C
code generated by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder and the Fortran code generated by the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span></span>
compiler.
                                                                                   

                                                                                   
<!--l. 95--><p class="indent" >   <a 
 id="x1-49001r1"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="center" 
>
<!--l. 96--><p class="noindent" >
<!--l. 97--><p class="noindent" ><img 
src="thesis56x.png" alt="PIC" class="graphics"><!--tex4ht:graphics  
name="thesis56x.png" src="Figures/final/overall_perf.pdf"  
-->
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;9.1: </span><span  
class="content">Performance of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>vs other state-of-the-art static compilers, reported as
speedups relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better.</span></div><!--tex4ht:label?: x1-49001r1 -->
</div>
                                                                                   

                                                                                   
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
<!--l. 104--><p class="indent" >   <span 
class="ptmri8t-x-x-120">Figure </span><a 
href="#x1-49001r1"><span 
class="ptmri8t-x-x-120">9.1</span><!--tex4ht:ref: Fig:overall_perf --></a> shows the speedups and slowdowns for the code generated for our benchmarks by
different compilers. For <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>we have included the results for the <span 
class="ptmrc8t-x-x-120">X10 </span>code compiled by the
<span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend compiled, once with <span 
class="pcrr8t-x-x-120">-NO_CHECKS </span>enabled and once with <span 
class="pcrr8t-x-x-120">-NO_CHEKCS</span>
disabled. For Fortran we included the results for the code generated without bounds checks. C
code from <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder was generated with default settings and includes bounds checks. We
also calculated the geometric mean of speedups(slowdowns) for all the benchmarks for each
compiler.
<!--l. 113--><p class="indent" >   Overall, one can see that the static compilers all provide excellent speedups, often of at least
an order of magnitude faster. Thus, for the kinds of benchmarks in our benchmark set, it would
seem that tools like the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span></span>, and our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>tools are very useful. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
outperforms <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder in 9 out of 17 benchmarks, when compared with the <span 
class="ptmrc8t-x-x-120">X10 </span>version
compiled with bounds checks, and 10 out of 17 benchmarks when compared with the
version with no bounds checks. For Fortran, the generated <span 
class="ptmrc8t-x-x-120">X10 </span>does better in 7 out
of 17 benchmarks with no bounds checks, and 6 out of 17 benchmarks with bounds
checks enabled. Note that <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder was not able to compile 1 of our benchmarks
(<span 
class="ptmri8t-x-x-120">diff </span>) due to the dynamic array growth involved in it; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>supports dynamic array
growth.
<!--l. 126--><p class="indent" >   We achieved a mean speedup of 4.8 over <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, for the <span 
class="ptmrc8t-x-x-120">X10 </span>code with bounds checks,
and 6.8 for the x10 code with no bounds checks. On the other hand, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder
gave a mean speedup of 6.3 and <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>gave a mean speedup of 10.2. However, we
noticed that our mean result was skewed due to two benchmarks for which the generated
<span 
class="ptmrc8t-x-x-120">X10 </span>performed very poorly compared to the generated C code. These benchmarks
are <span 
class="ptmri8t-x-x-120">clos </span>and <span 
class="ptmri8t-x-x-120">lgdr</span>. In the following paragraphs we explain the reason for their poor
performance. If we do not consider these two benchmarks, we get a mean speedup of 6.7 for
the <span 
class="ptmrc8t-x-x-120">X10 </span>code with bounds checks compared to 5.2 for the C code. For the <span 
class="ptmrc8t-x-x-120">X10 </span>code
compiled with no bounds checks we get a mean speedup of 9.3 compared to 11.6 for
Fortran.
<!--l. 138--><p class="indent" >   <span 
class="ptmri8t-x-x-120">clos </span>involves repeated calls to the builtin matrix multiplication operation for the 2-dimensional
matrices. The generated C code from <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder uses highly optimized matrix multiplication
libraries compared to the naive matrix multiplication implementation used by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>. Thus,
                                                                                   

                                                                                   
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>gets a speedup of 0.02 as compared to 1.05 for C. Note that the generated Fortran code is
also slowed down (speedup of 0.04) due to the same reason. As a future work, We plan to
replace our matrix multiplication implementation with calls to an optimized library
function.
<!--l. 147--><p class="indent" >   <span 
class="ptmri8t-x-x-120">lgdr </span>involves repeated transpose of a row vector to a column vector. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>and Fortran,
both being array languages are highly optimized for transpose operations. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>currently uses a
naive transpose algorithm which is not optimized. We did achieve a speedup of over 10 times
compared to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>but it is not as good as the speedups achieved by C (speedup of 505.0) and
Fortran (speedup of 336.7). For transpose operation also, we plan to replace our current
implementation with an optimized implementation or a call to an optimized library
function.
<!--l. 156--><p class="indent" >   Both of these examples show that in addition to generating good code, another important task
is developing optimized <span 
class="ptmrc8t-x-x-120">X10 </span>library routines for key array computations.
<!--l. 160--><p class="indent" >   Other interesting numbers are shown by <span 
class="ptmri8t-x-x-120">optstop</span>, <span 
class="ptmri8t-x-x-120">fiff</span>, <span 
class="ptmri8t-x-x-120">nb1d</span>, and <span 
class="ptmri8t-x-x-120">quadrature</span>. <span 
class="ptmri8t-x-x-120">optstop</span>
gave a speedup of just 1.5 even without bounds checks. It involves repeated random
number generation, which our experiments showed to be slow for the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend
compared to Fortran and even the Java backend. This problem is worse with C, due to
which the C code from <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder gives a speedup of mere 0.6(slowdown). Fortran
performs better with a speedup of 4.3. <span 
class="ptmri8t-x-x-120">bbai </span>shows a similar pattern due to the same
reason.
<span 
class="ptmri8t-x-x-120">fiff  </span>is characterized by stencil operations in a loop on a 2-dimensional array. These
operations are also optimized by array-based languages like Fortran and <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. For
<span 
class="ptmri8t-x-x-120">nb1d</span>, Fortran performs better due to the use of column vectors in the benchmark, which
are represented as 2-dimensional arrays in <span 
class="ptmrc8t-x-x-120">X10 </span>but in Fortran they are represented as
1-dimensional and are optimized. 2-dimensional arrays are not as fast in <span 
class="ptmrc8t-x-x-120">X10 </span>as the
1-dimensional arrays. <span 
class="ptmri8t-x-x-120">quadrature </span>involves repeated arithmetic calculations on a range of
numbers. We achieve a speedup of about 200 times compared to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, however it is
slow compared to speedups of 3348 and 502 by C and Fortran respectively. We believe
that <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder leverages partial evaluation for optimizing numerical methods&#8217;
implementations.
<!--l. 197--><p class="indent" >   For most of the other benchmarks, we perform better or nearly equal to C and Fortran code.
                                                                                   

                                                                                   
Despite the facts that: (1) the sequential core of <span 
class="ptmrc8t-x-x-120">X10 </span>is a high-level object oriented language
which is not specialized for array-based operations; and (2) Generating the executable binaries via
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>involves two levels of source-to-source compilations (<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="zptmcm7y-x-x-120">&#x2192; </span><span 
class="ptmrc8t-x-x-120">X10 </span><span 
class="zptmcm7y-x-x-120">&#x2192;</span>
C++); we have achieved performance comparable to C, the state of the art in statically
compiled languages and Fortran, a statically compiled language highly specialized for
arrays.
<a 
 id="x1-49002r83"></a>
<h3 class="sectionHead"><span class="titlemark">9.5    </span> <a 
 id="x1-500005"></a><span 
class="ptmrc8t-x-x-120">X10 </span>C++ Backend vs. <span 
class="ptmrc8t-x-x-120">X10 </span>Java Backend</h3>
<!--l. 208--><p class="noindent" >The <span 
class="ptmrc8t-x-x-120">X10 </span>compiler provides two backends, a C++ backend that compiles the <span 
class="ptmrc8t-x-x-120">X10 </span>code to native
binary via C++, and a Java backend that compiles the <span 
class="ptmrc8t-x-x-120">X10 </span>code to JVM code via Java.
We were interested to see how well these backends perform when used to compile
the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>generated code. Even though we did not expect Java code to perform as
well as the C++ code, our aim was to make sure that we achieved good performance,
significantly better than <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, for the <span 
class="ptmrc8t-x-x-120">X10 </span>Java backend. This would enable <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
programmers to use our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler to generate code that could be integrated into Java
applications.
<!--l. 217--><p class="indent" >   In this section we present the performance comparison of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>generated <span 
class="ptmrc8t-x-x-120">X10 </span>code
compiled by the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend with that compiled by the <span 
class="ptmrc8t-x-x-120">X10 </span>Java backend. Columns 3 and
4 of the Table <a 
href="#x1-50001r2">9.2<!--tex4ht:ref: tab:cpp_vs_java --></a> show speedups for our benchmarks compiled with the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend
without bounds checks, and with bounds checks respectively. Columns 5 and 6 show these values
for compilation with the <span 
class="ptmrc8t-x-x-120">X10 </span>Java backend without bounds checks, and with bounds
checks respectively. We also show the geometric mean of the speedups for all the 4
cases.
                                                                                   

                                                                                   
<!--l. 226--><p class="indent" >   <a 
 id="x1-50001r2"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="center" 
>
<!--l. 227--><p class="noindent" >
<div class="tabular"> <table id="TBL-4" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1"></colgroup><colgroup id="TBL-4-2g"><col 
id="TBL-4-2"></colgroup><colgroup id="TBL-4-3g"><col 
id="TBL-4-3"><col 
id="TBL-4-4"></colgroup><colgroup id="TBL-4-5g"><col 
id="TBL-4-5"><col 
id="TBL-4-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-1-1"  
class="td11">    <span 
class="ptmr8t-">Benchmark  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-2"  
class="td11"> <span 
class="ptmr8t-">Matlab  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-3"  
class="td11"> <span 
class="ptmr8t-">C++ (no checks)  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-4"  
class="td11"> <span 
class="ptmr8t-">C++ (checks)  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-5"  
class="td11"> <span 
class="ptmr8t-">Java (no checks)  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-1-6"  
class="td11"> <span 
class="ptmr8t-">Java (checks)  </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-2-1"  
class="td11">         <span 
class="ptmr8t-">bbai  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-3"  
class="td11">      <span 
class="ptmr8t-">4.9             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-4"  
class="td11">    <span 
class="ptmr8t-">4.9           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-5"  
class="td11">     <span 
class="ptmr8t-">11.3            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-2-6"  
class="td11">    <span 
class="ptmr8t-">10.7          </span></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-3-1"  
class="td11"> <span 
class="ptmr8t-">bubl </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-2"  
class="td11"> <span 
class="ptmr8t-">1 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-3"  
class="td11"> <span 
class="ptmr8t-">15.8 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-4"  
class="td11"> <span 
class="ptmr8t-">10.8 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-5"  
class="td11"> <span 
class="ptmr8t-">7.5 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-3-6"  
class="td11"> <span 
class="ptmr8t-">7.5</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-4-1"  
class="td11">         <span 
class="ptmr8t-">capr  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-3"  
class="td11">     <span 
class="ptmr8t-">13.5            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-4"  
class="td11">    <span 
class="ptmr8t-">12.7          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-5"  
class="td11">     <span 
class="ptmr8t-">11.1            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-4-6"  
class="td11">    <span 
class="ptmr8t-">6.3           </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-5-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-5-1"  
class="td11">         <span 
class="ptmr8t-">clos  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-3"  
class="td11">     <span 
class="ptmr8t-">0.03            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-4"  
class="td11">    <span 
class="ptmr8t-">0.02          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-5"  
class="td11">     <span 
class="ptmr8t-">0.02            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-5-6"  
class="td11">    <span 
class="ptmr8t-">0.002         </span></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-6-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-6-1"  
class="td11"> <span 
class="ptmr8t-">crni </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-6-2"  
class="td11"> <span 
class="ptmr8t-">1 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-6-3"  
class="td11"> <span 
class="ptmr8t-">6.5 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-6-4"  
class="td11"> <span 
class="ptmr8t-">5.3 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-6-5"  
class="td11"> <span 
class="ptmr8t-">5.6 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-6-6"  
class="td11"> <span 
class="ptmr8t-">4</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-7-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-7-1"  
class="td11">         <span 
class="ptmr8t-">dich  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-7-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-7-3"  
class="td11">      <span 
class="ptmr8t-">7.6             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-7-4"  
class="td11">    <span 
class="ptmr8t-">7.3           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-7-5"  
class="td11">      <span 
class="ptmr8t-">7               </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-7-6"  
class="td11">    <span 
class="ptmr8t-">1.6           </span></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-8-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-8-1"  
class="td11"> <span 
class="ptmr8t-">diff </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-8-2"  
class="td11"> <span 
class="ptmr8t-">1 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-8-3"  
class="td11"> <span 
class="ptmr8t-">4.6 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-8-4"  
class="td11"> <span 
class="ptmr8t-">4.4 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-8-5"  
class="td11"> <span 
class="ptmr8t-">0.3 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-8-6"  
class="td11"> <span 
class="ptmr8t-">0.3</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-9-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-9-1"  
class="td11">          <span 
class="ptmr8t-">edit  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-9-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-9-3"  
class="td11">     <span 
class="ptmr8t-">29.7            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-9-4"  
class="td11">    <span 
class="ptmr8t-">19.4          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-9-5"  
class="td11">     <span 
class="ptmr8t-">22.1            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-9-6"  
class="td11">     <span 
class="ptmr8t-">20           </span></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-10-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-10-1"  
class="td11"> <span 
class="ptmr8t-">fiff </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-10-2"  
class="td11"> <span 
class="ptmr8t-">1 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-10-3"  
class="td11"> <span 
class="ptmr8t-">9.8 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-10-4"  
class="td11"> <span 
class="ptmr8t-">3.5 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-10-5"  
class="td11"> <span 
class="ptmr8t-">2.1 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-10-6"  
class="td11"> <span 
class="ptmr8t-">1.4</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-11-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-11-1"  
class="td11">         <span 
class="ptmr8t-">lgdr  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-11-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-11-3"  
class="td11">     <span 
class="ptmr8t-">13.5            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-11-4"  
class="td11">    <span 
class="ptmr8t-">11.9          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-11-5"  
class="td11">     <span 
class="ptmr8t-">10.6            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-11-6"  
class="td11">    <span 
class="ptmr8t-">10.6          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-12-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-12-1"  
class="td11">         <span 
class="ptmr8t-">mbrt  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-12-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-12-3"  
class="td11">      <span 
class="ptmr8t-">6.5             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-12-4"  
class="td11">    <span 
class="ptmr8t-">6.5           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-12-5"  
class="td11">     <span 
class="ptmr8t-">0.3             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-12-6"  
class="td11">    <span 
class="ptmr8t-">0.3           </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-13-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-13-1"  
class="td11">         <span 
class="ptmr8t-">nb1d  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-13-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-13-3"  
class="td11">      <span 
class="ptmr8t-">6.2             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-13-4"  
class="td11">    <span 
class="ptmr8t-">4.8           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-13-5"  
class="td11">     <span 
class="ptmr8t-">5.5             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-13-6"  
class="td11">    <span 
class="ptmr8t-">4.1           </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-14-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-14-1"  
class="td11">       <span 
class="ptmr8t-">matmul  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-14-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-14-3"  
class="td11">     <span 
class="ptmr8t-">14.7            </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-14-4"  
class="td11">    <span 
class="ptmr8t-">2.5           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-14-5"  
class="td11">     <span 
class="ptmr8t-">1.1             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-14-6"  
class="td11">    <span 
class="ptmr8t-">0.8           </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-15-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-15-1"  
class="td11">         <span 
class="ptmr8t-">mcpi  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-15-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-15-3"  
class="td11">      <span 
class="ptmr8t-">3.3             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-15-4"  
class="td11">    <span 
class="ptmr8t-">2.5           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-15-5"  
class="td11">     <span 
class="ptmr8t-">2.9             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-15-6"  
class="td11">     <span 
class="ptmr8t-">3            </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-16-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-16-1"  
class="td11">     <span 
class="ptmr8t-">numprime  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-16-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-16-3"  
class="td11">      <span 
class="ptmr8t-">7.6             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-16-4"  
class="td11">    <span 
class="ptmr8t-">6.8           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-16-5"  
class="td11">     <span 
class="ptmr8t-">6.5             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-16-6"  
class="td11">    <span 
class="ptmr8t-">6.4           </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-17-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-17-1"  
class="td11">       <span 
class="ptmr8t-">optstop  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-17-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-17-3"  
class="td11">      <span 
class="ptmr8t-">1.5             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-17-4"  
class="td11">    <span 
class="ptmr8t-">1.2           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-17-5"  
class="td11">     <span 
class="ptmr8t-">1.8             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-17-6"  
class="td11">    <span 
class="ptmr8t-">1.4           </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-18-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-18-1"  
class="td11">     <span 
class="ptmr8t-">quadrature  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-18-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-18-3"  
class="td11">     <span 
class="ptmr8t-">200.9           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-18-4"  
class="td11">    <span 
class="ptmr8t-">182.6         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-18-5"  
class="td11">     <span 
class="ptmr8t-">167.4           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-18-6"  
class="td11">    <span 
class="ptmr8t-">154.5         </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-19-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-19-1"  
class="td11"> <span 
class="ptmr8t-">Geometric mean  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-19-2"  
class="td11">   <span 
class="ptmr8t-">1       </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-19-3"  
class="td11">      <span 
class="ptmr8t-">6.8             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-19-4"  
class="td11">    <span 
class="ptmr8t-">4.8           </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-19-5"  
class="td11">     <span 
class="ptmr8t-">3.4             </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-4-19-6"  
class="td11">    <span 
class="ptmr8t-">2.4           </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-20-"><td  style="white-space:nowrap; text-align:right;" id="TBL-4-20-1"  
class="td11">             </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;9.2: </span><span  
class="content"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>performance comparison : <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend vs. <span 
class="ptmrc8t-x-x-120">X10 </span>Java backend,
speedups relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better</span></div><!--tex4ht:label?: x1-50001r2 -->
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
<!--l. 237--><p class="indent" >   The mean speedups for the C++ backend are 6.8 and 4.8 respectively for the version with
bounds checks switched off, and the version with bounds checks switched on, whereas for Java
backend these values are 3.4 and 2.4 respectively. This is expected, given that C++ is compiled to
native binary while Java is JIT compiled.
<!--l. 243--><p class="indent" >   <span 
class="ptmri8t-x-x-120">bbai </span>and <span 
class="ptmri8t-x-x-120">optstop </span>are the two exceptions, where Java performs better than C++. For <span 
class="ptmri8t-x-x-120">bbai</span>, both
the Java versions gave a speedup of over 10, whereas for C++, the speedup is under 5 for both the
versions. For <span 
class="ptmri8t-x-x-120">optstop</span>, the difference is not large, with C++ speedup at 1.5 (1.2 for the bounds
checks version) compared to 1.8 (1.4 for the bounds checks version) for the Java backend.
<span 
class="ptmri8t-x-x-120">bbai </span>is slower with <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend because it includes repeated calls to the <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s
<span 
class="pcrr8t-x-x-120">Random.nextDouble() </span>function to generate random numbers. We found it to be
significantly slower in the C++ backend compared to the Java backend. We have reported our
findings to the <span 
class="ptmrc8t-x-x-120">X10 </span>development team and they have validated our findings. <span 
class="ptmri8t-x-x-120">optstop</span>
is slower for the same reason : It also involves repeated random number generation.
Note that for these two benchmarks, even the C code generated via <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder
is slower than the C++ code, with speedups of 4.2 and 0.6 respectively for <span 
class="ptmri8t-x-x-120">bbai </span>and
<span 
class="ptmri8t-x-x-120">optstop</span>.
<!--l. 258--><p class="indent" >   Other interesting results are for the benchmarks <span 
class="ptmri8t-x-x-120">diff</span>, <span 
class="ptmri8t-x-x-120">fiff</span>, <span 
class="ptmri8t-x-x-120">mbrt </span>and <span 
class="ptmri8t-x-x-120">matmul</span>. For these
benchmarks, results from the Java backend are significantly slower compared to the C++ backend.
<span 
class="ptmri8t-x-x-120">diff  </span>and <span 
class="ptmri8t-x-x-120">mbrt </span>involve operations on complex numbers. In the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend, complex
numbers are stored as <span 
class="pcrr8t-x-x-120">structs </span>and are kept on the stack, whereas in the Java backend, they are
stored as <span 
class="ptmri8t-x-x-120">objects </span>and reside in the heap storage. <span 
class="ptmri8t-x-x-120">fiff  </span>and <span 
class="ptmri8t-x-x-120">matmul </span>are characterized by repeated
array access and read/write operations on 2-dimensional arrays. For these benchmarks, the
Java backend performs significantly slower compared to the C++ backend with no
bounds checks(2.1 vs. 9.8 for <span 
class="ptmri8t-x-x-120">fiff  </span>and 1.1 vs. 14.7 for <span 
class="ptmri8t-x-x-120">matmul</span>), however compared to the
performance by the C++ beckend with bounds checks, it is not as slow(2.1 vs. 3.5 for
<span 
class="ptmri8t-x-x-120">fiff  </span>and 1.1 vs. 2.5 for <span 
class="ptmri8t-x-x-120">matmul</span>). The reason is that even with bounds checks turned
off for the <span 
class="ptmrc8t-x-x-120">X10 </span>to Java compiler, The Java compiler by default has bounds checks
on. These checks have a significant effect on performance for 2-dimensional array
operations.
<a 
 id="x1-50002r75"></a>
                                                                                   

                                                                                   
<h4 class="subsectionHead"><span class="titlemark">9.5.1    </span> <a 
 id="x1-510001"></a>When Not to Use the <span 
class="ptmrc8t-x-x-120">X10 </span><span 
class="pcrr8t-x-x-120">-O</span></h4>
<!--l. 278--><p class="noindent" >One of the most surprising results in this set of experiments was the fact that we had to sometimes
disable the <span 
class="ptmrc8t-x-x-120">X10 </span><span 
class="pcrr8t-x-x-120">-O </span>optimizer switch when using the <span 
class="ptmrc8t-x-x-120">X10 </span>Java backend.. For the benchmarks
<span 
class="ptmri8t-x-x-120">capr </span>and <span 
class="ptmri8t-x-x-120">dich</span>, in the case when <span 
class="ptmrc8t-x-x-120">X10 </span>bounds checks are switched on, we found very pathological
performance, with slowdowns of over 2 orders of magntitude, when the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler&#8217;s
optimization switch(<span 
class="pcrr8t-x-x-120">-O</span>) was used.
<!--l. 286--><p class="indent" >   We recorded running times of 785.3 seconds for <span 
class="ptmri8t-x-x-120">capr </span>compared to 3.2 seconds without the
optimization, and 1558.9 seconds for <span 
class="ptmri8t-x-x-120">dich </span>compared to 12.7 seconds without the optimization.
With the help of the <span 
class="ptmrc8t-x-x-120">X10 </span>development team we determined that switching on the optimization
triggered code inlining for the array bounds check code, which then caused the resultant Java
program to be too large to be handled by the JIT compiler. In fact, the Java JIT effectively gives
up on this code and reverts to the interpreter.
<!--l. 295--><p class="indent" >   Thus, it would seem that the <span 
class="ptmrc8t-x-x-120">X10 </span>optimizer needs to be improved in order to apply aggressive
inlining only when it does not have a negative impact on code size, and that different inlining
strategies are needed for the C++ and Java backends.
<a 
 id="x1-51001r85"></a>
<h3 class="sectionHead"><span class="titlemark">9.6    </span> <a 
 id="x1-520006"></a>Simple vs. Region Arrays</h3>
<!--l. 302--><p class="noindent" >One of the key optimizations used by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>is to use simple arrays, wherever possible, for
higher performance. In this section we discuss the performance gains obtained by using simple
arrays over region arrays and the specialized region arrays. A description of these three kinds of
arrays provided by <span 
class="ptmrc8t-x-x-120">X10 </span>was given in Sec.&#x00A0;<a 
href="#x1-60003">2.1.3<!--tex4ht:ref: subsec:ArrayDesc --></a>. Table <a 
href="#x1-52001r3">9.3<!--tex4ht:ref: tab:simple_vs_region --></a> shows the relative speedups and
slowdowns for our benchmarks compiled to use different kinds of <span 
class="ptmrc8t-x-x-120">X10 </span>arrays for the C++
backend and the Java backend.
                                                                                   

                                                                                   
<!--l. 311--><p class="indent" >   <a 
 id="x1-52001r3"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="center" 
>
<!--l. 312--><p class="noindent" >
<!--l. 316--><p class="noindent" > <!--tex4ht:inline--><div class="tabular"> <table id="TBL-5" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-5-1g"><col 
id="TBL-5-1"></colgroup><colgroup id="TBL-5-2g"><col 
id="TBL-5-2"></colgroup><colgroup id="TBL-5-3g"><col 
id="TBL-5-3"><col 
id="TBL-5-4"><col 
id="TBL-5-5"></colgroup><colgroup id="TBL-5-6g"><col 
id="TBL-5-6"><col 
id="TBL-5-7"><col 
id="TBL-5-8"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-1-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-1-1"  
class="td11">            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-2"  
class="td11">      </td><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-5-1-3"  
class="td11">             <div class="multicolumn"  style="white-space:nowrap; text-align:center;">X10 C++ backend</div>                                </td><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-5-1-6"  
class="td11">             <div class="multicolumn"  style="white-space:nowrap; text-align:center;">X10 Java backend</div></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-2-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-2-1"  
class="td11"> Benchmark </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-2"  
class="td11"> Matlab </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-3"  
class="td11"> Simple arrays </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-4"  
class="td11"> Region arrays </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-5"  
class="td11"> Sp. region arrays </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-6"  
class="td11"> Simple arrays </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-7"  
class="td11"> Region arrays </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-8"  
class="td11"> Sp. region arrays  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-3-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-3-1"  
class="td11">         bbai  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-3"  
class="td11">    4.9           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-4"  
class="td11">    2.7           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-5"  
class="td11">     2.7             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-6"  
class="td11">    11.3          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-7"  
class="td11">    6.4           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-3-8"  
class="td11">     6.6             </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-4-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-4-1"  
class="td11"> bubl </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-2"  
class="td11"> 1.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-3"  
class="td11"> 15.8 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-4"  
class="td11"> 11.4 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-5"  
class="td11"> 11.6 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-6"  
class="td11"> 7.5 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-7"  
class="td11"> 3.6 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-4-8"  
class="td11"> 3.7</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-5-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-5-1"  
class="td11">         capr  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-3"  
class="td11">    13.5          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-4"  
class="td11">    11.6          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-5"  
class="td11">     12.4            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-6"  
class="td11">    11.1          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-7"  
class="td11">    0.02          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-5-8"  
class="td11">     10.5            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-6-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-6-1"  
class="td11">         clos  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-6-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-6-3"  
class="td11">    0.03          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-6-4"  
class="td11">    0.01          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-6-5"  
class="td11">     0.01            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-6-6"  
class="td11">    0.02          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-6-7"  
class="td11">    0.01          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-6-8"  
class="td11">     0.01            </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-7-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-7-1"  
class="td11"> crni </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-7-2"  
class="td11"> 1.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-7-3"  
class="td11"> 6.5 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-7-4"  
class="td11"> 3.6 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-7-5"  
class="td11"> 3.9 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-7-6"  
class="td11"> 5.6 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-7-7"  
class="td11"> 4 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-7-8"  
class="td11"> 4.1</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-8-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-8-1"  
class="td11">         dich  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-8-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-8-3"  
class="td11">    7.6           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-8-4"  
class="td11">    6.7           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-8-5"  
class="td11">     7.0             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-8-6"  
class="td11">    7.0           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-8-7"  
class="td11">    0.01          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-8-8"  
class="td11">     0.02            </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-9-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-9-1"  
class="td11"> diff </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-9-2"  
class="td11"> 1.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-9-3"  
class="td11"> 4.6 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-9-4"  
class="td11"> 4.2 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-9-5"  
class="td11"> 4.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-9-6"  
class="td11"> 0.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-9-7"  
class="td11"> 0.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-9-8"  
class="td11"> 0.3</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-10-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-10-1"  
class="td11">         edit  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-10-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-10-3"  
class="td11">    29.7          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-10-4"  
class="td11">    4.3           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-10-5"  
class="td11">     3.6             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-10-6"  
class="td11">    22.1          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-10-7"  
class="td11">    9.4           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-10-8"  
class="td11">     9.4             </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-11-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-11-1"  
class="td11"> fiff </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-11-2"  
class="td11"> 1.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-11-3"  
class="td11"> 9.8 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-11-4"  
class="td11"> 2.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-11-5"  
class="td11"> 2.8 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-11-6"  
class="td11"> 2.1 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-11-7"  
class="td11"> 1.4 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-11-8"  
class="td11"> 1.4</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-12-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-12-1"  
class="td11">         lgdr  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-12-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-12-3"  
class="td11">    13.5          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-12-4"  
class="td11">    1.6           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-12-5"  
class="td11">     1.5             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-12-6"  
class="td11">    10.6          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-12-7"  
class="td11">    5.4           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-12-8"  
class="td11">     5.4             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-13-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-13-1"  
class="td11">         mbrt  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-13-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-13-3"  
class="td11">    6.5           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-13-4"  
class="td11">    6.3           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-13-5"  
class="td11">     6.5             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-13-6"  
class="td11">    0.3           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-13-7"  
class="td11">    5.1           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-13-8"  
class="td11">     5.1             </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-14-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-14-1"  
class="td11"> nb1d </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-14-2"  
class="td11"> 1.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-14-3"  
class="td11"> 6.2 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-14-4"  
class="td11"> 0.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-14-5"  
class="td11"> 0.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-14-6"  
class="td11"> 5.5 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-14-7"  
class="td11"> 1.4 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-14-8"  
class="td11"> 1.4</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-15-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-15-1"  
class="td11">       matmul  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-15-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-15-3"  
class="td11">    14.7          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-15-4"  
class="td11">    1.3           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-15-5"  
class="td11">     1.4             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-15-6"  
class="td11">    1.1           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-15-7"  
class="td11">    0.5           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-15-8"  
class="td11">     0.5             </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-16-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-16-1"  
class="td11"> mcpi </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-16-2"  
class="td11"> 1.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-16-3"  
class="td11"> 3.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-16-4"  
class="td11"> 2.8 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-16-5"  
class="td11"> 2.7 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-16-6"  
class="td11"> 2.9 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-16-7"  
class="td11"> 3.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-5-16-8"  
class="td11"> 3.0</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-17-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-17-1"  
class="td11">     numprime  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-17-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-17-3"  
class="td11">    7.6           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-17-4"  
class="td11">    5.7           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-17-5"  
class="td11">     5.7             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-17-6"  
class="td11">    6.5           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-17-7"  
class="td11">    6.3           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-17-8"  
class="td11">     6.3             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-18-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-18-1"  
class="td11">       optstop  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-18-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-18-3"  
class="td11">    1.5           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-18-4"  
class="td11">    0.4           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-18-5"  
class="td11">     0.4             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-18-6"  
class="td11">    1.8           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-18-7"  
class="td11">    1.2           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-18-8"  
class="td11">     1.3             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-19-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-19-1"  
class="td11">     quadrature  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-19-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-19-3"  
class="td11">    200.9         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-19-4"  
class="td11">    200.9         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-19-5"  
class="td11">     200.9           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-19-6"  
class="td11">    167.4         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-19-7"  
class="td11">    143.5         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-19-8"  
class="td11">     154.5           </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-20-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-20-1"  
class="td11"> Geometric mean  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-20-2"  
class="td11">  1.0     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-20-3"  
class="td11">    6.8           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-20-4"  
class="td11">    2.7           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-20-5"  
class="td11">     2.8             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-20-6"  
class="td11">    3.4           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-20-7"  
class="td11">    1.3           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-20-8"  
class="td11">     1.9             </td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-21-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-21-1"  
class="td11"> </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;9.3:  </span><span  
class="content"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10  </span>performance  comparison  :  Simple  arrays  vs.  Region  arrays  vs.
Specialized region arrays, speedup relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better</span></div><!--tex4ht:label?: x1-52001r3 -->
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
<!--l. 325--><p class="indent" >   For the C++ backend we obtained a mean speedup of 6.8 for Simple arrays, compared to 2.7
for region arrays and 2.8 for specialized region arrays. For the Java backend, we obtained
speedups of 3.4, 1.3 and 1.9 for the simple arrays, region arrays, and the specialized region arrays
respectively. These results are as expected in Sec.&#x00A0;<a 
href="#x1-190001">4.1<!--tex4ht:ref: Sec:CompileArrays --></a>. For the C++ backend, most noticeable
performance differences between simple arrays and region arrays are for <span 
class="ptmri8t-x-x-120">edit</span>, <span 
class="ptmri8t-x-x-120">fiff</span>, <span 
class="ptmri8t-x-x-120">lgdr</span>, <span 
class="ptmri8t-x-x-120">nb1d</span>,
<span 
class="ptmri8t-x-x-120">matmul </span>and <span 
class="ptmri8t-x-x-120">optstop</span>. All of these benchmarks are characterized by large number of array accesses
and read/write operations on 2-dimensional arrays, except <span 
class="ptmri8t-x-x-120">optstop </span>and <span 
class="ptmri8t-x-x-120">edit</span>, which have multiple
large 1-dimensional arrays. The performance difference is most noticeable for <span 
class="ptmri8t-x-x-120">nb1d</span>, where the
region arrays are about 20 times slower than the simple arrays. This is because <span 
class="ptmri8t-x-x-120">nb1d </span>involves
simple operations on a large column vector. With simple arrays, since the compiler
knows that it is a column vector, rather than a 2-dimensional matrix, even though it is
declared as a 2-dimensional array, the performance can be optimized to match that of
the underlying <span 
class="pcrr8t-x-x-120">Rail</span>. However, this is not possible for region arrays where the size
of each dimension is not known statically. For the C++ backend, we do not observe
significant performance differences between the region arrays and the specialized region
arrays.
<!--l. 346--><p class="indent" >   For the Java backend we observed a higher difference in the mean performance for the simple
arrays and the region arrays. The mean speedup for region arrays is 1.3 whereas for simple
arrays it is nearly 3 times more at 3.4. There is also a significant difference between the
performance of specialized region arrays and region arrays. Speedup for specialized
region arrays is 1.9. Like the C++ backend, here also, most noticeable performance gain
for simple arrays is for benchmarks involving a large number of array accesses and
read/writes. <span 
class="ptmri8t-x-x-120">capr </span>and <span 
class="ptmri8t-x-x-120">dich </span>ask for special consideration. For <span 
class="ptmri8t-x-x-120">capr</span>, even with <span 
class="ptmrc8t-x-x-120">X10 </span>compiler&#8217;s
bounds checks turned off, the region array version slows down by more than 500 times
compared to the simple array version and even the specialized region array version. This
again, is due to the fact that region arrays, with the dynamic shape checks, generated
more code than the JIT compiler could handle. For <span 
class="ptmri8t-x-x-120">dich </span>the slowdown due to region
arrays was about 700 times compared to simple arrays. For <span 
class="ptmri8t-x-x-120">dich</span>, even the specialization
on region arrays was not enough to reduce the code size enough to be able to be JIT
compiled.
                                                                                   

                                                                                   
<a 
 id="x1-52002r88"></a>
<h3 class="sectionHead"><span class="titlemark">9.7    </span> <a 
 id="x1-530007"></a>Effect of the IntegerOkay Analysis</h3>
<!--l. 366--><p class="noindent" >In this section we present an overview of the performance improvements achieved by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>by
using the IntegerOkay analysis. Table <a 
href="#x1-53001r4">9.4<!--tex4ht:ref: tab:int_vs_double --></a> shows a comparison of speedups gained by using the
IntegerOkay analysis over those without using it. For this experiment we used results with <span 
class="ptmrc8t-x-x-120">X10</span>
optimizations turned on and bounds checks turned off.
                                                                                   

                                                                                   
<!--l. 372--><p class="indent" >   <a 
 id="x1-53001r4"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="center" 
>
<!--l. 373--><p class="noindent" >
<div class="tabular"> <table id="TBL-6" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-6-1g"><col 
id="TBL-6-1"></colgroup><colgroup id="TBL-6-2g"><col 
id="TBL-6-2"></colgroup><colgroup id="TBL-6-3g"><col 
id="TBL-6-3"><col 
id="TBL-6-4"></colgroup><colgroup id="TBL-6-5g"><col 
id="TBL-6-5"><col 
id="TBL-6-6"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-1-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-1-1"  
class="td11">             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-2"  
class="td11">       </td><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-6-1-3"  
class="td11">     <div class="multicolumn"  style="white-space:nowrap; text-align:center;"><span 
class="ptmr8t-">X10 C++ backend</span></div>      </td><td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-6-1-5"  
class="td11">     <div class="multicolumn"  style="white-space:nowrap; text-align:center;"><span 
class="ptmr8t-">X10 Java backend</span></div></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-2-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-2-1"  
class="td11"> <span 
class="ptmr8t-">Benchmark </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-2"  
class="td11"> <span 
class="ptmr8t-">Matlab </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-3"  
class="td11"> <span 
class="ptmr8t-">IntegerOkay </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-4"  
class="td11"> <span 
class="ptmr8t-">All Doubles </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-5"  
class="td11"> <span 
class="ptmr8t-">IntegerOkay </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-6"  
class="td11"> <span 
class="ptmr8t-">All Doubles  </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-3-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-3-1"  
class="td11">         <span 
class="ptmr8t-">bbai  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-3"  
class="td11">    <span 
class="ptmr8t-">4.9          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-4"  
class="td11">    <span 
class="ptmr8t-">3.8          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-5"  
class="td11">    <span 
class="ptmr8t-">11.3         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-6"  
class="td11">    <span 
class="ptmr8t-">8.2          </span></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-4-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-4-1"  
class="td11"> <span 
class="ptmr8t-">bubl </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-2"  
class="td11"> <span 
class="ptmr8t-">1.0 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-3"  
class="td11"> <span 
class="ptmr8t-">15.8 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-4"  
class="td11"> <span 
class="ptmr8t-">2.2 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-5"  
class="td11"> <span 
class="ptmr8t-">7.5 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-6"  
class="td11"> <span 
class="ptmr8t-">4.2</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-5-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-5-1"  
class="td11">         <span 
class="ptmr8t-">capr  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-5-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-5-3"  
class="td11">    <span 
class="ptmr8t-">13.5         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-5-4"  
class="td11">    <span 
class="ptmr8t-">1.7          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-5-5"  
class="td11">    <span 
class="ptmr8t-">11.1         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-5-6"  
class="td11">    <span 
class="ptmr8t-">9.7          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-6-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-6-1"  
class="td11">         <span 
class="ptmr8t-">clos  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-6-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-6-3"  
class="td11">    <span 
class="ptmr8t-">0.03         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-6-4"  
class="td11">    <span 
class="ptmr8t-">0.02         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-6-5"  
class="td11">    <span 
class="ptmr8t-">0.02         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-6-6"  
class="td11">    <span 
class="ptmr8t-">0.01         </span></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-7-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-7-1"  
class="td11"> <span 
class="ptmr8t-">crni </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-7-2"  
class="td11"> <span 
class="ptmr8t-">1.0 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-7-3"  
class="td11"> <span 
class="ptmr8t-">6.5 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-7-4"  
class="td11"> <span 
class="ptmr8t-">2.8 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-7-5"  
class="td11"> <span 
class="ptmr8t-">5.6 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-7-6"  
class="td11"> <span 
class="ptmr8t-">5.5</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-8-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-8-1"  
class="td11">         <span 
class="ptmr8t-">dich  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-8-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-8-3"  
class="td11">    <span 
class="ptmr8t-">7.6          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-8-4"  
class="td11">    <span 
class="ptmr8t-">1.0          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-8-5"  
class="td11">    <span 
class="ptmr8t-">7.0          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-8-6"  
class="td11">    <span 
class="ptmr8t-">5.8          </span></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-9-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-9-1"  
class="td11"> <span 
class="ptmr8t-">diff </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-9-2"  
class="td11"> <span 
class="ptmr8t-">1.0 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-9-3"  
class="td11"> <span 
class="ptmr8t-">4.6 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-9-4"  
class="td11"> <span 
class="ptmr8t-">4.5 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-9-5"  
class="td11"> <span 
class="ptmr8t-">0.3 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-9-6"  
class="td11"> <span 
class="ptmr8t-">0.3</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-10-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-10-1"  
class="td11">          <span 
class="ptmr8t-">edit  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-10-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-10-3"  
class="td11">    <span 
class="ptmr8t-">29.7         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-10-4"  
class="td11">    <span 
class="ptmr8t-">13.5         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-10-5"  
class="td11">    <span 
class="ptmr8t-">22.1         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-10-6"  
class="td11">    <span 
class="ptmr8t-">20.0         </span></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-11-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-11-1"  
class="td11"> <span 
class="ptmr8t-">fiff </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-11-2"  
class="td11"> <span 
class="ptmr8t-">1.0 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-11-3"  
class="td11"> <span 
class="ptmr8t-">9.8 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-11-4"  
class="td11"> <span 
class="ptmr8t-">1.0 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-11-5"  
class="td11"> <span 
class="ptmr8t-">2.1 </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-11-6"  
class="td11"> <span 
class="ptmr8t-">1.8</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-12-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-12-1"  
class="td11">         <span 
class="ptmr8t-">lgdr  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-12-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-12-3"  
class="td11">    <span 
class="ptmr8t-">13.5         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-12-4"  
class="td11">    <span 
class="ptmr8t-">10.1         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-12-5"  
class="td11">    <span 
class="ptmr8t-">10.6         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-12-6"  
class="td11">    <span 
class="ptmr8t-">11.0         </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-13-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-13-1"  
class="td11">         <span 
class="ptmr8t-">mbrt  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-13-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-13-3"  
class="td11">    <span 
class="ptmr8t-">6.5          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-13-4"  
class="td11">    <span 
class="ptmr8t-">6.1          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-13-5"  
class="td11">    <span 
class="ptmr8t-">0.3          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-13-6"  
class="td11">    <span 
class="ptmr8t-">0.3          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-14-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-14-1"  
class="td11">         <span 
class="ptmr8t-">nb1d  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-14-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-14-3"  
class="td11">    <span 
class="ptmr8t-">6.2          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-14-4"  
class="td11">    <span 
class="ptmr8t-">5.2          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-14-5"  
class="td11">    <span 
class="ptmr8t-">5.5          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-14-6"  
class="td11">    <span 
class="ptmr8t-">5.5          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-15-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-15-1"  
class="td11">       <span 
class="ptmr8t-">matmul  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-15-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-15-3"  
class="td11">    <span 
class="ptmr8t-">14.7         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-15-4"  
class="td11">    <span 
class="ptmr8t-">14.5         </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-15-5"  
class="td11">    <span 
class="ptmr8t-">1.1          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-15-6"  
class="td11">    <span 
class="ptmr8t-">1.2          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-16-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-16-1"  
class="td11">         <span 
class="ptmr8t-">mcpi  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-16-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-16-3"  
class="td11">    <span 
class="ptmr8t-">3.3          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-16-4"  
class="td11">    <span 
class="ptmr8t-">3.3          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-16-5"  
class="td11">    <span 
class="ptmr8t-">2.9          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-16-6"  
class="td11">    <span 
class="ptmr8t-">2.9          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-17-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-17-1"  
class="td11">     <span 
class="ptmr8t-">numprime  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-17-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-17-3"  
class="td11">    <span 
class="ptmr8t-">7.6          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-17-4"  
class="td11">    <span 
class="ptmr8t-">7.6          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-17-5"  
class="td11">    <span 
class="ptmr8t-">6.5          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-17-6"  
class="td11">    <span 
class="ptmr8t-">7.1          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-18-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-18-1"  
class="td11">       <span 
class="ptmr8t-">optstop  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-18-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-18-3"  
class="td11">    <span 
class="ptmr8t-">1.5          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-18-4"  
class="td11">    <span 
class="ptmr8t-">1.0          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-18-5"  
class="td11">    <span 
class="ptmr8t-">1.8          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-18-6"  
class="td11">    <span 
class="ptmr8t-">1.0          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-19-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-19-1"  
class="td11">     <span 
class="ptmr8t-">quadrature  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-19-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-19-3"  
class="td11">   <span 
class="ptmr8t-">200.9        </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-19-4"  
class="td11">   <span 
class="ptmr8t-">182.6        </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-19-5"  
class="td11">   <span 
class="ptmr8t-">167.4        </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-19-6"  
class="td11">   <span 
class="ptmr8t-">143.5        </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-20-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-20-1"  
class="td11"> <span 
class="ptmr8t-">Geometric mean  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-20-2"  
class="td11">  <span 
class="ptmr8t-">1.0      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-20-3"  
class="td11">    <span 
class="ptmr8t-">6.8          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-20-4"  
class="td11">    <span 
class="ptmr8t-">3.4          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-20-5"  
class="td11">    <span 
class="ptmr8t-">3.4          </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-20-6"  
class="td11">    <span 
class="ptmr8t-">2.9          </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-21-"><td  style="white-space:nowrap; text-align:right;" id="TBL-6-21-1"  
class="td11">             </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;9.4:  </span><span  
class="content">Performance  evaluation  for  the  IntegerOkay  analysis,  speedups  relative  to
Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better</span></div><!--tex4ht:label?: x1-53001r4 -->
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
<!--l. 383--><p class="indent" >   For the C++ backend, we observed a mean speedup of 6.8 which is two times the speedup
gained by not using the IntegerOkay analysis, which is equal to 3.4. We observed a significant
gain in performance by using IntegerOkay analysis for the benchmarks that involve significant
number of array indexing operations. <span 
class="ptmri8t-x-x-120">bubl</span>, <span 
class="ptmri8t-x-x-120">capr</span>, <span 
class="ptmri8t-x-x-120">crni</span>, <span 
class="ptmri8t-x-x-120">dich</span>, and <span 
class="ptmri8t-x-x-120">fiff  </span>show the most
significant performance gains. The reason for this behaviour is that, <span 
class="ptmrc8t-x-x-120">X10 </span>requires all array
indices to be of type <span 
class="pcrr8t-x-x-120">Long</span>, thus if the variables used as array indices are declared to be
of type <span 
class="pcrr8t-x-x-120">Double </span>(which is the default in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>), they must be typecast to <span 
class="pcrr8t-x-x-120">Long</span>
type. <span 
class="pcrr8t-x-x-120">Double </span>to <span 
class="pcrr8t-x-x-120">Long </span>is very time consuming because every cast involves a check
on the value of the <span 
class="pcrr8t-x-x-120">Double </span>type variable to ensure that it can safely fit into <span 
class="pcrr8t-x-x-120">Long</span>
type.
<!--l. 396--><p class="indent" >   For the Java backend, with the IntegerOkay analysis, we get a mean speedup of 3.4 as
compared to 2.9 without it. The reason for the lower difference as compared to that for the C++
backend is that, for Java backend, the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler does not generate the value checks for
<span 
class="pcrr8t-x-x-120">Double </span>type values, instead it relies on the JVM to make these checks, resulting in a better
performance. Also note that, without the IntegerOkay analysis, the C++ backend results are
slower than the Java backend results for 9 out of 17 benchmarks.
<!--l. 404--><p class="indent" >   To conclude, IntegerOkay analysis is very important for efficient performance of code
involving Arrays, specially for the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend.
<a 
 id="x1-53002r90"></a>
<h3 class="sectionHead"><span class="titlemark">9.8    </span> <a 
 id="x1-540008"></a><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>parfor vs. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>Parallel Code</h3>
<!--l. 409--><p class="noindent" >Given that we have established that we can generate competitive sequential code, we wanted to
also do a preliminary study to see if we could get additional benefits from the high-perfomance
nature of <span 
class="ptmrc8t-x-x-120">X10</span>. In this section we present the preliminary results for the compilation of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
<span 
class="pcrr8t-x-x-120">parfor </span>construct to the parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code. 7 out of our 17 benchmarks could be safely modified
to use the <span 
class="pcrr8t-x-x-120">parfor </span>loop. We compare the performance of the generated parallel <span 
class="ptmrc8t-x-x-120">X10 </span>programs
for these benchmarks to that of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code using <span 
class="pcrr8t-x-x-120">parfor</span>, and to their sequential <span 
class="ptmrc8t-x-x-120">X10</span>
versions. For this experiment, we used the sequential versions of the generated <span 
class="ptmrc8t-x-x-120">X10 </span>programs
with optimizations and no bounds checks. For the parallel versions we used both the
                                                                                   

                                                                                   
variants, with optimizations and bounds checks, and with optimizations and without
bounds checks. It is important to note that the Intel(R) Core(TM) i7-3820 CPU used
for this experiment has 4 CPU cores and 8 hardware threads, thus bounding the <span 
class="ptmrc8t-x-x-120">X10</span>
parallelization speedup at 8. Table <a 
href="#x1-54001r5">9.5<!--tex4ht:ref: tab:parfor_vs_x10 --></a> shows the results for both the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ and the <span 
class="ptmrc8t-x-x-120">X10 </span>Java
backends.
                                                                                   

                                                                                   
<!--l. 427--><p class="indent" >   <a 
 id="x1-54001r5"></a><hr class="float"><div class="float" 
>
                                                                                   

                                                                                   
<div class="center" 
>
<!--l. 428--><p class="noindent" >
<!--l. 433--><p class="noindent" > <!--tex4ht:inline--><div class="tabular"> <table id="TBL-7" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-7-1g"><col 
id="TBL-7-1"></colgroup><colgroup id="TBL-7-2g"><col 
id="TBL-7-2"></colgroup><colgroup id="TBL-7-3g"><col 
id="TBL-7-3"></colgroup><colgroup id="TBL-7-4g"><col 
id="TBL-7-4"></colgroup><colgroup id="TBL-7-5g"><col 
id="TBL-7-5"><col 
id="TBL-7-6"></colgroup><colgroup id="TBL-7-7g"><col 
id="TBL-7-7"></colgroup><colgroup id="TBL-7-8g"><col 
id="TBL-7-8"><col 
id="TBL-7-9"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-1-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-1-1"  
class="td11">            </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-1-2"  
class="td11">         </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-1-3"  
class="td11">             </td><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-7-1-4"  
class="td11">        <div class="multicolumn"  style="white-space:nowrap; text-align:center;">X10 C++ backend</div>                   </td><td colspan="3" style="white-space:nowrap; text-align:center;" id="TBL-7-1-7"  
class="td11">        <div class="multicolumn"  style="white-space:nowrap; text-align:center;">X10 Java backend</div></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-2-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-2-1"  
class="td11"> </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-2"  
class="td11"> </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-3"  
class="td11"> </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-4"  
class="td11"> Sequential </td> <td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-7-2-5"  
class="td11"> <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Parallel</div> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-7"  
class="td11"> Sequential </td> <td colspan="2" style="white-space:nowrap; text-align:center;" id="TBL-7-2-8"  
class="td11"> <div class="multicolumn"  style="white-space:nowrap; text-align:center;">Parallel</div>
</td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-3-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-3-1"  
class="td11">    Benchmarks  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-2"  
class="td11"> MATLAB  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-3"  
class="td11"> MATLAB parfor  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-4"  
class="td11"> No checks  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-5"  
class="td11"> No checks  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-6"  
class="td11"> Checks  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-7"  
class="td11"> No checks  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-8"  
class="td11"> No checks  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-9"  
class="td11"> Checks  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-4-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-4-1"  
class="td11">         mbrt  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-2"  
class="td11">   1.0        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-3"  
class="td11">     1.7             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-4"  
class="td11">   6.5        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-5"  
class="td11">   25.3       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-6"  
class="td11">  25.3    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-7"  
class="td11">   0.3        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-8"  
class="td11">   1.3        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-9"  
class="td11">  1.3     </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-5-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-5-1"  
class="td11"> nb1d </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-2"  
class="td11"> 1.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-3"  
class="td11"> 0.4 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-4"  
class="td11"> 6.2 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-5"  
class="td11"> 7.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-6"  
class="td11"> 7.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-7"  
class="td11"> 5.5 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-8"  
class="td11"> 19.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-9"  
class="td11"> 15.1</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-6-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-6-1"  
class="td11">       matmul  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-6-2"  
class="td11">   1.0        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-6-3"  
class="td11">     1.3             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-6-4"  
class="td11">   14.7       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-6-5"  
class="td11">   68.7       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-6-6"  
class="td11">  3.9     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-6-7"  
class="td11">   1.1        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-6-8"  
class="td11">   1.1        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-6-9"  
class="td11">  0.8     </td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-7-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-7-1"  
class="td11"> mcpi </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-7-2"  
class="td11"> 1.0 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-7-3"  
class="td11"> 4.6 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-7-4"  
class="td11"> 3.3 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-7-5"  
class="td11"> 15.7 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-7-6"  
class="td11"> 15.9 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-7-7"  
class="td11"> 2.9 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-7-8"  
class="td11"> 18.1 </td> <td  style="white-space:nowrap; text-align:center;" id="TBL-7-7-9"  
class="td11"> 18.2</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-8-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-8-1"  
class="td11">     numprime  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-8-2"  
class="td11">   1.0        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-8-3"  
class="td11">     5.3             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-8-4"  
class="td11">   7.6        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-8-5"  
class="td11">   30.0       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-8-6"  
class="td11">  30.9    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-8-7"  
class="td11">   6.5        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-8-8"  
class="td11">   24.8       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-8-9"  
class="td11">  26.4    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-9-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-9-1"  
class="td11">       optstop  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-9-2"  
class="td11">   1.0        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-9-3"  
class="td11">     4.1             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-9-4"  
class="td11">   1.4        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-9-5"  
class="td11">   2.0        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-9-6"  
class="td11">  2.1     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-9-7"  
class="td11">   1.8        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-9-8"  
class="td11">   10.7       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-9-9"  
class="td11">  9.7     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-10-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-10-1"  
class="td11">     quadrature  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-10-2"  
class="td11">   1.0        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-10-3"  
class="td11">     3.8             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-10-4"  
class="td11">  200.9      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-10-5"  
class="td11">   11.3       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-10-6"  
class="td11">  11.2    </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-10-7"  
class="td11">  167.4      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-10-8"  
class="td11">   13.0       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-10-9"  
class="td11">  13.0    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-11-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-11-1"  
class="td11"> Geometric mean  </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-11-2"  
class="td11">   1.0        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-11-3"  
class="td11">     2.3             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-11-4"  
class="td11">   8.9        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-11-5"  
class="td11">   14.5       </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-11-6"  
class="td11">  9.8     </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-11-7"  
class="td11">   3.7        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-11-8"  
class="td11">   7.8        </td><td  style="white-space:nowrap; text-align:center;" id="TBL-7-11-9"  
class="td11">  7.1     </td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-12-"><td  style="white-space:nowrap; text-align:right;" id="TBL-7-12-1"  
class="td11"> </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Table&#x00A0;9.5:  </span><span  
class="content">Performance  evaluation  for  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10  </span>generated  parallel  <span 
class="ptmrc8t-x-x-120">X10  </span>code  for  the
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>construct, speedups relative to Mathworks&#8217; <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, higher is better</span></div><!--tex4ht:label?: x1-54001r5 -->
</div>
                                                                                   

                                                                                   
   </div><hr class="endfloat" />
<!--l. 441--><p class="indent" >   For the <span 
class="ptmrc8t-x-x-120">X10 </span>C++ backend we achieved a mean speedup of 14.5 for the generated parallel <span 
class="ptmrc8t-x-x-120">X10</span>
code without bounds checks, which is around 7 times of the speedup for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code with
<span 
class="pcrr8t-x-x-120">parfor</span>, at a speedup of 2.3. Compared to <span 
class="ptmrc8t-x-x-120">X10 </span>sequential code which has a mean speedup of
8.9, it is more than 1.5 times as fast. Even with the parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code with bounds checks we
achieved a speedup of 9.8 which is over 4 times better than the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor</span>
code. The <span 
class="ptmri8t-x-x-120">optstop </span>benchmark is an interesting exception. It is actually slower (at a
speedup of 2.1) than the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>version (at a speedup of 4.1). The sequential
version of <span 
class="ptmri8t-x-x-120">optstop </span>is just slightly faster than the sequential <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>version, with a
speedup of just 1.5 (due to the reasons explained earlier in Sec.&#x00A0;<a 
href="#x1-490004">9.4<!--tex4ht:ref: sec:XXX --></a>) and the total time
for the parallel execution of each iteration, and managing the parallelization of these
activities is just slightly faster than the sequential version. We see a similar trend for the
<span 
class="ptmri8t-x-x-120">matmul </span>benchmark for the <span 
class="ptmrc8t-x-x-120">X10 </span>Java backend. It shows a speedup of just 0.8 (version
with bounds checks) as compared to 1.3 for the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>version. For the
parallel version of <span 
class="ptmri8t-x-x-120">matmul</span>, the speedup for the C++ backend with checks turned on is
just 3.9 compared to 14.7 for the sequential version with no checks, however it is 1.6
times faster than the sequential version with checks, which has a speedup of just 2.5
(shown in figure <a 
href="#x1-49001r1">9.1<!--tex4ht:ref: Fig:overall_perf --></a>). The <span 
class="ptmri8t-x-x-120">quadrature </span>benchmark shows very interesting numbers, with a
slowdown of about 20 times and 13 times for the parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code compared to the
sequential <span 
class="ptmrc8t-x-x-120">X10 </span>code, for the C++ backend and the Java backend respectively. The
<span 
class="ptmri8t-x-x-120">quadrature </span>benchmark consists of a loop with a large number of iterations (4600000 for our
experiment), where each iteration performs an insignificant amount of computations with
just 21 simple arithmetic operations on scalar values. A sequential speedup of over
200 times compared to the sequential <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code indicates the insignificance of
each iteration in terms of computation time. In the parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code, each iteration
is executed as a separate activity, and the time taken to manage the large number of
activities overshadows the sequential speedup. Also, each activity has an <span 
class="pcrr8t-x-x-120">atomic</span>
statement, which is a blocking construct (when one activity is executing the atomic
statement, all other activities are blocked) and adds further overhead to the activity
management system. Performance numbers for <span 
class="ptmri8t-x-x-120">quadrature </span>assert the fact that not all
parallel <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programs are good candidates to be compiled to parallel <span 
class="ptmrc8t-x-x-120">X10 </span>in a
                                                                                   

                                                                                   
straight-forward fashion, specially the ones with large number of parallel loop iterations
where each iteration itself does insignificant amount of work. As a future work, we
plan to handle such programs with more sophisticated parallelization techniques. For
example, one way to make a benchmark like <span 
class="ptmri8t-x-x-120">quadrature </span>more efficient would be to
break the loop into two nested loops and executing the outer loop in a parallel fashion
and the inner loop sequentially to ensure that each concurrent loop does substantial
amount of work, however the challenge here is to determine the right number of iterations
for the inner sequential loop to make it significant enough to take advantage of the
parallelization.
<!--l. 488--><p class="indent" >   Overall for the Java backend, we obtained a mean speedup of 7.8 for the <span 
class="ptmrc8t-x-x-120">X10 </span>code with no
bounds checks and 7.1 for the code with bounds checks. Compared to the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>parfor version
we obtained about 3.5 times better performance. The parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code is over 2 times faster than
the sequential <span 
class="ptmrc8t-x-x-120">X10 </span>code (speedup of 3.7). For both, the C++ backend, and the Java backend, the
mean speedup for the sequential <span 
class="ptmrc8t-x-x-120">X10 </span>code is also substantially faster than the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>parallel
code.
<!--l. 496--><p class="indent" >   To conclude, the parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code provides much higher performance gains compared to the
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>code and even the <span 
class="ptmrc8t-x-x-120">X10 </span>sequential code, which by itself is most of the times
faster than the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>parallel code.
<a 
 id="x1-54002r92"></a>
<h3 class="sectionHead"><span class="titlemark">9.9    </span> <a 
 id="x1-550009"></a>Summary</h3>
<!--l. 504--><p class="noindent" >We showed that the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>compiler with its efficient handling of array operations and
optimizations like IntegerOkay can generate <span 
class="ptmrc8t-x-x-120">X10 </span>code that provides performance comparable to
the native code generated by the state of the art languages like C, which is fairly low-level, and
Fortran, which itself is an array-based language. As a future work, we plan to use more efficient
implementations of the builtin functions, and believe that it would further improve the
performance of the code generated by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>.
<!--l. 513--><p class="indent" >   With <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>, we also took first steps to compile <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code to take full
advantage of the high performance features of <span 
class="ptmrc8t-x-x-120">X10</span>. Our preliminary results are very inspiring and
we plan to continue in this direction further, in the future.
                                                                                   

                                                                                   
<!--l. 518--><p class="indent" >   In addition to demonstrating that our approach leads to good code, these experiments have
also been quite valuable for the <span 
class="ptmrc8t-x-x-120">X10 </span>development team. Our generated code has stressed the <span 
class="ptmrc8t-x-x-120">X10</span>
system more than the hand-written <span 
class="ptmrc8t-x-x-120">X10 </span>benchmarks and has exposed places where further
improvements can be made.
                                                                                   

                                                                                   
<!--l. 429--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-55001r10"></a>
<a 
 id="Q1-1-95"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;10</span>
<!--l. 429--><p class="noindent" ><span 
class="phvb8t-x-x-197">Related Work</span>
<!--l. 429--><p class="noindent" >___________________________________________________________________________________
<!--l. 1--><p class="indent" >   The work in this thesis presents a research compiler for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. We provide a
source-to-source static compiler that targets the high-level, object oriented language, <span 
class="ptmrc8t-x-x-120">X10</span>. Our
approach is open and extensible and generates sequential <span 
class="ptmrc8t-x-x-120">X10 </span>code that is competitive in
performance to code in state-of-the-art languages like C and Fortran, generated by other <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
compilers. We also generated high performance code for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s <span 
class="pcrr8t-x-x-120">parfor </span>loops, that showed
great performance improvements.
<a 
 id="x1-55002r94"></a>
<h3 class="sectionHead"><span class="titlemark">10.1    </span> <a 
 id="x1-560001"></a>Alternatives to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span></h3>
<!--l. 10--><p class="noindent" >Although our focus is on handling <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>itself, there are notable open source alternatives
of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>like Scilab<span class="cite">[<a 
href="#XScilab">INR09</a>]</span>, Julia<span class="cite">[<a 
href="#Xjulia">BKSE12</a>]</span>, NumPy<span class="cite">[<a 
href="#Xnumpy">Sci</a>]</span>, FreeMat<span class="cite">[<a 
href="#Xfreemat">DKB</a>]</span> and
Octave<span class="cite">[<a 
href="#XOctave">Oct</a>]</span>. Octave is an open source implementation of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>language and
supports most of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>programs, however until the recently released version 3.8.1,
Octave was solely an interpreted language and our experiments showed it to be orders of
magnitude slower than <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. We would like to evaluate its performance for the latest
version that comes with a JIT compiler. Scilab and FreeMat are similar in syntax to
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>but have significant differences that prevent a significant portion of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
                                                                                   

                                                                                   
programs to be able to run on these systems. NumPy is a python package for scientific
computing, and Julia is a technical computing language. Julia also provides a fairly
advanced distributed parallel execution environment. However, these alternative systems
concentrate on providing open library support and have not tackled the problems of static
compilation. We are investigating if there is any way of sharing some of their library
support with <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>. A Comparative evaluation of Matlab, Octave, FreeMat, Scilab, R,
and IDL on a cluster computing system is presented in a technical report by Coman at
al.&#x00A0;<span class="cite">[<a 
href="#Xcoman">CBP<sup><span 
class="zptmcm7t-x-x-90">+</span></sup>12</a>]</span> The MEGHA project<span class="cite">[<a 
href="#Xmegha">PAG11</a>]</span> provides an interesting approach to map
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>array operations to CPUs and GPUs, but supports only a very small subset of
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>.
<a 
 id="x1-56001r96"></a>
<h3 class="sectionHead"><span class="titlemark">10.2    </span> <a 
 id="x1-570002"></a>Other <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>Compilers</h3>
<!--l. 38--><p class="noindent" >There have been previous research projects on static compilation of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>which focused
particularly on the array-based subset of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>and developed advanced static analyses for
determining shapes and sizes of arrays. For example, FALCON <span class="cite">[<a 
href="#Xfalcon">RP99</a>]</span> is a <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to
<span 
class="ptmrc8t-x-x-120">F<span 
class="small-caps">O</span><span 
class="small-caps">R</span><span 
class="small-caps">T</span><span 
class="small-caps">R</span><span 
class="small-caps">A</span><span 
class="small-caps">N</span>90 </span>translator with sophisticated type inference algorithms. The McLab group has
previously implemented a prototype Fortran 95 generator&#x00A0;<span class="cite">[<a 
href="#XMcForThesis">Li09</a>]</span>, and has more recently
developed the next generation Fortran generator, <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span></span>&#x00A0;<span class="cite">[<a 
href="#Xmc2for">LH14</a>]</span> in parallel with the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
project. Some of the solutions are shared between the projects, especially the parts which extend
the Tamer. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>Coder is a commercial compiler by MathWorks<span class="cite">[<a 
href="#XMATLABCoder">Mata</a>]</span>, which produces C
code for a subset of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. We also compared <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>&#8217;s performance to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>coder.
Below are more details about these and few other notable <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compiler research
projects:
      <ul class="itemize1">
      <li class="itemize">Falcon is a <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>-to-Fortran 90 compiler that applies type inference algorithms
      developed for the array programming language APL&#x00A0;<span class="cite">[<a 
href="#Xmagica">JB01</a>,&#x00A0;<a 
href="#X805380">WS81</a>,&#x00A0;<a 
href="#X801218">Bud83</a>]</span> and set
      language SETL&#x00A0;<span class="cite">[<a 
href="#X361235">Sch75</a>]</span>. It uses a static single-assignment(SSA) based intermediate
      representation,  and  inlines  all  functions  and  scripts  into  one  large  function.  The
      Falcon project also curated a set of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>benchmarks to measure the performance
      of their compiler. Several of our benchmarks are originally from Falcon&#8217;s benchmark
                                                                                   

                                                                                   
      suite.
      </li>
      <li class="itemize"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>is a prototype <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>-to-Fortran 95 generator developed by the <span 
class="ptmro8t-x-x-120">Mc</span><span 
class="ptmbc8t-x-x-120">L<span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>
      research group and paved way for further research (of which <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>is a part) into
      developing efficient static <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compilers for <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>is the second
      generation <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>-to-Fortran 95 compiler built on top of the Tamer and <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>S<span 
class="small-caps">A</span><span 
class="small-caps">F</span></span>
      static analysis tools. <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>and <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>share some of the solutions that extend
      the Tamer tool. We have also used <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>for our performance evaluation. A good
      performance  by  both  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10  </span>and  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">C</span>2F<span 
class="small-caps">O</span><span 
class="small-caps">R</span>  </span>further  validates  the  strength  of  our
      compilation techniques.
      </li>
      <li class="itemize">MAJIC (<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>Just-In-time Compiler)&#x00A0;<span class="cite">[<a 
href="#XMaJIC">AP02</a>]</span> is a continuation of the Falcon
      project. It aims to exploit optimization opportunities in the following three areas<span class="footnote-mark"><a 
href="thesis2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-57001f1"></a><span class="footnote-mark"><a 
 id="fn1x0">      <sup class="textsuperscript">1</sup></a></span><a 
href="http://polaris.cs.uiuc.edu/majic/techniques.html" class="url" ><span 
class="pcrr8t-">http://polaris.cs.uiuc.edu/majic/techniques.html</span></a> :
      (1) source-level optimizations for matrix-based operations; (2) just-in-time compilation
      to defer compilation as much as possible and thus minimize the effects of challenges
      raised by <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s "wild" nature as we discussed in <span 
class="ptmri8t-x-x-120">Chapter </span><a 
href="#x1-29031r6"><span 
class="ptmri8t-x-x-120">6</span><!--tex4ht:ref: chap:CodegenSeq --></a>; and (3) specialized
      optimizations for operations on sparse matrices.
      </li>
      <li class="itemize"><span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">E</span><span 
class="small-caps">N</span><span 
class="small-caps">H</span><span 
class="small-caps">I</span><span 
class="small-caps">R</span></span>&#x00A0;<span class="cite">[<a 
href="#X745866">CB98</a>]</span> is a retargetable <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>compiler that can generate C or Fortran
      code based on a target system description(MTSD). MTSD describes target system&#8217;s
      properties and implementation details and thus allows efficient code generation that
      exploits optimized sequential and parallel libraries.
      </li>
      <li class="itemize">MATCH&#x00A0;<span class="cite">[<a 
href="#XMAT2C">Joi03</a>]</span>   is   a   library   based   compilation   environment   for   distributed
      heterogeneous  adaptive  computing  systems  consisting  of  field-programmable  gate
      arrays  and  digital  signal  processors.  It  parallelizes  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>code  based  on  user
      directives and generates C code that can call different runtime libraries.
      </li>
                                                                                   

                                                                                   
      <li class="itemize">Otter&#x00A0;<span class="cite">[<a 
href="#XQuinn">QMSZ98b</a>]</span>  is  a  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>to  C  compiler  that  targets  parallel  computers
      supporting  parallel  numerical  libraries  like  ScaLAPACK&#x00A0;<span class="cite">[<a 
href="#X898821">CDD<sup><span 
class="zptmcm7t-x-x-90">+</span></sup>95</a>]</span>.  It  would  be
      interesting, as a future work, to compare performance of the Otter compiler to that of
      <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>when it supports the parallel compilation of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>more effectively.</li></ul>
<!--l. 91--><p class="indent" >   A major difference between <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>and these compilers is that <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>targets an object
oriented language with high-level array abstractions, and which is itself source-to-source
compiled, whereas all the above mentioned projects either target JIT compilation or static
compilation to either Fortran, which is itself an array based language and in fact was the precursor
of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>, or C, which is a fairly low-level language with advanced native compilers. Even
though some of the techniques used by these compilers were helpful in generating <span 
class="ptmrc8t-x-x-120">X10 </span>code for
simple <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>constructs, the novelty of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>lies in the fact that it identified major
challenges involved in efficiently compiling <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>arrays and array based operations
to <span 
class="ptmrc8t-x-x-120">X10 </span>and achieved a performance comparable to that of compilers targeting C and
Fortran.
<a 
 id="x1-57002r97"></a>
<h3 class="sectionHead"><span class="titlemark">10.3    </span> <a 
 id="x1-580003"></a>Compilers Targeting <span 
class="ptmrc8t-x-x-120">X10</span></h3>
<!--l. 104--><p class="noindent" >In terms of source-to-source compilers for <span 
class="ptmrc8t-x-x-120">X10</span>, we are aware of two other projects. StreamX10 is
a stream programming framework based on <span 
class="ptmrc8t-x-x-120">X10</span>&#x00A0;<span class="cite">[<a 
href="#XWei-2012">WTLY12</a>]</span>. StreamX10 consists of a stream
programming language COStream and a compiler which translates programs in COStream to
parallel <span 
class="ptmrc8t-x-x-120">X10 </span>code. Tetsu discusses the design of a Ruby-based DSL for parallel programming
that is compiled to <span 
class="ptmrc8t-x-x-120">X10</span>&#x00A0;<span class="cite">[<a 
href="#XTetsu-2011">Soh11</a>]</span>. Both these projects focus on compiling a parallel
programming language to <span 
class="ptmrc8t-x-x-120">X10</span>, a more efficient and generic parallel programming
language. In the future, we would like to study these projects in more depth and hope to
get useful insights into efficiently using <span 
class="ptmrc8t-x-x-120">X10 </span>as a target language for parallelism in
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>.
                                                                                   

                                                                                   
<a 
 id="x1-58001r11"></a>
<a 
 id="Q1-1-99"></a>
<span 
class="phvb8t-x-x-197">Chapter</span><span 
class="phvb8t-x-x-197">&#x00A0;11</span>
<!--l. 432--><p class="noindent" ><span 
class="phvb8t-x-x-197">Conclusions and Future Work</span>
<!--l. 432--><p class="noindent" >___________________________________________________________________________________
<a 
 id="x1-58002r98"></a>
<h3 class="sectionHead"><span class="titlemark">11.1    </span> <a 
 id="x1-590001"></a>Conclusions</h3>
<!--l. 2--><p class="noindent" >This thesis is about providing a bridge between two communities, the scientists/engineers/students
who like to program in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>on one side; and the programming language and compiler
community who have designed elegant languages and powerful compiler techniques on the other
side.
<!--l. 8--><p class="indent" >   The <span 
class="ptmrc8t-x-x-120">X10 </span>language has been designed to provide high-level array and concurrency
abstractions, and our main goal was to develop a tool that would allow programmers to
automatically convert their <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code to efficient <span 
class="ptmrc8t-x-x-120">X10 </span>code. In this way programmers can
port their existing <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>code to <span 
class="ptmrc8t-x-x-120">X10</span>, or continue to develop in <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>and use our <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>
compiler as a backend to generate <span 
class="ptmrc8t-x-x-120">X10 </span>code. Since <span 
class="ptmrc8t-x-x-120">X10 </span>is publicly available under the Eclipse
Public License (<a 
href="x10-lang.org/home/x10-license.html" class="url" ><span 
class="pcrr8t-x-x-120">x10-lang.org/home/x10-license.html</span></a>), users could have efficient
high-performance code that they could freely distribute. Further, <span 
class="ptmrc8t-x-x-120">X10 </span>itself can compile the code
to either Java or C++, so our tool could be used in a tool chain to convert <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to those
languages as well.
                                                                                   

                                                                                   
<!--l. 21--><p class="indent" >   Our tool is part of the McLab project, which is entirely open source. Thus, we are providing
an infrastructure for other compiler researchers to build upon this work, or to use some of our
approaches to handle other popular languages such as R.
<!--l. 26--><p class="indent" >   In this thesis we demonstrated the end-to-end organization of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>tool,
and we identified that the correct handling of arrays, the minimization of casting by
safely mapping <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>double variables to <span 
class="ptmrc8t-x-x-120">X10 </span>integer variables via <span 
class="ptmri8t-x-x-120">IntegerOkay</span>
analysis, and handling concurrency features were the key challenges. We developed
a custom version of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s rail-backed simple arrays, and identified where and how
this could be used for generating efficient <span 
class="ptmrc8t-x-x-120">X10 </span>code. For cases where precise static
array shape and type information is not available, we showed how we can use the very
flexible region-based arrays in <span 
class="ptmrc8t-x-x-120">X10</span>, and our experiments demonstrated that it is very
important to use the simple rail-backed arrays, for both the Java and C++ backends for
<span 
class="ptmrc8t-x-x-120">X10</span>.
<!--l. 38--><p class="indent" >   Our experiments show that our generated <span 
class="ptmrc8t-x-x-120">X10 </span>code is competitive with other state-of-the art
code generators which target more traditional languages like C and Fortran. The C++ <span 
class="ptmrc8t-x-x-120">X10</span>
backend produces faster code than the Java backend, but good performance is achieved in both
cases.
<!--l. 44--><p class="indent" >   One of the main motivations of choosing <span 
class="ptmrc8t-x-x-120">X10 </span>as the target language is that it supports
high-performance computing, which is often desirable for the computation-intensive applications
developed by the engineers and scientists. To demonstrate how to take advantage of <span 
class="ptmrc8t-x-x-120">X10</span>&#8217;s
concurrency, we presented an effective translation of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span><span 
class="pcrr8t-x-x-120">parfor </span>construct to
semantically equivalent <span 
class="ptmrc8t-x-x-120">X10</span>.
<!--l. 52--><p class="indent" >   Our experiments showed significant performance gains for our generated parallel
<span 
class="ptmrc8t-x-x-120">X10 </span>code, as compared to <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span></span>&#8217;s parallel toolbox. This confirms that compiling
<span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>to a modern high-performance language can lead to significant performance
improvements.
<!--l. 57--><p class="indent" >   In the process of developing <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>, we also stressed the <span 
class="ptmrc8t-x-x-120">X10 </span>compiler with machine
generated code and found it to be mostly robust and efficient. We found that the <span 
class="ptmrc8t-x-x-120">X10 </span>Java
backend&#8217;s optimizations may in some cases generate Java code that is too large to be JIT
compiled. We also found the random number generation for the C++ backend to be slower than
that for the Java backend. We reported our feedback to the <span 
class="ptmrc8t-x-x-120">X10 </span>development team and hope
                                                                                   

                                                                                   
that our findings would help to make <span 
class="ptmrc8t-x-x-120">X10 </span>even better. Overall, we found that with
the right techniques, <span 
class="ptmrc8t-x-x-120">X10 </span>can be used as an effective and efficient target language
for scientific and array-based languages, for both, the sequential core and the parallel
part.
<a 
 id="x1-59001r100"></a>
<h3 class="sectionHead"><span class="titlemark">11.2    </span> <a 
 id="x1-600002"></a>Future Work</h3>
<!--l. 68--><p class="noindent" >Based on our positive experiences to date, we plan to continue improving the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>tool. There
are three major areas where we plan to take ahead the development of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10</span>, with the aim of
making it more complete and more efficient:
      <dl class="description"><dt class="description">
<span 
class="ptmb8t-x-x-120">Exploiting parallelism</span> </dt><dd 
class="description">To help us better understand and efficiently exploit the inherent
      concurrency  in  the  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>programs,  first  of  all  we  would  like  to  thoroughly
      evaluate  and  fine  tune  the  concurrency  constructs  we  introduced  in  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>via
      structured comments, and parallelism of the vectorized operations. Further, we would
      like to experiment to find the best way to tune the generated code for different sorts of
      parallel architectures. We are also planning to further our research into the direction
      of  automatically  parallelizing  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>codes  through  static  analysis  mixed  with
      run-time checks.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Efficient builtin implementation</span> </dt><dd 
class="description">One of the greatest strengths of <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span> </span>is its &#x00A0;large
      and efficient set of builtin libraries. This thesis concentrates more on effective and
      efficient  compilation  of  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">A</span><span 
class="small-caps">T</span><span 
class="small-caps">L</span><span 
class="small-caps">A</span><span 
class="small-caps">B</span>  </span>constructs  than  finding  the  most  efficient  <span 
class="ptmrc8t-x-x-120">X10</span>
      implementations for the builtin operations. However, our experiments showed that
      there are some key library routines such as matrix multiply and transpose for which
      we need to have better <span 
class="ptmrc8t-x-x-120">X10 </span>code for. Thus, there is scope for more work on <span 
class="ptmrc8t-x-x-120">X10</span>
      libraries, which could also be useful for other source-to-source compilers targeting
      <span 
class="ptmrc8t-x-x-120">X10</span>.
      </dd><dt class="description">
<span 
class="ptmb8t-x-x-120">Readability</span> </dt><dd 
class="description">The code that we generate is already quite clean, but has a quite low-level
                                                                                   

                                                                                   
      structure, which might not be easily readable for non-experienced <span 
class="ptmrc8t-x-x-120">X10 </span>programmers.
      We would like to apply further transformations on it to aggregate some low-level
      expressions, and to make the generated code look as &#8220;natural" as possible. This would
      help  <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10  </span>users,  who  are  familiar  with  <span 
class="ptmrc8t-x-x-120">X10</span>,  to  easily  fine-tune  the  generated
      <span 
class="ptmrc8t-x-x-120">X10 </span>code to better suite their execution environments. It would also help in easy
      maintenance  of  the  generated  <span 
class="ptmrc8t-x-x-120">X10  </span>code,  and  better  integration  with  hand-written
      <span 
class="ptmrc8t-x-x-120">X10 </span>code.
      </dd></dl>
<!--l. 106--><p class="indent" >   Our tool is open source, and we hope that the other research teams will use our
infrastructure, as well as learn from our experiences of generating effective and efficient <span 
class="ptmrc8t-x-x-120">X10</span>
code.
                                                                                   

                                                                                   
<a 
 id="x1-60001r12"></a>
<a 
 id="Q1-1-102"></a>
                                                                                   <div class="thebibliography">
<p class="bibitem" ><span class="biblabel">
<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><span 
class="phvb8t-x-x-197">Bibliography</span>
</p><p class="bibitem-p" >___________________________________________________________________________________
 [AP02]     <a 
 id="XMaJIC"></a>George Almási and David Padua.   <a 
href="http://doi.acm.org/10.1145/512529.512564" >MaJIC: compiling MATLAB for speed
            and responsiveness</a>.  In <span 
class="ptmri8t-x-x-120">PLDI &#8217;02: Proceedings of the ACM SIGPLAN 2002</span>
            <span 
class="ptmri8t-x-x-120">Conference on Programming language design and implementation</span>, Berlin,
            Germany, 2002, pages 294&#8211;303. ACM.
 [BKSE12]  <a 
 id="Xjulia"></a>Jeff Bezanson, Stefan Karpinski, Viral&#x00A0;B. Shah, and Alan Edelman.   Julia:
            A Fast Dynamic Language for Technical Computing.  <span 
class="ptmri8t-x-x-120">CoRR</span>, abs/1209.5145,
            2012.
 [Bud83]    <a 
 id="X801218"></a>Timothy&#x00A0;A. Budd.  <a 
href="http://doi.acm.org/10.1145/800062.801218" >An APL compiler for the UNIX timesharing system</a>.  In
            <span 
class="ptmri8t-x-x-120">APL &#8217;83: Proceedings of the international conference on APL</span>, Washington,
            D.C., United States, 1983, pages 205&#8211;209. ACM, New York, NY, USA.
 [CB98]    <a 
 id="X745866"></a>Stéphane Chauveau and François Bodin.  Menhir: An Environment for High
            Performance Matlab. In <span 
class="ptmri8t-x-x-120">LCR &#8217;98: Selected Papers from the 4th International</span>
                                                                                   

                                                                                   
            <span 
class="ptmri8t-x-x-120">Workshop  on  Languages,  Compilers,  and  Run-Time  Systems  for  Scalable</span>
            <span 
class="ptmri8t-x-x-120">Computers</span>, 1998, pages 27&#8211;40. Springer-Verlag, London, UK.
 [CBP<sup><span 
class="zptmcm7t-x-x-90">+</span></sup>12]  <a 
 id="Xcoman"></a>E&#x00A0;Coman, M&#x00A0;Brewster, S&#x00A0;Popuri, A&#x00A0;Raim, and M&#x00A0;Gobbert. A Comparative
            Evaluation of Matlab, Octave, FreeMat, Scilab, R, and IDL on Tara. Technical
            report, Baltimore County, US, 2012.
 [CDD<sup><span 
class="zptmcm7t-x-x-90">+</span></sup>95] <a 
 id="X898821"></a>J.&#x00A0;Choi,  J.&#x00A0;Demmel,  I.&#x00A0;Dhillon,  J.&#x00A0;Dongarra,  S.&#x00A0;Ostrouchov,  A.&#x00A0;Petitet,
            K.&#x00A0;Staney,  D.&#x00A0;Walker,  and  R.&#x00A0;C.  Whaley.    LAPACK  Working  Note  95:
            ScaLAPACK:  A  Portable  Linear  Algebra  Library  for  Distributed  Memory
            Computers &#8211; Design Issues and Performance.   Technical report, Knoxville,
            TN, USA, 1995.
 [DH12a]   <a 
 id="XMcSAFecoop12"></a>Jesse Doherty and Laurie Hendren. McSAF: A static analysis framework for
            MATLAB. In <span 
class="ptmri8t-x-x-120">Proceedings of ECOOP 2012</span>, 2012, pages 132&#8211;155.
 [DH12b]   <a 
 id="XTamerPaper"></a>Anton Dubrau and Laurie Hendren.  Taming MATLAB.  In <span 
class="ptmri8t-x-x-120">Proceedings of</span>
            <span 
class="ptmri8t-x-x-120">OOPSLA 2012</span>, 2012, pages 503&#8211;522.
 [DHR11]   <a 
 id="XKindAnalysis"></a>Jesse  Doherty,  Laurie  Hendren,  and  Soroush  Radpour.   Kind  analysis  for
            MATLAB. In <span 
class="ptmri8t-x-x-120">In Proceedings of OOPSLA 2011</span>, 2011, pages 99&#8211;118.
 [DKB]     <a 
 id="Xfreemat"></a>Eugene&#x00A0;Ingerman   Demetrios&#x00A0;Kyriakis   and   Samit   Basu.         Freemat.
            <a 
href="http://freemat.sourceforge.net/" class="url" ><span 
class="pcrr8t-x-x-120">http://freemat.sourceforge.net/</span></a>.
 [Doh11]    <a 
 id="XJesseThesis"></a>Jesse Doherty.   McSAF: An Extensible Static Analysis Framework for the
            MATLAB Language. Master&#8217;s thesis, McGill University, December 2011.
                                                                                   

                                                                                   
 [Dub12]    <a 
 id="Xadubra12"></a>Anton Dubrau. Taming matlab. Master&#8217;s thesis, April 2012.
 [EH04]    <a 
 id="Xekman04"></a>Torbjörn  Ekman  and  Görel  Hedin.      Reusable  language  specifications
            in  JastAdd  II.      In  Thomas  Cleenewerck,  editor,  <span 
class="ptmri8t-x-x-120">Evolution  and  Reuse</span>
            <span 
class="ptmri8t-x-x-120">of  Language  Specifications  for  DSLs  (ERLS)</span>,  2004.      Available  from:
            <a 
href="http://prog.vub.ac.be/~thomas/ERLS/Ekman.pdf" class="url" ><span 
class="pcrr8t-x-x-120">http://prog.vub.ac.be/~thomas/ERLS/Ekman.pdf</span></a>.
 [IBM12]   <a 
 id="Xx10"></a>IBM.  X10 programming language.  <a 
href="http://x10-lang.org" class="url" ><span 
class="pcrr8t-x-x-120">http://x10-lang.org</span></a>, February
            2012.
 [IBM13a]  <a 
 id="Xapgaspaper"></a>IBM.                    APGAS       programming       in       X10       2.4,       2013.
            <a 
href="http://x10-lang.org/documentation/tutorials/apgas-programming-in-x10-24.html" class="url" ><span 
class="pcrr8t-x-x-120">http://x10-lang.org/documentation/tutorials/apgas-programming-in-x10-24.html</span></a>.
 [IBM13b]  <a 
 id="Xx10intro"></a>IBM.                              An          introduction          to          X10,          2013.
            <a 
href="http://x10.sourceforge.net/documentation/intro/latest/html/node4.html" class="url" ><span 
class="pcrr8t-x-x-120">http://x10.sourceforge.net/documentation/intro/latest/html/node4.html</span></a>.
 [INR09]    <a 
 id="XScilab"></a>INRIA. Scilab, 2009. <a 
href="http://www.scilab.org/platform/" class="url" ><span 
class="pcrr8t-x-x-120">http://www.scilab.org/platform/</span></a>.
 [jas]       <a 
 id="Xjastaddurl"></a>JastAdd. <a 
href="http://jastadd.org/" class="url" ><span 
class="pcrr8t-x-x-120">http://jastadd.org/</span></a>.
 [JB01]     <a 
 id="Xmagica"></a>Pramod&#x00A0;G. Joisha and Prithviraj Banerjee. <a 
href="http://doi.acm.org/10.1145/570407.570408" >Correctly detecting intrinsic type
            errors in typeless languages such as MATLAB</a>.  In <span 
class="ptmri8t-x-x-120">APL &#8217;01: Proceedings of</span>
            <span 
class="ptmri8t-x-x-120">the 2001 conference on APL</span>, New Haven, Connecticut, 2001, pages 7&#8211;21.
            ACM, New York, NY, USA.
                                                                                   

                                                                                   
 [Joi03]     <a 
 id="XMAT2C"></a>Pramod&#x00A0;G. Joisha. <a 
href="http://www.ece.northwestern.edu/cpdc/pjoisha/mat2c/" >a MATLAB-to-C translator</a>, 2003. <br 
class="newline" /><img 
src="thesis57x.png" alt="&#x003C; "  class="math" ><a 
href="http://www.ece.northwestern.edu/cpdc/pjoisha/mat2c/" >http://www.ece.northwestern.edu/cpdc/pjoisha/mat2c/</a><img 
src="thesis58x.png" alt="&#x003E; "  class="math" > .
 [LH14]    <a 
 id="Xmc2for"></a>Xu&#x00A0;Li  and  Laurie  Hendren.   Mc2for:  A  tool  for  automatically  translating
            matlab to fortran 95.  In <span 
class="ptmri8t-x-x-120">In Proceedings of CSMR-WCRE 2014</span>, 2014, pages
            234&#8211;243.
 [Li09]     <a 
 id="XMcForThesis"></a>Jun Li.   <a 
href="http://www.sable.mcgill.ca/mclab/matlab_fortran.html" >McFor: A MATLAB to FORTRAN 95 Compiler</a>.   Master&#8217;s thesis,
            McGill University, August 2009.
 [Mata]     <a 
 id="XMATLABCoder"></a>MathWorks.                                                             MATLAB               Coder.
            <a 
href="http://www.mathworks.com/products/matlab-coder/" class="url" ><span 
class="pcrr8t-x-x-120">http://www.mathworks.com/products/matlab-coder/</span></a>.
 [Matb]     <a 
 id="Xreducassg"></a>Mathworks. Reduction variables. <a 
href="http://www.mathworks.com/help/distcomp/advanced-topics.html#bq_of7_-3" class="url" ><span 
class="pcrr8t-x-x-120">http://www.mathworks.com/help/distcomp/advanced-topics.html#bq_of7_-3</span></a>.
 [Mat13]    <a 
 id="Xpct"></a>MathWorks.                          Parallel         computing         toolbox,         2013.
            <a 
href="http://www.mathworks.com/products/parallel-computing/" class="url" ><span 
class="pcrr8t-x-x-120">http://www.mathworks.com/products/parallel-computing/</span></a>.
 [Mol]      <a 
 id="XMatlabGrowth"></a>Cleve         Moler.                            The         Growth         of         MATLAB
            and             The             MathWorks             over             Two             Decades.
            <a 
href="http://www.mathworks.com/company/newsletters/news_notes/clevescorner/jan06.pdf" class="url" ><span 
class="pcrr8t-x-x-120">http://www.mathworks.com/company/newsletters/news_notes/clevescorner/jan06.pdf</span></a>.
 [Oct]      <a 
 id="XOctave"></a>GNU                                                                                                      Octave.
            <a 
href="http://www.gnu.org/software/octave/index.html" class="url" ><span 
class="pcrr8t-x-x-120">http://www.gnu.org/software/octave/index.html</span></a>.
 [PAG11]   <a 
 id="Xmegha"></a>Ashwin
                                                                                   

                                                                                   
            Prasad, Jayvant Anantpur, and R.&#x00A0;Govindarajan.  <a 
href="http://doi.acm.org/10.1145/1993498.1993517" >Automatic compilation of
            MATLAB programs for synergistic execution on heterogeneous processors</a>.
            In  <span 
class="ptmri8t-x-x-120">Proceedings  of  the  32nd  ACM  SIGPLAN  conference  on  Programming</span>
            <span 
class="ptmri8t-x-x-120">language design and implementation</span>, San Jose, California, USA, 2011, PLDI
            &#8217;11, pages 152&#8211;163. ACM, New York, NY, USA.
 [QMSZ98a]<a 
 id="XQMSZ98"></a>Michael&#x00A0;J.  Quinn,  Alexey  Malishevsky,  Nagajagadeswar  Seelam,  and  Yan
            Zhao.      Preliminary  Results  from  a  Parallel  MATLAB  Compiler.      In
            <span 
class="ptmri8t-x-x-120">Proceedings of Int. Parallel Processing Symp.</span>, 1998, IPPS, pages 81&#8211;87.
 [QMSZ98b]<a 
 id="XQuinn"></a>Michael&#x00A0;J.  Quinn,  Alexey  Malishevsky,  Nagajagadeswar  Seelam,  and  Yan
            Zhao.  Preliminary Results from a Parallel MATLAB Compiler.  In <span 
class="ptmri8t-x-x-120">Proc. Int.</span>
            <span 
class="ptmri8t-x-x-120">Parallel Processing Symp. (IPPS</span>, 1998, pages 81&#8211;87. IEEE CS Press.
 [RP99]     <a 
 id="Xfalcon"></a>Luiz&#x00A0;De Rose and David Padua. <a 
href="http://doi.acm.org/10.1145/316686.316693" >Techniques for the translation of MATLAB
            programs into Fortran 90</a>. <span 
class="ptmri8t-x-x-120">ACM Trans. Program. Lang. Syst.</span>, 21(2):286&#8211;323,
            1999.
 [SBP<sup><span 
class="zptmcm7t-x-x-90">+</span></sup>12]  <a 
 id="Xspecs"></a>Vijay  Saraswat,  Bard  Bloom,  Igor  Peshansky,  Olivier  Tardieu,  and  David
            Grove. <span 
class="ptmri8t-x-x-120">X10 Language Specification, Version 2.2</span>. January 2012.
 [Sch75]    <a 
 id="X361235"></a>J.&#x00A0;T. Schwartz.  <a 
href="http://doi.acm.org/10.1145/361227.361235" >Automatic data structure choice in a language of very high
            level</a>. <span 
class="ptmri8t-x-x-120">Commun. ACM</span>, 18(12):722&#8211;728, 1975.
 [Sci]       <a 
 id="Xnumpy"></a>Scipy.org. Numpy. <a 
href="http://www.numpy.org/" class="url" ><span 
class="pcrr8t-x-x-120">http://www.numpy.org/</span></a>.
 [Soh11]    <a 
 id="XTetsu-2011"></a>Tetsu Soh.  Design and implementation of a DSL based on Ruby for parallel
            programming. Technical report, The University of Tokyo, January 2011.
                                                                                   

                                                                                   
 [The02]    <a 
 id="Xmatlabjit"></a>The           Mathworks.                                 Technology           Backgrounder:
            Accelerating                    MATLAB,                    September                    2002.
            <a 
href="http://www.mathworks.com/company/newsletters/digest/sept02/accel_matlab.pdf" class="url" ><span 
class="pcrr8t-x-x-120">http://www.mathworks.com/company/newsletters/digest/sept02/accel_matlab.pdf</span></a>.
 [WS81]    <a 
 id="X805380"></a>Zvi Weiss and Harry&#x00A0;J. Saal. <a 
href="http://doi.acm.org/10.1145/800142.805380" >Compile time syntax analysis of APL programs</a>.
            In  <span 
class="ptmri8t-x-x-120">APL  &#8217;81:  Proceedings  of  the  international  conference  on  APL</span>,  San
            Francisco, California, United States, 1981, pages 313&#8211;320. ACM, New York,
            NY, USA.
 [WTLY12] <a 
 id="XWei-2012"></a>Haitao Wei, Hong Tan, Xiaoxian Liu, and Junqing Yu.  <a 
href="http://doi.acm.org/10.1145/2246056.2246057" >StreamX10: a stream
            programming framework on X10</a>. In <span 
class="ptmri8t-x-x-120">Proceedings of the 2012 ACM SIGPLAN</span>
            <span 
class="ptmri8t-x-x-120">X10 Workshop</span>, Beijing, China, 2012, X10 &#8217;12, pages 1:1&#8211;1:6. ACM, New
            York, NY, USA.
                                                                                   

                                                                                   
<a 
 id="x1-60002r1"></a>
<a 
 id="Q1-1-103"></a>
<span 
class="phvb8t-x-x-197">Appendix</span><span 
class="phvb8t-x-x-197">&#x00A0;A</span>
</p><!--l. 453--><p class="noindent" ><span 
class="phvb8t-x-x-197">XML structure for builtin framework</span>
<!--l. 453--><p class="noindent" >___________________________________________________________________________________
<!--l. 1--><p class="indent" >   The below listing gives the XML structure for the builtin operation <span 
class="pcrr8t-x-x-120">plus</span>. It contains two
upper level nodes for each real and complex numbers. Each of these have specialization nodes for
the simple arrays of different dimensions, and the region arrays. Each of the specializations has 5
types of implementations.
   <!--l. 7-->
<div class="lstlisting" id="listing-30"><span class="label"><a 
 id="x1-60003r1"></a><span 
class="ptmr8t-x-x-80">1</span></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60004r2"></a><span 
class="ptmr8t-x-x-80">2</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">real</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60005r3"></a><span 
class="ptmr8t-x-x-80">3</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">simple_array</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60006r4"></a><span 
class="ptmr8t-x-x-80">4</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">array_1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60007r5"></a><span 
class="ptmr8t-x-x-80">5</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60008r6"></a><span 
class="ptmr8t-x-x-80">6</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60009r7"></a><span 
class="ptmr8t-x-x-80">7</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60010r8"></a><span 
class="ptmr8t-x-x-80">8</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60011r9"></a><span 
class="ptmr8t-x-x-80">9</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60012r10"></a><span 
class="ptmr8t-x-x-80">10</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60013r11"></a><span 
class="ptmr8t-x-x-80">11</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60014r12"></a><span 
class="ptmr8t-x-x-80">12</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60015r13"></a><span 
class="ptmr8t-x-x-80">13</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">}{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60016r14"></a><span 
class="ptmr8t-x-x-80">14</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60017r15"></a><span 
class="ptmr8t-x-x-80">15</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60018r16"></a><span 
class="ptmr8t-x-x-80">16</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60019r17"></a><span 
class="ptmr8t-x-x-80">17</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60020r18"></a><span 
class="ptmr8t-x-x-80">18</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60021r19"></a><span 
class="ptmr8t-x-x-80">19</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60022r20"></a><span 
class="ptmr8t-x-x-80">20</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60023r21"></a><span 
class="ptmr8t-x-x-80">21</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60024r22"></a><span 
class="ptmr8t-x-x-80">22</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60025r23"></a><span 
class="ptmr8t-x-x-80">23</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60026r24"></a><span 
class="ptmr8t-x-x-80">24</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60027r25"></a><span 
class="ptmr8t-x-x-80">25</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60028r26"></a><span 
class="ptmr8t-x-x-80">26</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60029r27"></a><span 
class="ptmr8t-x-x-80">27</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60030r28"></a><span 
class="ptmr8t-x-x-80">28</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60031r29"></a><span 
class="ptmr8t-x-x-80">29</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60032r30"></a><span 
class="ptmr8t-x-x-80">30</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60033r31"></a><span 
class="ptmr8t-x-x-80">31</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60034r32"></a><span 
class="ptmr8t-x-x-80">32</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60035r33"></a><span 
class="ptmr8t-x-x-80">33</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60036r34"></a><span 
class="ptmr8t-x-x-80">34</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60037r35"></a><span 
class="ptmr8t-x-x-80">35</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60038r36"></a><span 
class="ptmr8t-x-x-80">36</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60039r37"></a><span 
class="ptmr8t-x-x-80">37</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60040r38"></a><span 
class="ptmr8t-x-x-80">38</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60041r39"></a><span 
class="ptmr8t-x-x-80">39</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60042r40"></a><span 
class="ptmr8t-x-x-80">40</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60043r41"></a><span 
class="ptmr8t-x-x-80">41</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">array_1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60044r42"></a><span 
class="ptmr8t-x-x-80">42</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">array_2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60045r43"></a><span 
class="ptmr8t-x-x-80">43</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60046r44"></a><span 
class="ptmr8t-x-x-80">44</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60047r45"></a><span 
class="ptmr8t-x-x-80">45</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60048r46"></a><span 
class="ptmr8t-x-x-80">46</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60049r47"></a><span 
class="ptmr8t-x-x-80">47</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60050r48"></a><span 
class="ptmr8t-x-x-80">48</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60051r49"></a><span 
class="ptmr8t-x-x-80">49</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60052r50"></a><span 
class="ptmr8t-x-x-80">50</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60053r51"></a><span 
class="ptmr8t-x-x-80">51</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">}{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60054r52"></a><span 
class="ptmr8t-x-x-80">52</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60055r53"></a><span 
class="ptmr8t-x-x-80">53</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60056r54"></a><span 
class="ptmr8t-x-x-80">54</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60057r55"></a><span 
class="ptmr8t-x-x-80">55</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60058r56"></a><span 
class="ptmr8t-x-x-80">56</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60059r57"></a><span 
class="ptmr8t-x-x-80">57</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60060r58"></a><span 
class="ptmr8t-x-x-80">58</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60061r59"></a><span 
class="ptmr8t-x-x-80">59</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60062r60"></a><span 
class="ptmr8t-x-x-80">60</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60063r61"></a><span 
class="ptmr8t-x-x-80">61</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60064r62"></a><span 
class="ptmr8t-x-x-80">62</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60065r63"></a><span 
class="ptmr8t-x-x-80">63</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60066r64"></a><span 
class="ptmr8t-x-x-80">64</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60067r65"></a><span 
class="ptmr8t-x-x-80">65</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60068r66"></a><span 
class="ptmr8t-x-x-80">66</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60069r67"></a><span 
class="ptmr8t-x-x-80">67</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60070r68"></a><span 
class="ptmr8t-x-x-80">68</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60071r69"></a><span 
class="ptmr8t-x-x-80">69</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60072r70"></a><span 
class="ptmr8t-x-x-80">70</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60073r71"></a><span 
class="ptmr8t-x-x-80">71</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60074r72"></a><span 
class="ptmr8t-x-x-80">72</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60075r73"></a><span 
class="ptmr8t-x-x-80">73</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60076r74"></a><span 
class="ptmr8t-x-x-80">74</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60077r75"></a><span 
class="ptmr8t-x-x-80">75</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60078r76"></a><span 
class="ptmr8t-x-x-80">76</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60079r77"></a><span 
class="ptmr8t-x-x-80">77</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60080r78"></a><span 
class="ptmr8t-x-x-80">78</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60081r79"></a><span 
class="ptmr8t-x-x-80">79</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">array_2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60082r80"></a><span 
class="ptmr8t-x-x-80">80</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">array_3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60083r81"></a><span 
class="ptmr8t-x-x-80">81</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60084r82"></a><span 
class="ptmr8t-x-x-80">82</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60085r83"></a><span 
class="ptmr8t-x-x-80">83</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60086r84"></a><span 
class="ptmr8t-x-x-80">84</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60087r85"></a><span 
class="ptmr8t-x-x-80">85</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60088r86"></a><span 
class="ptmr8t-x-x-80">86</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60089r87"></a><span 
class="ptmr8t-x-x-80">87</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60090r88"></a><span 
class="ptmr8t-x-x-80">88</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60091r89"></a><span 
class="ptmr8t-x-x-80">89</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">}{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60092r90"></a><span 
class="ptmr8t-x-x-80">90</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60093r91"></a><span 
class="ptmr8t-x-x-80">91</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60094r92"></a><span 
class="ptmr8t-x-x-80">92</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60095r93"></a><span 
class="ptmr8t-x-x-80">93</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60096r94"></a><span 
class="ptmr8t-x-x-80">94</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60097r95"></a><span 
class="ptmr8t-x-x-80">95</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60098r96"></a><span 
class="ptmr8t-x-x-80">96</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60099r97"></a><span 
class="ptmr8t-x-x-80">97</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60100r98"></a><span 
class="ptmr8t-x-x-80">98</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60101r99"></a><span 
class="ptmr8t-x-x-80">99</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60102r100"></a><span 
class="ptmr8t-x-x-80">100</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60103r101"></a><span 
class="ptmr8t-x-x-80">101</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60104r102"></a><span 
class="ptmr8t-x-x-80">102</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60105r103"></a><span 
class="ptmr8t-x-x-80">103</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60106r104"></a><span 
class="ptmr8t-x-x-80">104</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60107r105"></a><span 
class="ptmr8t-x-x-80">105</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60108r106"></a><span 
class="ptmr8t-x-x-80">106</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60109r107"></a><span 
class="ptmr8t-x-x-80">107</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60110r108"></a><span 
class="ptmr8t-x-x-80">108</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60111r109"></a><span 
class="ptmr8t-x-x-80">109</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60112r110"></a><span 
class="ptmr8t-x-x-80">110</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60113r111"></a><span 
class="ptmr8t-x-x-80">111</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60114r112"></a><span 
class="ptmr8t-x-x-80">112</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60115r113"></a><span 
class="ptmr8t-x-x-80">113</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60116r114"></a><span 
class="ptmr8t-x-x-80">114</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60117r115"></a><span 
class="ptmr8t-x-x-80">115</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60118r116"></a><span 
class="ptmr8t-x-x-80">116</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60119r117"></a><span 
class="ptmr8t-x-x-80">117</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">array_3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60120r118"></a><span 
class="ptmr8t-x-x-80">118</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">simple_array</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60121r119"></a><span 
class="ptmr8t-x-x-80">119</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">region_array</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60122r120"></a><span 
class="ptmr8t-x-x-80">120</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60123r121"></a><span 
class="ptmr8t-x-x-80">121</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60124r122"></a><span 
class="ptmr8t-x-x-80">122</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60125r123"></a><span 
class="ptmr8t-x-x-80">123</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60126r124"></a><span 
class="ptmr8t-x-x-80">124</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60127r125"></a><span 
class="ptmr8t-x-x-80">125</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60128r126"></a><span 
class="ptmr8t-x-x-80">126</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60129r127"></a><span 
class="ptmr8t-x-x-80">127</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60130r128"></a><span 
class="ptmr8t-x-x-80">128</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">}{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60131r129"></a><span 
class="ptmr8t-x-x-80">129</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60132r130"></a><span 
class="ptmr8t-x-x-80">130</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60133r131"></a><span 
class="ptmr8t-x-x-80">131</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60134r132"></a><span 
class="ptmr8t-x-x-80">132</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60135r133"></a><span 
class="ptmr8t-x-x-80">133</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60136r134"></a><span 
class="ptmr8t-x-x-80">134</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60137r135"></a><span 
class="ptmr8t-x-x-80">135</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60138r136"></a><span 
class="ptmr8t-x-x-80">136</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60139r137"></a><span 
class="ptmr8t-x-x-80">137</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60140r138"></a><span 
class="ptmr8t-x-x-80">138</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60141r139"></a><span 
class="ptmr8t-x-x-80">139</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60142r140"></a><span 
class="ptmr8t-x-x-80">140</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60143r141"></a><span 
class="ptmr8t-x-x-80">141</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60144r142"></a><span 
class="ptmr8t-x-x-80">142</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60145r143"></a><span 
class="ptmr8t-x-x-80">143</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60146r144"></a><span 
class="ptmr8t-x-x-80">144</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60147r145"></a><span 
class="ptmr8t-x-x-80">145</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60148r146"></a><span 
class="ptmr8t-x-x-80">146</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60149r147"></a><span 
class="ptmr8t-x-x-80">147</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60150r148"></a><span 
class="ptmr8t-x-x-80">148</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60151r149"></a><span 
class="ptmr8t-x-x-80">149</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60152r150"></a><span 
class="ptmr8t-x-x-80">150</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60153r151"></a><span 
class="ptmr8t-x-x-80">151</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60154r152"></a><span 
class="ptmr8t-x-x-80">152</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60155r153"></a><span 
class="ptmr8t-x-x-80">153</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60156r154"></a><span 
class="ptmr8t-x-x-80">154</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60157r155"></a><span 
class="ptmr8t-x-x-80">155</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60158r156"></a><span 
class="ptmr8t-x-x-80">156</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">region_array</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60159r157"></a><span 
class="ptmr8t-x-x-80">157</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">real</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60160r158"></a><span 
class="ptmr8t-x-x-80">158</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">complex</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60161r159"></a><span 
class="ptmr8t-x-x-80">159</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">simple_array</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60162r160"></a><span 
class="ptmr8t-x-x-80">160</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">array_1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60163r161"></a><span 
class="ptmr8t-x-x-80">161</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60164r162"></a><span 
class="ptmr8t-x-x-80">162</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60165r163"></a><span 
class="ptmr8t-x-x-80">163</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60166r164"></a><span 
class="ptmr8t-x-x-80">164</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60167r165"></a><span 
class="ptmr8t-x-x-80">165</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60168r166"></a><span 
class="ptmr8t-x-x-80">166</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60169r167"></a><span 
class="ptmr8t-x-x-80">167</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60170r168"></a><span 
class="ptmr8t-x-x-80">168</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60171r169"></a><span 
class="ptmr8t-x-x-80">169</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">}{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60172r170"></a><span 
class="ptmr8t-x-x-80">170</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60173r171"></a><span 
class="ptmr8t-x-x-80">171</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60174r172"></a><span 
class="ptmr8t-x-x-80">172</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60175r173"></a><span 
class="ptmr8t-x-x-80">173</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60176r174"></a><span 
class="ptmr8t-x-x-80">174</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60177r175"></a><span 
class="ptmr8t-x-x-80">175</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60178r176"></a><span 
class="ptmr8t-x-x-80">176</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60179r177"></a><span 
class="ptmr8t-x-x-80">177</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60180r178"></a><span 
class="ptmr8t-x-x-80">178</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60181r179"></a><span 
class="ptmr8t-x-x-80">179</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60182r180"></a><span 
class="ptmr8t-x-x-80">180</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60183r181"></a><span 
class="ptmr8t-x-x-80">181</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60184r182"></a><span 
class="ptmr8t-x-x-80">182</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60185r183"></a><span 
class="ptmr8t-x-x-80">183</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60186r184"></a><span 
class="ptmr8t-x-x-80">184</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60187r185"></a><span 
class="ptmr8t-x-x-80">185</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60188r186"></a><span 
class="ptmr8t-x-x-80">186</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60189r187"></a><span 
class="ptmr8t-x-x-80">187</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60190r188"></a><span 
class="ptmr8t-x-x-80">188</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60191r189"></a><span 
class="ptmr8t-x-x-80">189</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60192r190"></a><span 
class="ptmr8t-x-x-80">190</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60193r191"></a><span 
class="ptmr8t-x-x-80">191</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60194r192"></a><span 
class="ptmr8t-x-x-80">192</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60195r193"></a><span 
class="ptmr8t-x-x-80">193</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60196r194"></a><span 
class="ptmr8t-x-x-80">194</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60197r195"></a><span 
class="ptmr8t-x-x-80">195</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60198r196"></a><span 
class="ptmr8t-x-x-80">196</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60199r197"></a><span 
class="ptmr8t-x-x-80">197</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">array_1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60200r198"></a><span 
class="ptmr8t-x-x-80">198</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">array_2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60201r199"></a><span 
class="ptmr8t-x-x-80">199</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60202r200"></a><span 
class="ptmr8t-x-x-80">200</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60203r201"></a><span 
class="ptmr8t-x-x-80">201</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60204r202"></a><span 
class="ptmr8t-x-x-80">202</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60205r203"></a><span 
class="ptmr8t-x-x-80">203</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60206r204"></a><span 
class="ptmr8t-x-x-80">204</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60207r205"></a><span 
class="ptmr8t-x-x-80">205</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60208r206"></a><span 
class="ptmr8t-x-x-80">206</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60209r207"></a><span 
class="ptmr8t-x-x-80">207</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">}{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60210r208"></a><span 
class="ptmr8t-x-x-80">208</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60211r209"></a><span 
class="ptmr8t-x-x-80">209</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60212r210"></a><span 
class="ptmr8t-x-x-80">210</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60213r211"></a><span 
class="ptmr8t-x-x-80">211</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60214r212"></a><span 
class="ptmr8t-x-x-80">212</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60215r213"></a><span 
class="ptmr8t-x-x-80">213</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60216r214"></a><span 
class="ptmr8t-x-x-80">214</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60217r215"></a><span 
class="ptmr8t-x-x-80">215</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60218r216"></a><span 
class="ptmr8t-x-x-80">216</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60219r217"></a><span 
class="ptmr8t-x-x-80">217</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60220r218"></a><span 
class="ptmr8t-x-x-80">218</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60221r219"></a><span 
class="ptmr8t-x-x-80">219</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60222r220"></a><span 
class="ptmr8t-x-x-80">220</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60223r221"></a><span 
class="ptmr8t-x-x-80">221</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60224r222"></a><span 
class="ptmr8t-x-x-80">222</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60225r223"></a><span 
class="ptmr8t-x-x-80">223</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60226r224"></a><span 
class="ptmr8t-x-x-80">224</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60227r225"></a><span 
class="ptmr8t-x-x-80">225</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60228r226"></a><span 
class="ptmr8t-x-x-80">226</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60229r227"></a><span 
class="ptmr8t-x-x-80">227</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60230r228"></a><span 
class="ptmr8t-x-x-80">228</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60231r229"></a><span 
class="ptmr8t-x-x-80">229</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60232r230"></a><span 
class="ptmr8t-x-x-80">230</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60233r231"></a><span 
class="ptmr8t-x-x-80">231</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60234r232"></a><span 
class="ptmr8t-x-x-80">232</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60235r233"></a><span 
class="ptmr8t-x-x-80">233</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60236r234"></a><span 
class="ptmr8t-x-x-80">234</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60237r235"></a><span 
class="ptmr8t-x-x-80">235</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">array_2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60238r236"></a><span 
class="ptmr8t-x-x-80">236</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">array_3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60239r237"></a><span 
class="ptmr8t-x-x-80">237</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60240r238"></a><span 
class="ptmr8t-x-x-80">238</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60241r239"></a><span 
class="ptmr8t-x-x-80">239</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60242r240"></a><span 
class="ptmr8t-x-x-80">240</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60243r241"></a><span 
class="ptmr8t-x-x-80">241</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60244r242"></a><span 
class="ptmr8t-x-x-80">242</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60245r243"></a><span 
class="ptmr8t-x-x-80">243</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60246r244"></a><span 
class="ptmr8t-x-x-80">244</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60247r245"></a><span 
class="ptmr8t-x-x-80">245</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">}{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60248r246"></a><span 
class="ptmr8t-x-x-80">246</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60249r247"></a><span 
class="ptmr8t-x-x-80">247</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">indices</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60250r248"></a><span 
class="ptmr8t-x-x-80">248</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60251r249"></a><span 
class="ptmr8t-x-x-80">249</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60252r250"></a><span 
class="ptmr8t-x-x-80">250</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60253r251"></a><span 
class="ptmr8t-x-x-80">251</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60254r252"></a><span 
class="ptmr8t-x-x-80">252</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60255r253"></a><span 
class="ptmr8t-x-x-80">253</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60256r254"></a><span 
class="ptmr8t-x-x-80">254</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60257r255"></a><span 
class="ptmr8t-x-x-80">255</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60258r256"></a><span 
class="ptmr8t-x-x-80">256</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60259r257"></a><span 
class="ptmr8t-x-x-80">257</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60260r258"></a><span 
class="ptmr8t-x-x-80">258</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60261r259"></a><span 
class="ptmr8t-x-x-80">259</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60262r260"></a><span 
class="ptmr8t-x-x-80">260</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60263r261"></a><span 
class="ptmr8t-x-x-80">261</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60264r262"></a><span 
class="ptmr8t-x-x-80">262</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60265r263"></a><span 
class="ptmr8t-x-x-80">263</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60266r264"></a><span 
class="ptmr8t-x-x-80">264</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60267r265"></a><span 
class="ptmr8t-x-x-80">265</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60268r266"></a><span 
class="ptmr8t-x-x-80">266</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60269r267"></a><span 
class="ptmr8t-x-x-80">267</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60270r268"></a><span 
class="ptmr8t-x-x-80">268</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60271r269"></a><span 
class="ptmr8t-x-x-80">269</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60272r270"></a><span 
class="ptmr8t-x-x-80">270</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60273r271"></a><span 
class="ptmr8t-x-x-80">271</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60274r272"></a><span 
class="ptmr8t-x-x-80">272</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60275r273"></a><span 
class="ptmr8t-x-x-80">273</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">array_3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60276r274"></a><span 
class="ptmr8t-x-x-80">274</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">simple_array</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60277r275"></a><span 
class="ptmr8t-x-x-80">275</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">region_array</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60278r276"></a><span 
class="ptmr8t-x-x-80">276</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60279r277"></a><span 
class="ptmr8t-x-x-80">277</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60280r278"></a><span 
class="ptmr8t-x-x-80">278</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60281r279"></a><span 
class="ptmr8t-x-x-80">279</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60282r280"></a><span 
class="ptmr8t-x-x-80">280</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60283r281"></a><span 
class="ptmr8t-x-x-80">281</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60284r282"></a><span 
class="ptmr8t-x-x-80">282</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type1</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60285r283"></a><span 
class="ptmr8t-x-x-80">283</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60286r284"></a><span 
class="ptmr8t-x-x-80">284</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">==</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">rank</span><span 
class="pcrr8t-">}{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60287r285"></a><span 
class="ptmr8t-x-x-80">285</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60288r286"></a><span 
class="ptmr8t-x-x-80">286</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60289r287"></a><span 
class="ptmr8t-x-x-80">287</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60290r288"></a><span 
class="ptmr8t-x-x-80">288</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60291r289"></a><span 
class="ptmr8t-x-x-80">289</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60292r290"></a><span 
class="ptmr8t-x-x-80">290</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60293r291"></a><span 
class="ptmr8t-x-x-80">291</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60294r292"></a><span 
class="ptmr8t-x-x-80">292</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60295r293"></a><span 
class="ptmr8t-x-x-80">293</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60296r294"></a><span 
class="ptmr8t-x-x-80">294</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60297r295"></a><span 
class="ptmr8t-x-x-80">295</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60298r296"></a><span 
class="ptmr8t-x-x-80">296</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60299r297"></a><span 
class="ptmr8t-x-x-80">297</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60300r298"></a><span 
class="ptmr8t-x-x-80">298</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60301r299"></a><span 
class="ptmr8t-x-x-80">299</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60302r300"></a><span 
class="ptmr8t-x-x-80">300</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type3</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60303r301"></a><span 
class="ptmr8t-x-x-80">301</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60304r302"></a><span 
class="ptmr8t-x-x-80">302</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60305r303"></a><span 
class="ptmr8t-x-x-80">303</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Array</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Double</span><span 
class="pcrr8t-">](</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60306r304"></a><span 
class="ptmr8t-x-x-80">304</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">for</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">region</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60307r305"></a><span 
class="ptmr8t-x-x-80">305</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">a</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60308r306"></a><span 
class="ptmr8t-x-x-80">306</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60309r307"></a><span 
class="ptmr8t-x-x-80">307</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">return</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">x</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60310r308"></a><span 
class="ptmr8t-x-x-80">308</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60311r309"></a><span 
class="ptmr8t-x-x-80">309</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type4</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60312r310"></a><span 
class="ptmr8t-x-x-80">310</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60313r311"></a><span 
class="ptmr8t-x-x-80">311</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">type5</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60314r312"></a><span 
class="ptmr8t-x-x-80">312</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">region_array</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60315r313"></a><span 
class="ptmr8t-x-x-80">313</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">complex</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60316r314"></a><span 
class="ptmr8t-x-x-80">314</span></span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">plus</span><span 
class="pcrr8t-">&#x003E;</span>
   </div>
                                                                                   

                                                                                   
<!--l. 463--><p class="indent" >
                                                                                   

                                                                                   
<a 
 id="x1-60317r2"></a>
<a 
 id="Q1-1-104"></a>
<span 
class="phvb8t-x-x-197">Appendix</span><span 
class="phvb8t-x-x-197">&#x00A0;B</span>
<!--l. 463--><p class="noindent" ><span 
class="ptmrc8t-x-x-207">M<span 
class="small-caps">I</span>X10 </span><span 
class="phvb8t-x-x-197">IR Grammar</span>
<!--l. 463--><p class="noindent" >___________________________________________________________________________________
<!--l. 1--><p class="indent" >   Listing below gives the JastAdd implementation of the <span 
class="ptmrc8t-x-x-120">M<span 
class="small-caps">I</span>X10 </span>IR grammar.
   <!--l. 4-->
<div class="lstlisting" id="listing-31"><span class="label"><a 
 id="x1-60318r1"></a><span 
class="ptmr8t-x-x-80">1</span></span><span 
class="pcrr8t-">Program</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ClassBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60319r2"></a><span 
class="ptmr8t-x-x-80">2</span></span><span 
class="pcrr8t-">PPHelper</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60320r3"></a><span 
class="ptmr8t-x-x-80">3</span></span><span 
class="pcrr8t-">ClassBlock</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">DeclStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Method</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">UseNewArray</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Boolean</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60321r4"></a><span 
class="ptmr8t-x-x-80">4</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60322r5"></a><span 
class="ptmr8t-x-x-80">5</span></span><span 
class="pcrr8t-">CommentStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Comment</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60323r6"></a><span 
class="ptmr8t-x-x-80">6</span></span><span 
class="pcrr8t-">BreakStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60324r7"></a><span 
class="ptmr8t-x-x-80">7</span></span><span 
class="pcrr8t-">ContinueStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60325r8"></a><span 
class="ptmr8t-x-x-80">8</span></span><span 
class="pcrr8t-">DeclStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">MultiDeclLHS</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDInfo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">RHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60326r9"></a><span 
class="ptmr8t-x-x-80">9</span></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Mutable</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Boolean</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Atomic</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Boolean</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60327r10"></a><span 
class="ptmr8t-x-x-80">10</span></span><span 
class="pcrr8t-">Literally</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Verbatim</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60328r11"></a><span 
class="ptmr8t-x-x-80">11</span></span><span 
class="pcrr8t-">LiterallyExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Verbatim</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60329r12"></a><span 
class="ptmr8t-x-x-80">12</span></span><span 
class="pcrr8t-">BlockEnd</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Literally</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60330r13"></a><span 
class="ptmr8t-x-x-80">13</span></span><span 
class="pcrr8t-">PointLooper</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">PointID</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ArrayID</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60331r14"></a><span 
class="ptmr8t-x-x-80">14</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">DimNumber</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">int</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Min</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Max</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60332r15"></a><span 
class="ptmr8t-x-x-80">15</span></span><span 
class="pcrr8t-">Method</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MethodHeader</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MethodBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60333r16"></a><span 
class="ptmr8t-x-x-80">16</span></span><span 
class="pcrr8t-">MethodHeader</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ReturnType</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AccessVal</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Name</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60334r17"></a><span 
class="ptmr8t-x-x-80">17</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Args</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDInfo</span><span 
class="pcrr8t-">*;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60335r18"></a><span 
class="ptmr8t-x-x-80">18</span></span><span 
class="pcrr8t-">ReturnStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ReturnVal</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60336r19"></a><span 
class="ptmr8t-x-x-80">19</span></span><span 
class="pcrr8t-">Type</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AccessVal</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Name</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60337r20"></a><span 
class="ptmr8t-x-x-80">20</span></span><span 
class="pcrr8t-">MethodBlock</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60338r21"></a><span 
class="ptmr8t-x-x-80">21</span></span><span 
class="pcrr8t-">AssignStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">MultiAssignLHS</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDInfo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60339r22"></a><span 
class="ptmr8t-x-x-80">22</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">TypeCast</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Boolean</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Atomic</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Boolean</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60340r23"></a><span 
class="ptmr8t-x-x-80">23</span></span><span 
class="pcrr8t-">ExpStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60341r24"></a><span 
class="ptmr8t-x-x-80">24</span></span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">ID</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60342r25"></a><span 
class="ptmr8t-x-x-80">25</span></span><span 
class="pcrr8t-">Dims</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60343r26"></a><span 
class="ptmr8t-x-x-80">26</span></span><span 
class="pcrr8t-">IDInfo</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Type</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Name</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Shape</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">ArrayList</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60344r27"></a><span 
class="ptmr8t-x-x-80">27</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">didShapeChange</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Boolean</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">isComplex</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Value</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60345r28"></a><span 
class="ptmr8t-x-x-80">28</span></span><span 
class="pcrr8t-">MultiDeclLHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">IDInfo</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60346r29"></a><span 
class="ptmr8t-x-x-80">29</span></span><span 
class="pcrr8t-">MultiAssignLHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">IDInfo</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60347r30"></a><span 
class="ptmr8t-x-x-80">30</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">UnaryExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Operand</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60348r31"></a><span 
class="ptmr8t-x-x-80">31</span></span><span 
class="pcrr8t-">PreIncExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">UnaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60349r32"></a><span 
class="ptmr8t-x-x-80">32</span></span><span 
class="pcrr8t-">PreDecExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">UnaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60350r33"></a><span 
class="ptmr8t-x-x-80">33</span></span><span 
class="pcrr8t-">MinusExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">UnaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60351r34"></a><span 
class="ptmr8t-x-x-80">34</span></span><span 
class="pcrr8t-">PlusExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">UnaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60352r35"></a><span 
class="ptmr8t-x-x-80">35</span></span><span 
class="pcrr8t-">NegExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">UnaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60353r36"></a><span 
class="ptmr8t-x-x-80">36</span></span><span 
class="pcrr8t-">EmptyExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60354r37"></a><span 
class="ptmr8t-x-x-80">37</span></span><span 
class="pcrr8t-">RegionBuilder</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Lower</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Upper</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60355r38"></a><span 
class="ptmr8t-x-x-80">38</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ArrayID</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60356r39"></a><span 
class="ptmr8t-x-x-80">39</span></span><span 
class="pcrr8t-">SimpleArrayExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Values</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Point</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Type</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60357r40"></a><span 
class="ptmr8t-x-x-80">40</span></span><span 
class="pcrr8t-">Point</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">CoOrd</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IntLiteral</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60358r41"></a><span 
class="ptmr8t-x-x-80">41</span></span><span 
class="pcrr8t-">ArrayAccess</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AccessVal</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ArrayID</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Indices</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60359r42"></a><span 
class="ptmr8t-x-x-80">42</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">IsColVector</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Boolean</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60360r43"></a><span 
class="ptmr8t-x-x-80">43</span></span><span 
class="pcrr8t-">ArraySetStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDInfo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Indices</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60361r44"></a><span 
class="ptmr8t-x-x-80">44</span></span><span 
class="pcrr8t-">SubArraySetStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDInfo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Lower</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Upper</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60362r45"></a><span 
class="ptmr8t-x-x-80">45</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RHS</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60363r46"></a><span 
class="ptmr8t-x-x-80">46</span></span><span 
class="pcrr8t-">SubArrayGetExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Lower</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Upper</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ArrayID</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60364r47"></a><span 
class="ptmr8t-x-x-80">47</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LiteralExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60365r48"></a><span 
class="ptmr8t-x-x-80">48</span></span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">LiteralExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60366r49"></a><span 
class="ptmr8t-x-x-80">49</span></span><span 
class="pcrr8t-">StringLiteral</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60367r50"></a><span 
class="ptmr8t-x-x-80">50</span></span><span 
class="pcrr8t-">FPLiteral</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60368r51"></a><span 
class="ptmr8t-x-x-80">51</span></span><span 
class="pcrr8t-">DoubleLiteral</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60369r52"></a><span 
class="ptmr8t-x-x-80">52</span></span><span 
class="pcrr8t-">IntLiteral</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60370r53"></a><span 
class="ptmr8t-x-x-80">53</span></span><span 
class="pcrr8t-">BoolLiteral</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60371r54"></a><span 
class="ptmr8t-x-x-80">54</span></span><span 
class="pcrr8t-">LongLiteral</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60372r55"></a><span 
class="ptmr8t-x-x-80">55</span></span><span 
class="pcrr8t-">CharLiteral</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Literal</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60373r56"></a><span 
class="ptmr8t-x-x-80">56</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">BinaryExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LeftOp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RightOp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60374r57"></a><span 
class="ptmr8t-x-x-80">57</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ArithExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">BinaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60375r58"></a><span 
class="ptmr8t-x-x-80">58</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MultiplicativeExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">ArithExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60376r59"></a><span 
class="ptmr8t-x-x-80">59</span></span><span 
class="pcrr8t-">MulExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">MultiplicativeExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60377r60"></a><span 
class="ptmr8t-x-x-80">60</span></span><span 
class="pcrr8t-">DivExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">MultiplicativeExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60378r61"></a><span 
class="ptmr8t-x-x-80">61</span></span><span 
class="pcrr8t-">ModExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">MultiplicativeExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60379r62"></a><span 
class="ptmr8t-x-x-80">62</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">AdditiveExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">BinaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60380r63"></a><span 
class="ptmr8t-x-x-80">63</span></span><span 
class="pcrr8t-">AddExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AdditiveExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60381r64"></a><span 
class="ptmr8t-x-x-80">64</span></span><span 
class="pcrr8t-">SubExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AdditiveExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60382r65"></a><span 
class="ptmr8t-x-x-80">65</span></span><span 
class="pcrr8t-">IncExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AdditiveExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60383r66"></a><span 
class="ptmr8t-x-x-80">66</span></span><span 
class="pcrr8t-">DecExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AdditiveExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60384r67"></a><span 
class="ptmr8t-x-x-80">67</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RelationalExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">BinaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60385r68"></a><span 
class="ptmr8t-x-x-80">68</span></span><span 
class="pcrr8t-">LTExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RelationalExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60386r69"></a><span 
class="ptmr8t-x-x-80">69</span></span><span 
class="pcrr8t-">GTExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RelationalExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60387r70"></a><span 
class="ptmr8t-x-x-80">70</span></span><span 
class="pcrr8t-">LEExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RelationalExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60388r71"></a><span 
class="ptmr8t-x-x-80">71</span></span><span 
class="pcrr8t-">GEExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RelationalExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60389r72"></a><span 
class="ptmr8t-x-x-80">72</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">EqualityExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">RelationalExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60390r73"></a><span 
class="ptmr8t-x-x-80">73</span></span><span 
class="pcrr8t-">EQExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">EqualityExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60391r74"></a><span 
class="ptmr8t-x-x-80">74</span></span><span 
class="pcrr8t-">NEExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">EqualityExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60392r75"></a><span 
class="ptmr8t-x-x-80">75</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LogicalExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">BinaryExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60393r76"></a><span 
class="ptmr8t-x-x-80">76</span></span><span 
class="pcrr8t-">AndExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">LogicalExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60394r77"></a><span 
class="ptmr8t-x-x-80">77</span></span><span 
class="pcrr8t-">OrExp</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">LogicalExp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60395r78"></a><span 
class="ptmr8t-x-x-80">78</span></span><span 
class="pcrr8t-">Modifiers</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Modifier</span><span 
class="pcrr8t-">*;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60396r79"></a><span 
class="ptmr8t-x-x-80">79</span></span><span 
class="pcrr8t-">Modifier</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">ID</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60397r80"></a><span 
class="ptmr8t-x-x-80">80</span></span><span 
class="pcrr8t-">Identifier</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AccessVal</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Name</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60398r81"></a><span 
class="ptmr8t-x-x-80">81</span></span><span 
class="pcrr8t-">ForStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">isParfor</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Boolean</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">AssignStmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Condition</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60399r82"></a><span 
class="ptmr8t-x-x-80">82</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Stepper</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AdditiveExp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LoopBody</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Lower</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Upper</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60400r83"></a><span 
class="ptmr8t-x-x-80">83</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Incr</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">IDUse</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60401r84"></a><span 
class="ptmr8t-x-x-80">84</span></span><span 
class="pcrr8t-">WhileStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Condition</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LoopBody</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60402r85"></a><span 
class="ptmr8t-x-x-80">85</span></span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">*;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60403r86"></a><span 
class="ptmr8t-x-x-80">86</span></span><span 
class="pcrr8t-">LoopBody</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60404r87"></a><span 
class="ptmr8t-x-x-80">87</span></span><span 
class="pcrr8t-">IfElseStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">IfElseIf</span><span 
class="pcrr8t-">*</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">ElseBody</span><span 
class="pcrr8t-">];</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60405r88"></a><span 
class="ptmr8t-x-x-80">88</span></span><span 
class="pcrr8t-">IfElseIf</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Condition</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">IfBody</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60406r89"></a><span 
class="ptmr8t-x-x-80">89</span></span><span 
class="pcrr8t-">IfBody</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60407r90"></a><span 
class="ptmr8t-x-x-80">90</span></span><span 
class="pcrr8t-">ElseBody</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60408r91"></a><span 
class="ptmr8t-x-x-80">91</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60409r92"></a><span 
class="ptmr8t-x-x-80">92</span></span><span 
class="pcrr8t-">AtStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Place</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">AtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60410r93"></a><span 
class="ptmr8t-x-x-80">93</span></span><span 
class="pcrr8t-">AtBlock</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60411r94"></a><span 
class="ptmr8t-x-x-80">94</span></span><span 
class="pcrr8t-">AsyncStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">AsyncBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60412r95"></a><span 
class="ptmr8t-x-x-80">95</span></span><span 
class="pcrr8t-">AsyncBlock</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60413r96"></a><span 
class="ptmr8t-x-x-80">96</span></span><span 
class="pcrr8t-">FinishStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">FinishBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60414r97"></a><span 
class="ptmr8t-x-x-80">97</span></span><span 
class="pcrr8t-">FinishBlock</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60415r98"></a><span 
class="ptmr8t-x-x-80">98</span></span><span 
class="pcrr8t-">AtomicStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">AtomicBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60416r99"></a><span 
class="ptmr8t-x-x-80">99</span></span><span 
class="pcrr8t-">AtomicBlock</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60417r100"></a><span 
class="ptmr8t-x-x-80">100</span></span><span 
class="pcrr8t-">WhenStmt</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Stmt</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Condition</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">WhenBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60418r101"></a><span 
class="ptmr8t-x-x-80">101</span></span><span 
class="pcrr8t-">WhenBlock</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">StmtBlock</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60419r102"></a><span 
class="ptmr8t-x-x-80">102</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">AccessVal</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60420r103"></a><span 
class="ptmr8t-x-x-80">103</span></span><span 
class="pcrr8t-">abstract</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MethodCall</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60421r104"></a><span 
class="ptmr8t-x-x-80">104</span></span><span 
class="pcrr8t-">BuiltinMethodCall</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">MethodCall</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">BuiltinMethodName</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">MethodId</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60422r105"></a><span 
class="ptmr8t-x-x-80">105</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Argument</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60423r106"></a><span 
class="ptmr8t-x-x-80">106</span></span><span 
class="pcrr8t-">MethodId</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">AccessVal</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">Name</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">&#x003E;;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60424r107"></a><span 
class="ptmr8t-x-x-80">107</span></span><span 
class="pcrr8t-">UserDefMethodCall</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">MethodCall</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">UserDefMethodName</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">MethodId</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-60425r108"></a><span 
class="ptmr8t-x-x-80">108</span></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Argument</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Exp</span><span 
class="pcrr8t-">*;</span>
   </div>
    
</body></html> 

                                                                                   


